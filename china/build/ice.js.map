{"version":3,"file":"ice.js","mappings":";;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACjHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACrHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACtLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC5GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACxHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AChCA;AACA;AACA;;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACxGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC/SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACtJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AChQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACtKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACvMA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC/SA;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC/BA;;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC9FA;AACA;AACA;AACA;;;;;;;;;;;;;ACHA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5dA;AACA;AACA;;;;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC/IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC9HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACxNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC9BA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAQA;AACA;;;;;;;;;;;;;;;;ACjDA;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAUA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC9MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC1KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACrQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA;AACA;;;;;;;;;;;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACleA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC3KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACzkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+jsx-runtime@0.3.1_react@18.3.1/node_modules/@ice/jsx-runtime/esm/dev.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+jsx-runtime@0.3.1_react@18.3.1/node_modules/@ice/jsx-runtime/esm/style.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-react-dom@1.1.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-react-dom/esm/index.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-react-dom@1.1.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-react-dom/esm/props.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-react-dom@1.1.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-react-dom/esm/reconciler.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-react-dom@1.1.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-react-dom/esm/render.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/app/App.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/app/Link.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/app/connect.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/app/history.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/app/hooks.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/app/html/constant.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/app/html/runtime.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/app/html/utils.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/app/index.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/app/injectMiniappLifecycles.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/app/react-meta.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/app/routeContext.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/app/runClientApp.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/app/suspense.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/app/usePageLifecycle.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/app/useSearchParams.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/app/utils.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/bom/document.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/bom/getComputedStyle.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/bom/navigator.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/bom/raf.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/bom/window.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/constants/index.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/current.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/dom-external/mutation-observer/implements.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/dom-external/mutation-observer/index.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/dom/class-list.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/dom/document.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/dom/element.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/dom/event-source.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/dom/event-target.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/dom/event.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/dom/form.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/dom/node.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/dom/root.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/dom/style.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/dom/style_properties.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/dom/svg.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/dom/text.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/dom/tree.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/dsl/common.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/dsl/instance.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/emitter/emitter.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/env.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/hydrate.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/index.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/interface/element.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/interface/event-target.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/interface/event.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/interface/hydrate.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/interface/index.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/interface/node.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/interface/options.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/interface/utils.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/next-tick.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/options.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/perf.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+miniapp-runtime@1.2.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/miniapp-runtime/esm/utils/index.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+plugin-miniapp@1.2.3_@swc+helpers@0.5.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/plugin-miniapp/esm/miniapp/webpack/template/comp.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+plugin-miniapp@1.2.3_@swc+helpers@0.5.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/plugin-miniapp/esm/miniapp/webpack/template/custom-wrapper.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+plugin-miniapp@1.2.3_@swc+helpers@0.5.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/plugin-miniapp/esm/runtime/index.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+plugin-miniapp@1.2.3_@swc+helpers@0.5.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/plugin-miniapp/esm/targets/wechat/components.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+plugin-miniapp@1.2.3_@swc+helpers@0.5.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/plugin-miniapp/esm/targets/wechat/runtime.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/Activity.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/App.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/AppContext.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/AppErrorBoundary.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/ClientOnly.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/ClientRouter.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/Document.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/KeepAliveOutlet.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/RouteContext.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/RouteWrapper.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/Suspense.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/appConfig.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/appData.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/dataLoader.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/dynamic.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/history.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/index.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/jsx-dev-runtime.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/matchRoutes.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/proxyData.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/reportRecoverableError.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/requestContext.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/routes.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/routesConfig.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/runClientApp.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/runtime.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/singleRouter.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/useMounted.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/usePageLifecycle.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/utils/addLeadingSlash.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/utils/deprecatedHistory.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+runtime@1.5.2_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ice/runtime/esm/utils/getCurrentRoutePath.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+shared@1.1.0/node_modules/@ice/shared/esm/event-emitter.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+shared@1.1.0/node_modules/@ice/shared/esm/index.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+shared@1.1.0/node_modules/@ice/shared/esm/is.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+shared@1.1.0/node_modules/@ice/shared/esm/miniapp/components.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+shared@1.1.0/node_modules/@ice/shared/esm/miniapp/runtime-hooks.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+shared@1.1.0/node_modules/@ice/shared/esm/miniapp/shortcuts.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+shared@1.1.0/node_modules/@ice/shared/esm/miniapp/template.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+shared@1.1.0/node_modules/@ice/shared/esm/miniapp/utils.js","webpack://@ice/miniapp-scaffold/./node_modules/.pnpm/@ice+shared@1.1.0/node_modules/@ice/shared/esm/utils.js"],"sourcesContent":["// @ts-ignore\nimport { jsxDEV as _jsxDEV, Fragment } from \"react/jsx-dev-runtime\";\nimport { hijackElementProps } from \"./style.js\";\n/**\n * @param {*} type\n * @param {object} props\n * @param {string} key\n * @param {boolean} isStaticChildren\n * @param {object} source\n * @param {any} self\n */ function jsxDEV(type, props, key, isStaticChildren, source, self) {\n    return _jsxDEV(type, hijackElementProps(props), key, isStaticChildren, source, self);\n}\nexport { jsxDEV, Fragment };\n","// @ts-ignore\nimport { convertUnit } from \"style-unit\";\nvar STYLE = \"style\";\nfunction isObject(obj) {\n    return typeof obj === \"object\";\n}\n// Support rpx unit.\nexport function hijackElementProps(props) {\n    if (props && STYLE in props) {\n        var style = props.style;\n        if (isObject(style)) {\n            var result = Object.assign({}, props);\n            var convertedStyle = {};\n            for(var prop in style)// @ts-ignore\n            convertedStyle[prop] = typeof style[prop] === \"string\" ? convertUnit(style[prop]) : style[prop];\n            result[\"style\"] = convertedStyle;\n            return result;\n        }\n    }\n    return props;\n}\n","import { ensure, isFunction } from '@ice/shared';\nimport { IceMiniappReconciler } from './reconciler.js';\nimport { ContainerMap, createRoot, render } from './render.js';\nconst { batchedUpdates } = IceMiniappReconciler;\nfunction unmountComponentAtNode(dom) {\n    ensure(dom && [1, 8, 9, 11].includes(dom.nodeType), 'unmountComponentAtNode(...): Target container is not a DOM element.');\n    const root = ContainerMap.get(dom);\n    if (!root)\n        return false;\n    batchedUpdates(() => {\n        root.unmount(() => {\n            ContainerMap.delete(dom);\n        });\n    }, null);\n    return true;\n}\nfunction findDOMNode(comp) {\n    if (comp == null) {\n        return null;\n    }\n    const { nodeType } = comp;\n    if (nodeType === 1 || nodeType === 3) {\n        return comp;\n    }\n    return IceMiniappReconciler.findHostInstance(comp);\n}\nconst portalType = isFunction(Symbol) && Symbol.for\n    ? Symbol.for('react.portal')\n    : 0xeaca;\nfunction createPortal(children, containerInfo, key) {\n    return {\n        $$typeof: portalType,\n        key: key == null ? null : String(key),\n        children,\n        containerInfo,\n        implementation: null,\n    };\n}\nconst Internals = {\n    usingClientEntryPoint: false,\n};\nexport { \n// Hack for import ReactDOM from 'react-dom/client'\nInternals as __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED, createPortal, createRoot, findDOMNode, render, unmountComponentAtNode, \n/* eslint-disable-next-line camelcase */\nbatchedUpdates as unstable_batchedUpdates, };\nexport default {\n    render,\n    createRoot,\n    unstable_batchedUpdates: batchedUpdates,\n    unmountComponentAtNode,\n    findDOMNode,\n    createPortal,\n};\n","import { FormElement } from '@ice/miniapp-runtime';\nimport { capitalize, internalComponents, isFunction, isNumber, isObject, isString, toCamelCase } from '@ice/shared';\nfunction isEventName(s) {\n    return s[0] === 'o' && s[1] === 'n';\n}\nconst IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\nexport function updateProps(dom, oldProps, newProps) {\n    let i;\n    for (i in oldProps) {\n        if (!(i in newProps)) {\n            setProperty(dom, i, null, oldProps[i]);\n        }\n    }\n    const isFormElement = dom instanceof FormElement;\n    for (i in newProps) {\n        if (oldProps[i] !== newProps[i] || (isFormElement && i === 'value')) {\n            setProperty(dom, i, newProps[i], oldProps[i]);\n        }\n    }\n}\n// function eventProxy (e: CommonEvent) {\n//   const el = document.getElementById(e.currentTarget.id)\n//   const handlers = el!.__handlers[e.type]\n//   handlers[0](e)\n// }\nfunction setEvent(dom, name, value, oldValue) {\n    const isCapture = name.endsWith('Capture');\n    let eventName = name.toLowerCase().slice(2);\n    if (isCapture) {\n        eventName = eventName.slice(0, -7);\n    }\n    const compName = capitalize(toCamelCase(dom.tagName.toLowerCase()));\n    if (eventName === 'click' && compName in internalComponents) {\n        eventName = 'tap';\n    }\n    if (isFunction(value)) {\n        if (oldValue) {\n            dom.removeEventListener(eventName, oldValue, false);\n            dom.addEventListener(eventName, value, { isCapture, sideEffect: false });\n        }\n        else {\n            dom.addEventListener(eventName, value, isCapture);\n        }\n    }\n    else {\n        dom.removeEventListener(eventName, oldValue);\n    }\n}\nfunction setStyle(style, key, value) {\n    if (key[0] === '-') {\n        style.setProperty(key, value.toString());\n    }\n    style[key] =\n        isNumber(value) && IS_NON_DIMENSIONAL.test(key) === false\n            ? `${value}px`\n            : value == null\n                ? ''\n                : value;\n}\nfunction setProperty(dom, name, value, oldValue) {\n    var _a, _b;\n    name = name === 'className' ? 'class' : name;\n    if (name === 'key' ||\n        name === 'children' ||\n        name === 'ref') {\n        // skip\n    }\n    else if (name === 'style') {\n        const { style } = dom;\n        if (isString(value)) {\n            style.cssText = value;\n        }\n        else {\n            if (isString(oldValue)) {\n                style.cssText = '';\n                oldValue = null;\n            }\n            if (isObject(oldValue)) {\n                for (const i in oldValue) {\n                    if (!(value && i in value)) {\n                        setStyle(style, i, '');\n                    }\n                }\n            }\n            if (isObject(value)) {\n                for (const i in value) {\n                    if (!oldValue || value[i] !== oldValue[i]) {\n                        setStyle(style, i, value[i]);\n                    }\n                }\n            }\n        }\n    }\n    else if (isEventName(name)) {\n        setEvent(dom, name, value, oldValue);\n    }\n    else if (name === 'dangerouslySetInnerHTML') {\n        const newHtml = (_a = value === null || value === void 0 ? void 0 : value.__html) !== null && _a !== void 0 ? _a : '';\n        const oldHtml = (_b = oldValue === null || oldValue === void 0 ? void 0 : oldValue.__html) !== null && _b !== void 0 ? _b : '';\n        if (newHtml || oldHtml) {\n            if (oldHtml !== newHtml) {\n                dom.innerHTML = newHtml;\n            }\n        }\n    }\n    else if (!isFunction(value)) {\n        if (value == null) {\n            dom.removeAttribute(name);\n        }\n        else {\n            dom.setAttribute(name, value);\n        }\n    }\n}\n","import { document } from '@ice/miniapp-runtime';\nimport { EMPTY_ARR, isBoolean, isUndefined, noop } from '@ice/shared';\nimport Reconciler from 'react-reconciler';\nimport * as scheduler from 'scheduler';\nimport { updateProps } from './props.js';\nconst { unstable_now: now, } = scheduler;\nfunction returnFalse() {\n    return false;\n}\nconst hostConfig = {\n    createInstance(type) {\n        return document.createElement(type);\n    },\n    createTextInstance(text) {\n        return document.createTextNode(text);\n    },\n    getPublicInstance(inst) {\n        return inst;\n    },\n    getRootHostContext() {\n        return {};\n    },\n    getChildHostContext() {\n        return {};\n    },\n    getCurrentEventPriority() {\n        // 因 @types/react-reconciler 未更新，ts会报错，这里直接返回16\n        return 16; // import { DefaultEventPriority } from 'react-reconciler/constants'\n    },\n    detachDeletedInstance() {\n        // noop\n    },\n    appendChild(parent, child) {\n        parent.appendChild(child);\n    },\n    appendInitialChild(parent, child) {\n        parent.appendChild(child);\n    },\n    appendChildToContainer(parent, child) {\n        parent.appendChild(child);\n    },\n    removeChild(parent, child) {\n        parent.removeChild(child);\n    },\n    removeChildFromContainer(parent, child) {\n        parent.removeChild(child);\n    },\n    insertBefore(parent, child, refChild) {\n        parent.insertBefore(child, refChild);\n    },\n    insertInContainerBefore(parent, child, refChild) {\n        parent.insertBefore(child, refChild);\n    },\n    commitTextUpdate(textInst, _, newText) {\n        textInst.nodeValue = newText;\n    },\n    finalizeInitialChildren(dom, _, props) {\n        updateProps(dom, {}, props);\n        return false;\n    },\n    prepareUpdate() {\n        return EMPTY_ARR;\n    },\n    commitUpdate(dom, _payload, _type, oldProps, newProps) {\n        updateProps(dom, oldProps, newProps);\n    },\n    hideInstance(instance) {\n        const { style } = instance;\n        style.setProperty('display', 'none');\n    },\n    unhideInstance(instance, props) {\n        const styleProp = props.style;\n        let display = (styleProp && Object.prototype.hasOwnProperty.call(styleProp, 'display')) ? styleProp.display : null;\n        display = display == null || isBoolean(display) || display === '' ? '' : (`${display}`).trim();\n        // eslint-disable-next-line dot-notation\n        instance.style['display'] = display;\n    },\n    clearContainer(element) {\n        if (element.childNodes.length > 0) {\n            element.textContent = '';\n        }\n    },\n    queueMicrotask: isUndefined(Promise)\n        ? setTimeout\n        : callback => Promise.resolve(null)\n            .then(callback)\n            .catch((error) => {\n            setTimeout(() => {\n                throw error;\n            });\n        }),\n    shouldSetTextContent: returnFalse,\n    prepareForCommit() { return null; },\n    resetAfterCommit: noop,\n    commitMount: noop,\n    now,\n    cancelTimeout: clearTimeout,\n    scheduleTimeout: setTimeout,\n    preparePortalMount: noop,\n    noTimeout: -1,\n    supportsMutation: true,\n    supportsPersistence: false,\n    isPrimaryRenderer: true,\n    supportsHydration: false,\n};\nconst IceMiniappReconciler = Reconciler(hostConfig);\nif (process.env.NODE_ENV !== 'production') {\n    const foundDevTools = IceMiniappReconciler.injectIntoDevTools({\n        bundleType: 1,\n        version: '18.0.0',\n        rendererPackageName: '@ice/miniapp-react-dom',\n    });\n    if (!foundDevTools) {\n        // eslint-disable-next-line no-console\n        console.info('%cDownload the React DevTools ' + 'for a better development experience: ' + 'https://reactjs.org/link/react-devtools', 'font-weight:bold');\n    }\n}\nexport { IceMiniappReconciler, };\n","import { IceMiniappReconciler } from './reconciler.js';\nexport const ContainerMap = new WeakMap();\nclass Root {\n    constructor(renderer, domContainer, isConcurrentRoot = false) {\n        this.renderer = renderer;\n        /** ConcurrentRoot & LegacyRoot: react-reconciler/src/ReactRootTags.js */\n        this.internalRoot = renderer.createContainer(domContainer, isConcurrentRoot ? 1 : 0, false, null);\n    }\n    render(children, cb) {\n        const { renderer, internalRoot } = this;\n        renderer.updateContainer(children, internalRoot, null, cb);\n        return renderer.getPublicRootInstance(internalRoot);\n    }\n    unmount(cb) {\n        this.renderer.updateContainer(null, this.internalRoot, null, cb);\n    }\n}\nexport function render(element, domContainer, cb) {\n    const oldRoot = ContainerMap.get(domContainer);\n    if (oldRoot != null) {\n        return oldRoot.render(element, cb);\n    }\n    const root = new Root(IceMiniappReconciler, domContainer);\n    ContainerMap.set(domContainer, root);\n    return root.render(element, cb);\n}\nexport function createRoot(domContainer) {\n    const oldRoot = ContainerMap.get(domContainer);\n    if (oldRoot != null) {\n        return oldRoot;\n    }\n    const root = new Root(IceMiniappReconciler, domContainer, true);\n    ContainerMap.set(domContainer, root);\n    return root;\n}\n","import React from 'react';\nimport { AppErrorBoundary, usePublicAppContext } from '@ice/runtime';\nimport { AppWrapper } from './connect.js';\nexport default function App() {\n    const { appConfig } = usePublicAppContext();\n    const { strict, errorBoundary } = appConfig.app;\n    const StrictMode = strict ? React.StrictMode : React.Fragment;\n    const ErrorBoundary = errorBoundary ? AppErrorBoundary : React.Fragment;\n    return (React.createElement(StrictMode, null,\n        React.createElement(ErrorBoundary, null,\n            React.createElement(AppWrapper, null))));\n}\n","import React from 'react';\nimport { getMiniappRoutes } from './history.js';\nfunction matchRoute(url) {\n    const [url_] = url.split('#');\n    const [path, query] = url_.split('?');\n    const miniappRoutes = getMiniappRoutes();\n    const matchedRoute = miniappRoutes.find(route => route.path === path);\n    // / prefix is required in wechat miniprogram\n    return query ? `/${matchedRoute.source}?${query}` : `/${matchedRoute.source}`;\n}\nexport default function Link(props) {\n    const url = matchRoute(props.to);\n    // @ts-ignore\n    return React.createElement(\"navigator\", { url: url }, props.children);\n}\n","import { EMPTY_OBJ, hooks } from '@ice/shared';\nimport React, { createElement } from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { Current, getPageInstance, incrementId, injectPageInstance, } from '../index.js';\nimport { ConfigProvider, DataProvider } from './routeContext.js';\nimport enableHtmlRuntime from './html/runtime.js';\nimport { reactMeta } from './react-meta.js';\nimport { ensureIsArray, HOOKS_APP_ID, isClassComponent, setDefaultDescriptor, setRouterParams } from './utils.js';\nconst pageKeyId = incrementId();\nexport function setReconciler() {\n    hooks.tap('modifyMpEvent', (event) => {\n        event.type = event.type.replace(/-/g, '');\n    });\n    hooks.tap('batchedEventUpdates', (cb) => {\n        ReactDOM.unstable_batchedUpdates(cb);\n    });\n    hooks.tap('mergePageInstance', (prev, next) => {\n        if (!prev || !next)\n            return;\n        // 子组件使用 lifecycle hooks 注册了生命周期后，会存在 prev，里面是注册的生命周期回调。\n        // prev 使用 Object.create(null) 创建，H5 的 fast-refresh 可能也会导致存在 prev，要排除这些意外产生的 prev\n        if ('constructor' in prev)\n            return;\n        Object.keys(prev).forEach(item => {\n            const prevList = prev[item];\n            const nextList = ensureIsArray(next[item]);\n            next[item] = nextList.concat(prevList);\n        });\n    });\n}\nexport function connectReactPage(R, id) {\n    return (Page, { routeData, routeConfig }) => {\n        const isReactComponent = isClassComponent(R, Page);\n        const inject = (node) => node && injectPageInstance(node, id);\n        const refs = isReactComponent ? { ref: inject } : {\n            forwardedRef: inject,\n            // 兼容 react-redux 7.20.1+\n            reactReduxForwardedRef: inject,\n        };\n        if (reactMeta.PageContext === EMPTY_OBJ) {\n            reactMeta.PageContext = R.createContext('');\n        }\n        const PageContextProvider = reactMeta.PageContext.Provider;\n        return class PageWrapper extends R.Component {\n            constructor() {\n                super(...arguments);\n                this.state = {\n                    hasError: false,\n                };\n            }\n            static getDerivedStateFromError(error) {\n                triggerAppHook(this, 'onError', error.message + error.stack);\n                return { hasError: true };\n            }\n            render() {\n                const children = this.state.hasError\n                    ? []\n                    : (React.createElement(DataProvider, { value: routeData },\n                        React.createElement(ConfigProvider, { value: routeConfig },\n                            React.createElement(PageContextProvider, { value: id },\n                                React.createElement(Page, { ...this.props, ...refs })))));\n                return createElement('root', { id }, children);\n            }\n        };\n    };\n}\nclass AppComponent extends React.Component {\n    render() {\n        return this.props.children;\n    }\n}\nlet appWrapper;\nexport class AppWrapper extends React.Component {\n    constructor(props) {\n        super(props);\n        // run createElement() inside the render function to make sure that owner is right\n        this.pages = [];\n        this.elements = [];\n        appWrapper = this;\n    }\n    mount(pageComponent, { id, routeData, routeConfig }, cb) {\n        const pageWrapper = connectReactPage(React, id)(pageComponent, { routeData, routeConfig });\n        const key = id + pageKeyId();\n        const page = () => createElement(pageWrapper, { key, tid: id });\n        this.pages.push(page);\n        this.forceUpdate(cb);\n    }\n    unmount(id, cb) {\n        const { elements } = this;\n        const idx = elements.findIndex(item => item.props.tid === id);\n        elements.splice(idx, 1);\n        this.forceUpdate(cb);\n    }\n    render() {\n        const { pages, elements } = this;\n        while (pages.length > 0) {\n            const page = pages.pop();\n            elements.push(page());\n        }\n        const props = {};\n        return createElement(AppComponent, props, elements.slice());\n    }\n}\n/**\n * 桥接小程序 App 构造器和 React 渲染流程\n * @param react 框架\n * @param dom 框架渲染器\n * @param config 入口组件配置 app.config.js 的内容\n * @returns 传递给 App 构造器的对象 obj ：App(obj)\n */\nexport function createMiniApp(config, lifecycles) {\n    setReconciler();\n    enableHtmlRuntime();\n    const [ON_LAUNCH, ON_SHOW, ON_HIDE, ON_ERROR, ON_PAGE_NOT_FOUND, ON_UNHANDLED_REJECTION] = hooks.call('getMiniLifecycleImpl').app;\n    const appObj = Object.create({\n        render(cb) {\n            appWrapper.forceUpdate(cb);\n        },\n        mount(component, { id, routeData, routeConfig }, cb) {\n            appWrapper.mount(component, { id, routeData, routeConfig }, cb);\n        },\n        unmount(id, cb) {\n            appWrapper.unmount(id, cb);\n        },\n    }, {\n        config: setDefaultDescriptor({\n            configurable: true,\n            value: config,\n        }),\n        [ON_LAUNCH]: setDefaultDescriptor({\n            value(options) {\n                setRouterParams(options);\n                triggerAppHook(this, 'onLaunch', options);\n            },\n        }),\n        [ON_SHOW]: setDefaultDescriptor({\n            value(options) {\n                setRouterParams(options);\n                triggerAppHook(this, 'onShow', options);\n            },\n        }),\n        [ON_HIDE]: setDefaultDescriptor({\n            value() {\n                triggerAppHook(this, 'onHide');\n            },\n        }),\n        [ON_ERROR]: setDefaultDescriptor({\n            value(error) {\n                triggerAppHook(this, 'onError', error);\n            },\n        }),\n        [ON_PAGE_NOT_FOUND]: setDefaultDescriptor({\n            value(res) {\n                triggerAppHook(this, 'onPageNotFound', res);\n            },\n        }),\n        [ON_UNHANDLED_REJECTION]: setDefaultDescriptor({\n            value(res) {\n                triggerAppHook(this, 'onUnhandledRejection', res);\n            },\n        }),\n    });\n    if (lifecycles.onShareAppMessage) {\n        // Only works in ali miniapp\n        appObj.onShareAppMessage = function (res) {\n            return triggerAppHook(this, 'onShareAppMessage', res);\n        };\n    }\n    Current.app = appObj;\n    return App(appObj);\n}\nfunction triggerAppHook(app, lifecycle, ...option) {\n    const instance = getPageInstance(HOOKS_APP_ID);\n    if (instance) {\n        const func = hooks.call('getLifecycle', instance, lifecycle);\n        if (Array.isArray(func)) {\n            if (lifecycle === 'onShareAppMessage') {\n                return func[0].apply(app, option);\n            }\n            func.forEach(cb => cb.apply(app, option));\n        }\n    }\n}\n","import { createMiniAppHistory } from 'miniapp-history';\nlet routerHistory;\nlet miniappRoutes = [];\nfunction generateRoutes(routes) {\n    return routes.map(route => {\n        const removedSlashRoute = route.replace(/^\\//, ''); // Remove / at the beginning of the route\n        return {\n            path: removedSlashRoute === 'index' ? '/' : `/${removedSlashRoute}`.replace(/\\/index$/, ''),\n            source: `pages/${removedSlashRoute}`,\n        };\n    });\n}\nfunction setHistory(routes) {\n    miniappRoutes = generateRoutes(routes);\n    routerHistory = createMiniAppHistory(miniappRoutes);\n}\nfunction getMiniappRoutes() {\n    return miniappRoutes;\n}\nexport { routerHistory, setHistory, getMiniappRoutes, };\n","import { isArray, isFunction, hooks } from '@ice/shared';\nimport { getPageInstance, injectPageInstance, } from '../dsl/common.js';\nimport { reactMeta } from './react-meta.js';\nimport { HOOKS_APP_ID } from './utils.js';\nconst createIceMiniappHook = (lifecycle) => {\n    return (fn) => {\n        const { R: React, PageContext } = reactMeta;\n        const id = React.useContext(PageContext) || HOOKS_APP_ID;\n        // hold fn ref and keep up to date\n        const fnRef = React.useRef(fn);\n        if (fnRef.current !== fn)\n            fnRef.current = fn;\n        React.useLayoutEffect(() => {\n            let inst = getPageInstance(id);\n            let first = false;\n            if (inst == null) {\n                first = true;\n                inst = Object.create(null);\n            }\n            inst = inst;\n            // callback is immutable but inner function is up to date\n            const callback = (...args) => fnRef.current(...args);\n            if (isFunction(inst[lifecycle])) {\n                inst[lifecycle] = [inst[lifecycle], callback];\n            }\n            else {\n                inst[lifecycle] = [\n                    ...(inst[lifecycle] || []),\n                    callback,\n                ];\n            }\n            if (first) {\n                injectPageInstance(inst, id);\n            }\n            return () => {\n                const inst = getPageInstance(id);\n                const list = inst[lifecycle];\n                if (list === callback) {\n                    inst[lifecycle] = undefined;\n                }\n                else if (isArray(list)) {\n                    inst[lifecycle] = list.filter(item => item !== callback);\n                }\n            };\n        }, [id]);\n    };\n};\nconst pageLifecycle = hooks.call('getMiniLifecycleImpl').page;\nconst pgeLifecycleArray = pageLifecycle.toString().split(',');\nconst pageLifecycleHooks = {};\npgeLifecycleArray.forEach(lifecycle => {\n    pageLifecycleHooks[lifecycle] = createIceMiniappHook(lifecycle);\n});\nexport { pageLifecycleHooks, pgeLifecycleArray, };\n","import { isString } from '@ice/shared';\nfunction genAttrMapFnFromDir(dir) {\n    const fn = function (key, value) {\n        const lowerKey = key.toLowerCase();\n        if (lowerKey in dir) {\n            const res = dir[lowerKey];\n            if (isString(res)) {\n                key = res;\n            }\n            else {\n                key = res[0];\n                value = res[1][value] || value;\n            }\n        }\n        return [key, value];\n    };\n    return fn;\n}\nexport const inlineElements = new Set(['i', 'abbr', 'select', 'acronym', 'small', 'bdi', 'kbd', 'strong', 'big', 'sub', 'sup', 'br', 'mark', 'meter', 'template', 'cite', 'object', 'time', 'code', 'output', 'u', 'data', 'picture', 'tt', 'datalist', 'var', 'dfn', 'del', 'q', 'em', 's', 'embed', 'samp', 'b']);\nexport const blockElements = new Set(['body', 'svg', 'address', 'fieldset', 'li', 'span', 'article', 'figcaption', 'main', 'aside', 'figure', 'nav', 'blockquote', 'footer', 'ol', 'details', 'p', 'dialog', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'pre', 'dd', 'header', 'section', 'div', 'hgroup', 'table', 'dl', 'hr', 'ul', 'dt', 'view', 'view-block']);\nexport const specialElements = new Map([\n    ['slot', 'slot'],\n    ['form', 'form'],\n    ['iframe', 'web-view'],\n    ['img', 'image'],\n    ['audio', 'audio'],\n    ['video', 'video'],\n    ['canvas', 'canvas'],\n    ['a', {\n            mapName(props) {\n                return !props.href || (/^javascript/.test(props.href)) ? 'view' : 'navigator';\n            },\n            mapNameCondition: ['href'],\n            mapAttr: genAttrMapFnFromDir({\n                href: 'url',\n                target: ['openType', {\n                        _blank: 'navigate',\n                        _self: 'redirect',\n                    }],\n            }),\n        }],\n    ['input', {\n            mapName(props) {\n                if (props.type === 'checkbox') {\n                    return 'checkbox';\n                }\n                else if (props.type === 'radio') {\n                    return 'radio';\n                }\n                return 'input';\n            },\n            mapNameCondition: ['type'],\n            mapAttr(key, value, props) {\n                const htmlKey = key.toLowerCase();\n                if (htmlKey === 'autofocus') {\n                    key = 'focus';\n                }\n                else if (htmlKey === 'readonly') {\n                    if (props.disabled === true) {\n                        value = true;\n                    }\n                    key = 'disabled';\n                }\n                else if (htmlKey === 'type') {\n                    if (value === 'password') {\n                        key = 'password';\n                        value = true;\n                    }\n                    else if (value === 'tel') {\n                        value = 'number';\n                    }\n                }\n                return [key, value];\n            },\n        }],\n    ['label', {\n            mapName: 'label',\n            mapAttr: genAttrMapFnFromDir({\n                htmlfor: 'for',\n            }),\n        }],\n    ['textarea', {\n            mapName: 'textarea',\n            mapAttr: genAttrMapFnFromDir({\n                autofocus: 'focus',\n                readonly: 'disabled',\n            }),\n        }],\n    ['progress', {\n            mapName: 'progress',\n            mapAttr(key, value, props) {\n                if (key === 'value') {\n                    const max = props.max || 1;\n                    key = 'percent';\n                    value = Math.round(value / max * 100);\n                }\n                return [key, value];\n            },\n        }],\n    ['button', {\n            mapName: 'button',\n            mapAttr(key, value) {\n                if (key === 'type' && (value === 'submit' || value === 'reset')) {\n                    key = 'formType';\n                }\n                return [key, value];\n            },\n        }],\n]);\n","import { hooks, Shortcuts, warn } from '@ice/shared';\nimport { defineMappedProp, ensureHtmlClass, ensureRect, getAttrMapFn, getMappedType, isHtmlTags, mapNameByContion, } from './utils.js';\nexport default function enableHtmlRuntime() {\n    hooks.tap('modifyHydrateData', data => {\n        const nodeName = data[Shortcuts.NodeName];\n        if (!isHtmlTags(nodeName))\n            return;\n        process.env.NODE_ENV !== 'production' && warn(data[Shortcuts.NodeName] === 'select', '请使用 Picker 组件代替 <select>');\n        // map nodeName\n        data[Shortcuts.NodeName] = getMappedType(nodeName, data);\n        // map attr Key/Value\n        const attrMapFn = getAttrMapFn(nodeName);\n        if (attrMapFn) {\n            for (const key in data) {\n                const value = data[key];\n                const [mapKey, mapValue] = attrMapFn(key, value, data);\n                if (key !== mapKey) {\n                    delete data[key];\n                    data[mapKey] = mapValue;\n                }\n                else if (value !== mapValue) {\n                    data[key] = mapValue;\n                }\n            }\n        }\n        if (nodeName === 'br') {\n            data[Shortcuts.Childnodes] = [{\n                    [Shortcuts.NodeName]: '#text',\n                    v: '\\n',\n                }];\n        }\n        data[Shortcuts.Class] = ensureHtmlClass(nodeName, data[Shortcuts.Class]);\n        data[Shortcuts.Style] = ensureRect(data, data[Shortcuts.Style]);\n    });\n    hooks.tap('modifySetAttrPayload', (element, key, payload, componentsAlias) => {\n        const { nodeName, _path, props } = element;\n        if (!isHtmlTags(nodeName))\n            return;\n        // map nodeName\n        mapNameByContion(nodeName, key, element, componentsAlias);\n        const mapName = getMappedType(nodeName, props);\n        const alias = componentsAlias[mapName];\n        // map attr Key/Value\n        const attrMapFn = getAttrMapFn(nodeName);\n        if (attrMapFn) {\n            const { value } = payload;\n            const [mapKey, mapValue] = attrMapFn(key, value, props);\n            payload.path = `${_path}.${alias[mapKey] || mapKey}`;\n            payload.value = mapValue;\n        }\n        if (key === Shortcuts.Class) {\n            payload.value = ensureHtmlClass(nodeName, payload.value);\n        }\n        else if (key === Shortcuts.Style || key === 'width' || key === 'height') {\n            payload.path = `${_path}.${Shortcuts.Style}`;\n            payload.value = ensureRect(props, element.style.cssText);\n        }\n    });\n    hooks.tap('modifyRmAttrPayload', (element, key, payload, componentsAlias) => {\n        const { nodeName, _path, props } = element;\n        if (!isHtmlTags(nodeName))\n            return;\n        // map nodeName\n        mapNameByContion(nodeName, key, element, componentsAlias);\n        const mapName = getMappedType(nodeName, props);\n        const alias = componentsAlias[mapName];\n        // map attr Key/Value\n        const attrMapFn = getAttrMapFn(nodeName);\n        if (attrMapFn) {\n            const value = payload[key];\n            const [mapKey] = attrMapFn(key, value, props);\n            payload.path = `${_path}.${alias[mapKey] || mapKey}`;\n        }\n        if (key === Shortcuts.Class) {\n            payload.value = ensureHtmlClass(nodeName, payload.value);\n        }\n        else if (key === Shortcuts.Style || key === 'width' || key === 'height') {\n            payload.path = `${_path}.${Shortcuts.Style}`;\n            payload.value = ensureRect(props, element.style.cssText);\n        }\n    });\n    hooks.tap('onAddEvent', (type, _handler, _options, node) => {\n        node = node;\n        if (!isHtmlTags(node.nodeName))\n            return;\n        if (type === 'click') {\n            defineMappedProp(node.__handlers, type, 'tap');\n        }\n        else if (node.nodeName === 'input') {\n            if (type === 'change') {\n                if (node.props.type === 'checkbox' || node.props.type === 'radio') {\n                    defineMappedProp(node.__handlers, type, 'tap');\n                }\n                else {\n                    defineMappedProp(node.__handlers, type, 'input');\n                }\n            }\n            else if (type === 'keypress') {\n                defineMappedProp(node.__handlers, type, 'confirm');\n            }\n        }\n    });\n    hooks.tap('modifyIceEvent', (event, element) => {\n        const { nodeName, props } = element;\n        if (nodeName === 'input' && event.type === 'tap') {\n            if (props.type === 'checkbox') {\n                props.checked = !props.checked;\n            }\n            else if (props.type === 'radio' && !props.checked) {\n                props.checked = true;\n            }\n            if (event.mpEvent) {\n                const { currentTarget, target } = event.mpEvent;\n                currentTarget.checked = props.checked;\n                if (target.id === currentTarget.id) {\n                    target.checked = props.checked;\n                }\n            }\n        }\n    });\n}\n","import { isFunction, isString, Shortcuts } from '@ice/shared';\nimport { blockElements, inlineElements, specialElements, } from './constant.js';\nexport function isHtmlTags(nodeName) {\n    if (inlineElements.has(nodeName) || blockElements.has(nodeName) || specialElements.has(nodeName)) {\n        return true;\n    }\n    return false;\n}\nexport function getMappedType(nodeName, rawProps) {\n    if (inlineElements.has(nodeName)) {\n        return 'text';\n    }\n    else if (specialElements.has(nodeName)) {\n        const mapping = specialElements.get(nodeName);\n        if (isString(mapping)) {\n            return mapping;\n        }\n        const { mapName } = mapping;\n        return isFunction(mapName) ? mapName(rawProps) : mapName;\n    }\n    else {\n        return 'view';\n    }\n}\nexport function getAttrMapFn(nodeName) {\n    const mapping = specialElements.get(nodeName);\n    if (!isString(mapping)) {\n        return mapping === null || mapping === void 0 ? void 0 : mapping.mapAttr;\n    }\n}\nfunction getMapNameByCondition(nodeName, attr, props) {\n    const mapping = specialElements.get(nodeName);\n    if (!mapping || isString(mapping))\n        return;\n    const { mapName, mapNameCondition } = mapping;\n    if (!mapNameCondition)\n        return;\n    if (mapNameCondition.indexOf(attr) > -1 && !isString(mapName)) {\n        return mapName(props);\n    }\n}\nexport function mapNameByContion(nodeName, key, element, componentsAlias) {\n    const mapName = getMapNameByCondition(nodeName, key, element.props);\n    if (mapName) {\n        const mapNameAlias = componentsAlias[mapName]._num;\n        element.enqueueUpdate({\n            path: `${element._path}.${Shortcuts.NodeName}`,\n            value: mapNameAlias,\n        });\n    }\n}\nexport function ensureHtmlClass(tagName, className = '') {\n    const classList = className.split(' ');\n    const htmlClass = `h5-${tagName}`;\n    if (classList.indexOf(htmlClass) === -1) {\n        classList.unshift(htmlClass);\n    }\n    return classList.join(' ');\n}\nexport function ensureRect(props, style = '') {\n    let cssText = style;\n    const { width, height } = props;\n    if (width) {\n        cssText = `width: ${width};${cssText}`;\n    }\n    if (height) {\n        cssText = `height: ${height};${cssText}`;\n    }\n    return cssText;\n}\nexport function defineMappedProp(obj, propName, mapName) {\n    Object.defineProperty(obj, propName, {\n        enumerable: true,\n        configurable: true,\n        get() {\n            return obj[mapName];\n        },\n        set(val) {\n            obj[mapName] = val;\n        },\n    });\n}\n","import { getAppConfig, defineAppConfig, useAppData, defineDataLoader } from '@ice/runtime';\nimport runClientApp from './runClientApp.js';\nimport Link from './Link.js';\nimport useSearchParams from './useSearchParams.js';\nimport { routerHistory as history } from './history.js';\nimport usePageLifecycle from './usePageLifecycle.js';\nimport { useData, useConfig } from './routeContext.js';\nimport { withSuspense, useSuspenseData } from './suspense.js';\nexport { runClientApp, getAppConfig, defineAppConfig, useAppData, useData, useConfig, Link, useSearchParams, history, defineDataLoader, usePageLifecycle, withSuspense, useSuspenseData, };\n","import { hooks, isFunction } from '@ice/shared';\nimport { injectPageInstance, getPageInstance, } from '../dsl/common.js';\nimport { HOOKS_APP_ID } from './utils.js';\nconst MINIAPP_LIFECYCLES = hooks.call('getMiniLifecycleImpl').app;\nexport default function injectMiniappLifecycles(miniappLifecycles) {\n    let inst = getPageInstance(HOOKS_APP_ID);\n    if (!inst) {\n        inst = Object.create(null);\n        injectPageInstance(inst, HOOKS_APP_ID);\n    }\n    Object.keys(miniappLifecycles).forEach(key => {\n        if (MINIAPP_LIFECYCLES.includes(key)) {\n            if (isFunction(inst[key])) {\n                inst[key] = [inst[key], miniappLifecycles[key]];\n            }\n            else {\n                inst[key] = [\n                    ...(inst[key] || []),\n                    miniappLifecycles[key],\n                ];\n            }\n        }\n    });\n}\n","import { EMPTY_OBJ } from '@ice/shared';\nimport React from 'react';\nexport const reactMeta = {\n    PageContext: EMPTY_OBJ,\n    R: React,\n};\n","import * as React from 'react';\nconst DataContext = React.createContext(undefined);\nDataContext.displayName = 'Data';\nfunction useData() {\n    const value = React.useContext(DataContext);\n    return value;\n}\nconst DataProvider = DataContext.Provider;\nconst ConfigContext = React.createContext(undefined);\nConfigContext.displayName = 'Config';\nfunction useConfig() {\n    const value = React.useContext(ConfigContext);\n    return value;\n}\nconst ConfigProvider = ConfigContext.Provider;\nexport { useData, DataProvider, useConfig, ConfigProvider, };\n","import React from 'react';\nimport { AppContextProvider, getAppData, getAppConfig, Runtime } from '@ice/runtime';\nimport { Current } from '../index.js';\nimport { eventCenter } from '../emitter/emitter.js';\nimport { APP_DATA_READY } from '../constants/index.js';\nimport App from './App.js';\nimport { createMiniApp } from './connect.js';\nimport { setHistory } from './history.js';\nimport injectMiniappLifecycles from './injectMiniappLifecycles.js';\nexport default async function runClientApp(options) {\n    const { app, runtimeModules, runtimeOptions } = options;\n    const appConfig = getAppConfig(app);\n    const appContext = {\n        appExport: app,\n        appConfig,\n        appData: null,\n    };\n    const runtime = new Runtime(appContext, runtimeOptions);\n    if (runtimeModules.statics && runtimeModules.statics.length > 0) {\n        const promises = runtimeModules.statics.map(m => runtime.loadModule(m));\n        if (promises.some(promise => promise && promise.then)) {\n            console.warn('Miniapp is not support async static runtime modules');\n        }\n    }\n    const { miniappManifest, miniappLifecycles = {} } = app;\n    injectMiniappLifecycles(miniappLifecycles);\n    // TODO: transform routes to pages in miniappManifest\n    createMiniApp(miniappManifest, miniappLifecycles);\n    const appData = await getAppData(app);\n    setHistory(miniappManifest.routes);\n    runtime.setAppContext({ ...appContext, appData });\n    if (runtimeModules.commons) {\n        await Promise.all(runtimeModules.commons.map(m => runtime.loadModule(m)).filter(Boolean));\n    }\n    render(runtime);\n    Current.appDataReady = true;\n    eventCenter.trigger(APP_DATA_READY);\n}\nasync function render(runtime) {\n    const appContext = runtime.getAppContext();\n    const render = runtime.getRender();\n    const AppRuntimeProvider = runtime.composeAppProvider() || React.Fragment;\n    render(document.getElementById('ice-container'), React.createElement(AppContextProvider, { value: appContext },\n        React.createElement(AppRuntimeProvider, null,\n            React.createElement(App, null))));\n}\n","export function withSuspense(cpt) {\n    return cpt;\n}\n// TODO: 小程序场景下仅为套壳函数，暂不支持 useSuspenseData\nexport function useSuspenseData(request) {\n    console.warn('miniapp-runtime does not support `useSuspenseData` api yet.');\n    return request;\n}\n","import { pageLifecycleHooks, pgeLifecycleArray } from './hooks.js';\nexport default function usePageLifecycle(lifecycle, callback) {\n    if (pgeLifecycleArray.includes(lifecycle)) {\n        return pageLifecycleHooks[lifecycle](callback);\n    }\n    return;\n}\n","import { Current } from '../current.js';\nexport default function useSearchParams() {\n    const searchParams = Current.router.params;\n    const setSearchParams = () => {\n        console.warn('setSearchParams is not implemented in miniapp');\n    };\n    return [\n        searchParams,\n        setSearchParams,\n    ];\n}\n","import { isFunction } from '@ice/shared';\nimport { Current } from '../current.js';\nexport const HOOKS_APP_ID = 'ice-miniapp';\nexport function isClassComponent(R, component) {\n    var _a;\n    const { prototype } = component;\n    // For React Redux\n    if ((_a = component.displayName) === null || _a === void 0 ? void 0 : _a.includes('Connect'))\n        return false;\n    return (isFunction(component.render) ||\n        !!(prototype === null || prototype === void 0 ? void 0 : prototype.isReactComponent) ||\n        prototype instanceof R.Component // compat for some others react-like library\n    );\n}\nexport function ensureIsArray(item) {\n    if (Array.isArray(item)) {\n        return item;\n    }\n    else {\n        return item ? [item] : [];\n    }\n}\n/**\n * set writable, enumerable to true\n */\nexport function setDefaultDescriptor(obj) {\n    obj.writable = true;\n    obj.enumerable = true;\n    return obj;\n}\n/**\n * 设置入口的路由参数\n * @param options 小程序传入的参数\n */\nexport function setRouterParams(options) {\n    Current.router = {\n        params: options === null || options === void 0 ? void 0 : options.query,\n        ...options,\n    };\n}\n","import { Document } from '../dom/document.js';\nimport { ICE_CONTAINER, BODY, HEAD, HTML, } from '../constants/index.js';\nimport env from '../env.js';\n/* eslint-disable no-inner-declarations */\nfunction createDocument() {\n    /**\n       * <document>\n       *   <html>\n       *     <head></head>\n       *     <body>\n       *       <ice-container id=\"app\" />\n       *     </body>\n       *   </html>\n       * </document>\n       */\n    const doc = new Document();\n    const documentCreateElement = doc.createElement.bind(doc);\n    const html = documentCreateElement(HTML);\n    const head = documentCreateElement(HEAD);\n    const body = documentCreateElement(BODY);\n    const iceContainer = documentCreateElement(ICE_CONTAINER);\n    iceContainer.id = ICE_CONTAINER;\n    doc.appendChild(html);\n    html.appendChild(head);\n    html.appendChild(body);\n    body.appendChild(iceContainer);\n    doc.documentElement = html;\n    doc.head = head;\n    doc.body = body;\n    return doc;\n}\nconst document = env.document = createDocument();\nexport { document, };\n","export function getComputedStyle(element) {\n    return element.style;\n}\n","const machine = 'Macintosh';\nconst arch = 'Intel Mac OS X 10_14_5';\nconst engine = 'AppleWebKit/534.36 (KHTML, like Gecko) NodeJS/v4.1.0 Chrome/76.0.3809.132 Safari/534.36';\nconst msg = `(${machine}; ${arch}) ${engine}`;\nexport const navigator = {\n    appCodeName: 'Mozilla',\n    appName: 'Netscape',\n    appVersion: `5.0 ${msg}`,\n    cookieEnabled: true,\n    mimeTypes: [],\n    onLine: true,\n    platform: 'MacIntel',\n    plugins: [],\n    product: 'ICE',\n    productSub: '20030107',\n    userAgent: `Mozilla/5.0 ${msg}`,\n    vendor: 'Joyent',\n    vendorSub: '',\n};\n","// https://github.com/myrne/performance-now\nexport let now;\n(function () {\n    let loadTime;\n    if ((typeof performance !== 'undefined' && performance !== null) && performance.now) {\n        now = () => performance.now();\n    }\n    else if (Date.now) {\n        loadTime = Date.now();\n        now = () => Date.now() - loadTime;\n    }\n    else {\n        loadTime = new Date().getTime();\n        now = () => new Date().getTime() - loadTime;\n    }\n})();\nlet lastTime = 0;\n// https://gist.github.com/paulirish/1579671\n// https://gist.github.com/jalbam/5fe05443270fa6d8136238ec72accbc0\nconst raf = function (callback) {\n    const _now = now();\n    // First time will execute it immediately but barely noticeable and performance is gained.\n    const nextTime = Math.max(lastTime + 16, _now);\n    return setTimeout(() => { callback(lastTime = nextTime); }, nextTime - _now);\n};\nconst caf = function (seed) {\n    // fix https://github.com/NervJS/taro/issues/7749\n    clearTimeout(seed);\n};\nexport { caf, raf, };\n","import { isString } from '@ice/shared';\nimport { Events } from '../emitter/emitter.js';\nimport env from '../env.js';\nimport { getComputedStyle } from './getComputedStyle.js';\nimport { navigator } from './navigator.js';\nimport { caf, raf } from './raf.js';\nclass Window extends Events {\n    constructor() {\n        super();\n        this.navigator = navigator;\n        this.requestAnimationFrame = raf;\n        this.cancelAnimationFrame = caf;\n        this.getComputedStyle = getComputedStyle;\n        const globalProperties = [\n            ...Object.getOwnPropertyNames(global || {}),\n            ...Object.getOwnPropertySymbols(global || {}),\n        ];\n        globalProperties.forEach(property => {\n            if (property === 'atob' || property === 'document')\n                return;\n            if (!Object.prototype.hasOwnProperty.call(this, property)) {\n                this[property] = global[property];\n            }\n        });\n        if (!this.Date) {\n            this.Date = Date;\n        }\n    }\n    get document() {\n        return env.document;\n    }\n    addEventListener(event, callback) {\n        if (!isString(event))\n            return;\n        this.on(event, callback, null);\n    }\n    removeEventListener(event, callback) {\n        if (!isString(event))\n            return;\n        this.off(event, callback, null);\n    }\n    setTimeout(...args) {\n        return setTimeout(...args);\n    }\n    clearTimeout(...args) {\n        return clearTimeout(...args);\n    }\n}\nconst window = env.window = new Window();\nexport { window, };\n","export const PROPERTY_THRESHOLD = 2046;\nexport const SET_DATA = '小程序 setData';\nexport const PAGE_INIT = '页面初始化';\nexport const ROOT_STR = 'root';\nexport const HTML = 'html';\nexport const HEAD = 'head';\nexport const BODY = 'body';\nexport const ICE_CONTAINER = 'ice-container';\nexport const DOCUMENT_ELEMENT_NAME = '#document';\nexport const DOCUMENT_FRAGMENT = 'document-fragment';\nexport const ID = 'id';\nexport const UID = 'uid';\nexport const CLASS = 'class';\nexport const STYLE = 'style';\nexport const FOCUS = 'focus';\nexport const VIEW = 'view';\nexport const STATIC_VIEW = 'static-view';\nexport const PURE_VIEW = 'pure-view';\nexport const PROPS = 'props';\nexport const DATASET = 'dataset';\nexport const OBJECT = 'object';\nexport const VALUE = 'value';\nexport const INPUT = 'input';\nexport const CHANGE = 'change';\nexport const CUSTOM_WRAPPER = 'custom-wrapper';\nexport const TARGET = 'target';\nexport const CURRENT_TARGET = 'currentTarget';\nexport const TYPE = 'type';\nexport const CONFIRM = 'confirm';\nexport const TIME_STAMP = 'timeStamp';\nexport const KEY_CODE = 'keyCode';\nexport const TOUCHMOVE = 'touchmove';\nexport const DATE = 'Date';\nexport const SET_TIMEOUT = 'setTimeout';\nexport const CATCHMOVE = 'catchMove';\nexport const CATCH_VIEW = 'catch-view';\nexport const COMMENT = 'comment';\nexport const ON_LOAD = 'onLoad';\nexport const ON_READY = 'onReady';\nexport const ON_SHOW = 'onShow';\nexport const ON_HIDE = 'onHide';\nexport const OPTIONS = 'options';\nexport const EXTERNAL_CLASSES = 'externalClasses';\nexport const BEHAVIORS = 'behaviors';\nexport const APP_DATA_READY = 'appReady';\n","export const Current = {\n    app: null,\n    router: null,\n    page: null,\n    appDataReady: false,\n};\nexport const getCurrentInstance = () => Current;\n","const observers = [];\n/**\n * The MutationObserver provides the ability\n * to watch for changes being made to the DOM tree.\n * It will invoke a specified callback function\n * when DOM changes occur.\n * @see https://dom.spec.whatwg.org/#mutationobserver\n * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\n */\nexport class MutationObserverImpl {\n    constructor(callback) {\n        this.records = [];\n        this.callback = callback;\n    }\n    /**\n     * Configures the MutationObserver\n     * to begin receiving notifications\n     * through its callback function\n     * when DOM changes matching the given options occur.\n     *\n     * Options matching is to be implemented.\n     */\n    observe(target, options) {\n        this.disconnect();\n        this.target = target;\n        this.options = options || {};\n        observers.push(this);\n    }\n    /**\n     * Stop the MutationObserver instance\n     * from receiving further notifications\n     * until and unless observe() is called again.\n     */\n    disconnect() {\n        this.target = null;\n        const index = observers.indexOf(this);\n        if (index >= 0) {\n            observers.splice(index, 1);\n        }\n    }\n    /**\n     * Removes all pending notifications\n     * from the MutationObserver's notification queue\n     * and returns them in a new Array of MutationRecord objects.\n     */\n    takeRecords() {\n        return this.records.splice(0, this.records.length);\n    }\n}\n/** Match two Nodes by sid. */\nconst sidMatches = (observerTarget, target) => {\n    return !!observerTarget && observerTarget.sid === (target === null || target === void 0 ? void 0 : target.sid);\n};\nconst isConcerned = (record, options) => {\n    const { characterData, characterDataOldValue, attributes, attributeOldValue, childList } = options;\n    switch (record.type) {\n        case \"characterData\" /* MutationRecordType.CHARACTER_DATA */:\n            if (characterData) {\n                if (!characterDataOldValue)\n                    record.oldValue = null;\n                return true;\n            }\n            return false;\n        case \"attributes\" /* MutationRecordType.ATTRIBUTES */:\n            if (attributes) {\n                if (!attributeOldValue)\n                    record.oldValue = null;\n                return true;\n            }\n            return false;\n        case \"childList\" /* MutationRecordType.CHILD_LIST */:\n            if (childList) {\n                return true;\n            }\n            return false;\n    }\n};\nlet pendingMuatations = false;\nfunction logMutation(observer, record) {\n    observer.records.push(record);\n    if (!pendingMuatations) {\n        pendingMuatations = true;\n        Promise\n            .resolve()\n            .then(() => {\n            pendingMuatations = false;\n            observers.forEach(observer => {\n                return observer.callback(observer.takeRecords());\n            });\n        });\n    }\n}\nexport function recordMutation(record) {\n    observers.forEach(observer => {\n        const { options } = observer;\n        for (let t = record.target; t; t = t.parentNode) {\n            if (sidMatches(observer.target, t) && isConcerned(record, options)) {\n                logMutation(observer, record);\n                break;\n            }\n            if (!options.subtree)\n                break;\n        }\n    });\n}\n","import { noop } from '@ice/shared';\nimport { recordMutation } from './implements.js';\nexport class MutationObserver {\n    constructor() {\n        this.core = {\n            observe: noop,\n            disconnect: noop,\n            takeRecords: noop,\n        };\n    }\n    observe(...args) {\n        this.core.observe(...args);\n    }\n    disconnect() {\n        this.core.disconnect();\n    }\n    takeRecords() {\n        return this.core.takeRecords();\n    }\n    static record(record) {\n        recordMutation(record);\n    }\n}\n","export class ClassList extends Set {\n    constructor(className, el) {\n        super();\n        className.trim().split(/\\s+/).forEach(super.add.bind(this));\n        this.el = el;\n    }\n    get value() {\n        return [...this].filter(v => v !== '').join(' ');\n    }\n    add(s) {\n        super.add(s);\n        this._update();\n        return this;\n    }\n    get length() {\n        return this.size;\n    }\n    remove(s) {\n        super.delete(s);\n        this._update();\n    }\n    toggle(s) {\n        if (super.has(s)) {\n            super.delete(s);\n        }\n        else {\n            super.add(s);\n        }\n        this._update();\n    }\n    replace(s1, s2) {\n        super.delete(s1);\n        super.add(s2);\n        this._update();\n    }\n    contains(s) {\n        return super.has(s);\n    }\n    toString() {\n        return this.value;\n    }\n    _update() {\n        this.el.className = this.value;\n    }\n}\n","import { controlledComponent, isUndefined } from '@ice/shared';\nimport { COMMENT, DOCUMENT_ELEMENT_NAME, ROOT_STR, } from '../constants/index.js';\nimport { Element } from '../dom/element.js';\nimport { createEvent } from '../dom/event.js';\nimport { eventSource } from '../dom/event-source.js';\nimport { FormElement } from '../dom/form.js';\nimport { RootElement } from '../dom/root.js';\nimport { Text } from '../dom/text.js';\nimport env from '../env.js';\nexport class Document extends Element {\n    constructor() {\n        super();\n        this.createEvent = createEvent;\n        this.nodeType = 9 /* NodeType.DOCUMENT_NODE */;\n        this.nodeName = DOCUMENT_ELEMENT_NAME;\n    }\n    createElement(type) {\n        if (type === ROOT_STR) {\n            return new RootElement();\n        }\n        const element = controlledComponent.has(type)\n            ? new FormElement()\n            : new Element();\n        element.nodeName = type;\n        element.tagName = type.toUpperCase();\n        return element;\n    }\n    // an ugly fake createElementNS to deal with @vue/runtime-dom's\n    // support mounting app to svg container since vue@3.0.8\n    createElementNS(_svgNS, type) {\n        return this.createElement(type);\n    }\n    createTextNode(text) {\n        return new Text(text);\n    }\n    getElementById(id) {\n        const el = eventSource.get(id);\n        return isUndefined(el) ? null : el;\n    }\n    querySelector(query) {\n        // 为了 Vue3 的乞丐版实现\n        if (/^#/.test(query)) {\n            return this.getElementById(query.slice(1));\n        }\n        return null;\n    }\n    querySelectorAll() {\n        // fake hack\n        return [];\n    }\n    // @TODO: @PERF: 在 hydrate 移除掉空的 node\n    createComment() {\n        const textnode = new Text('');\n        textnode.nodeName = COMMENT;\n        return textnode;\n    }\n    get defaultView() {\n        return env.window;\n    }\n}\n","import { EMPTY_OBJ, hooks, isArray, isFunction, isObject, isString, isUndefined, Shortcuts, toCamelCase, warn } from '@ice/shared';\nimport { CATCH_VIEW, CATCHMOVE, CLASS, FOCUS, ID, PROPERTY_THRESHOLD, PURE_VIEW, STATIC_VIEW, STYLE, VIEW, } from '../constants/index.js';\nimport { MutationObserver } from '../dom-external/mutation-observer/index.js';\nimport { extend, getComponentsAlias, isElement, isHasExtractProp, shortcutAttr } from '../utils/index.js';\nimport { ClassList } from './class-list.js';\nimport { eventSource } from './event-source.js';\nimport { Node } from './node.js';\nimport { Style } from './style.js';\nimport { treeToArray } from './tree.js';\nexport class Element extends Node {\n    constructor() {\n        super();\n        this.props = {};\n        this.dataset = EMPTY_OBJ;\n        this.nodeType = 1 /* NodeType.ELEMENT_NODE */;\n        this.style = new Style(this);\n        hooks.call('patchElement', this);\n    }\n    _stopPropagation(event) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        let target = this;\n        // eslint-disable-next-line no-cond-assign\n        while ((target = target.parentNode)) {\n            const listeners = target.__handlers[event.type];\n            if (!isArray(listeners)) {\n                continue;\n            }\n            for (let i = listeners.length; i--;) {\n                const l = listeners[i];\n                l._stop = true;\n            }\n        }\n    }\n    get id() {\n        return this.getAttribute(ID);\n    }\n    set id(val) {\n        this.setAttribute(ID, val);\n    }\n    get className() {\n        return this.getAttribute(CLASS) || '';\n    }\n    set className(val) {\n        this.setAttribute(CLASS, val);\n    }\n    get cssText() {\n        return this.getAttribute(STYLE) || '';\n    }\n    get classList() {\n        return new ClassList(this.className, this);\n    }\n    get children() {\n        return this.childNodes.filter(isElement);\n    }\n    get attributes() {\n        const { props } = this;\n        const propKeys = Object.keys(props);\n        const style = this.style.cssText;\n        const attrs = propKeys.map(key => ({ name: key, value: props[key] }));\n        return attrs.concat(style ? { name: STYLE, value: style } : []);\n    }\n    get textContent() {\n        let text = '';\n        const { childNodes } = this;\n        for (let i = 0; i < childNodes.length; i++) {\n            text += childNodes[i].textContent;\n        }\n        return text;\n    }\n    set textContent(text) {\n        super.textContent = text;\n    }\n    hasAttribute(qualifiedName) {\n        return !isUndefined(this.props[qualifiedName]);\n    }\n    hasAttributes() {\n        return this.attributes.length > 0;\n    }\n    get focus() {\n        return function () {\n            this.setAttribute(FOCUS, true);\n        };\n    }\n    // 兼容 Vue3，详情请见：https://github.com/NervJS/taro/issues/10579\n    set focus(value) {\n        this.setAttribute(FOCUS, value);\n    }\n    blur() {\n        this.setAttribute(FOCUS, false);\n    }\n    setAttribute(qualifiedName, value) {\n        process.env.NODE_ENV !== 'production' && warn(isString(value) && value.length > PROPERTY_THRESHOLD, `元素 ${this.nodeName} 的 ${qualifiedName} 属性值数据量过大，可能会影响渲染性能。考虑在 CSS 中使用 base64。`);\n        const isPureView = this.nodeName === VIEW && !isHasExtractProp(this) && !this.isAnyEventBinded();\n        if (qualifiedName !== STYLE) {\n            MutationObserver.record({\n                target: this,\n                type: \"attributes\" /* MutationRecordType.ATTRIBUTES */,\n                attributeName: qualifiedName,\n                oldValue: this.getAttribute(qualifiedName),\n            });\n        }\n        switch (qualifiedName) {\n            case STYLE:\n                this.style.cssText = value;\n                break;\n            case ID:\n                if (this.uid !== this.sid) {\n                    // eventSource[sid] 永远保留，直到组件卸载\n                    // eventSource[uid] 可变\n                    eventSource.delete(this.uid);\n                }\n                value = String(value);\n                this.props[qualifiedName] = this.uid = value;\n                eventSource.set(value, this);\n                break;\n            default:\n                this.props[qualifiedName] = value;\n                if (qualifiedName.startsWith('data-')) {\n                    if (this.dataset === EMPTY_OBJ) {\n                        this.dataset = Object.create(null);\n                    }\n                    this.dataset[toCamelCase(qualifiedName.replace(/^data-/, ''))] = value;\n                }\n                break;\n        }\n        // Serialization\n        if (!this._root)\n            return;\n        const componentsAlias = getComponentsAlias();\n        const _alias = componentsAlias[this.nodeName];\n        const viewAlias = componentsAlias[VIEW]._num;\n        const staticViewAlias = componentsAlias[STATIC_VIEW]._num;\n        const catchViewAlias = componentsAlias[CATCH_VIEW]._num;\n        const { _path } = this;\n        qualifiedName = shortcutAttr(qualifiedName);\n        const payload = {\n            path: `${_path}.${toCamelCase(qualifiedName)}`,\n            value: isFunction(value) ? () => value : value,\n        };\n        hooks.call('modifySetAttrPayload', this, qualifiedName, payload, componentsAlias);\n        if (_alias) {\n            const qualifiedNameAlias = _alias[qualifiedName] || qualifiedName;\n            payload.path = `${_path}.${toCamelCase(qualifiedNameAlias)}`;\n        }\n        this.enqueueUpdate(payload);\n        if (this.nodeName === VIEW) {\n            if (toCamelCase(qualifiedName) === CATCHMOVE) {\n                // catchMove = true: catch-view\n                // catchMove = false: view or static-view\n                this.enqueueUpdate({\n                    path: `${_path}.${Shortcuts.NodeName}`,\n                    value: value ? catchViewAlias : (this.isAnyEventBinded() ? viewAlias : staticViewAlias),\n                });\n            }\n            else if (isPureView && isHasExtractProp(this)) {\n                // pure-view => static-view\n                this.enqueueUpdate({\n                    path: `${_path}.${Shortcuts.NodeName}`,\n                    value: staticViewAlias,\n                });\n            }\n        }\n    }\n    removeAttribute(qualifiedName) {\n        const isStaticView = this.nodeName === VIEW && isHasExtractProp(this) && !this.isAnyEventBinded();\n        MutationObserver.record({\n            target: this,\n            type: \"attributes\" /* MutationRecordType.ATTRIBUTES */,\n            attributeName: qualifiedName,\n            oldValue: this.getAttribute(qualifiedName),\n        });\n        if (qualifiedName === STYLE) {\n            this.style.cssText = '';\n        }\n        else {\n            const isInterrupt = hooks.call('onRemoveAttribute', this, qualifiedName);\n            if (isInterrupt) {\n                return;\n            }\n            if (!Object.prototype.hasOwnProperty.call(this.props, qualifiedName)) {\n                return;\n            }\n            delete this.props[qualifiedName];\n        }\n        // Serialization\n        if (!this._root)\n            return;\n        const componentsAlias = getComponentsAlias();\n        const _alias = componentsAlias[this.nodeName];\n        const viewAlias = componentsAlias[VIEW]._num;\n        const staticViewAlias = componentsAlias[STATIC_VIEW]._num;\n        const pureViewAlias = componentsAlias[PURE_VIEW]._num;\n        const { _path } = this;\n        qualifiedName = shortcutAttr(qualifiedName);\n        const payload = {\n            path: `${_path}.${toCamelCase(qualifiedName)}`,\n            value: '',\n        };\n        hooks.call('modifyRmAttrPayload', this, qualifiedName, payload, componentsAlias);\n        if (_alias) {\n            const qualifiedNameAlias = _alias[qualifiedName] || qualifiedName;\n            payload.path = `${_path}.${toCamelCase(qualifiedNameAlias)}`;\n        }\n        this.enqueueUpdate(payload);\n        if (this.nodeName === VIEW) {\n            if (toCamelCase(qualifiedName) === CATCHMOVE) {\n                // catch-view => view or static-view or pure-view\n                this.enqueueUpdate({\n                    path: `${_path}.${Shortcuts.NodeName}`,\n                    value: this.isAnyEventBinded() ? viewAlias : (isHasExtractProp(this) ? staticViewAlias : pureViewAlias),\n                });\n            }\n            else if (isStaticView && !isHasExtractProp(this)) {\n                // static-view => pure-view\n                this.enqueueUpdate({\n                    path: `${_path}.${Shortcuts.NodeName}`,\n                    value: pureViewAlias,\n                });\n            }\n        }\n    }\n    getAttribute(qualifiedName) {\n        const attr = qualifiedName === STYLE ? this.style.cssText : this.props[qualifiedName];\n        return attr !== null && attr !== void 0 ? attr : '';\n    }\n    getElementsByTagName(tagName) {\n        return treeToArray(this, (el) => {\n            return el.nodeName === tagName || (tagName === '*' && this !== el);\n        });\n    }\n    getElementsByClassName(className) {\n        return treeToArray(this, (el) => {\n            const { classList } = el;\n            const classNames = className.trim().split(/\\s+/);\n            return classNames.every(c => classList.has(c));\n        });\n    }\n    dispatchEvent(event) {\n        const { cancelable } = event;\n        const listeners = this.__handlers[event.type];\n        if (!isArray(listeners)) {\n            return false;\n        }\n        for (let i = listeners.length; i--;) {\n            const listener = listeners[i];\n            let result;\n            if (listener._stop) {\n                listener._stop = false;\n            }\n            else {\n                hooks.call('modifyDispatchEvent', event, this);\n                result = listener.call(this, event);\n            }\n            if ((result === false || event._end) && cancelable) {\n                event.defaultPrevented = true;\n            }\n            if (event._end && event._stop) {\n                break;\n            }\n        }\n        if (event._stop) {\n            this._stopPropagation(event);\n        }\n        else {\n            event._stop = true;\n        }\n        return listeners != null;\n    }\n    addEventListener(type, handler, options) {\n        const name = this.nodeName;\n        const SPECIAL_NODES = hooks.call('getSpecialNodes');\n        let sideEffect = true;\n        if (isObject(options) && options.sideEffect === false) {\n            sideEffect = false;\n            delete options.sideEffect;\n        }\n        if (sideEffect !== false && !this.isAnyEventBinded() && SPECIAL_NODES.indexOf(name) > -1) {\n            const componentsAlias = getComponentsAlias();\n            const alias = componentsAlias[name]._num;\n            this.enqueueUpdate({\n                path: `${this._path}.${Shortcuts.NodeName}`,\n                value: alias,\n            });\n        }\n        super.addEventListener(type, handler, options);\n    }\n    removeEventListener(type, handler, sideEffect = true) {\n        super.removeEventListener(type, handler);\n        const name = this.nodeName;\n        const SPECIAL_NODES = hooks.call('getSpecialNodes');\n        if (sideEffect !== false && !this.isAnyEventBinded() && SPECIAL_NODES.indexOf(name) > -1) {\n            const componentsAlias = getComponentsAlias();\n            const value = isHasExtractProp(this) ? `static-${name}` : `pure-${name}`;\n            const valueAlias = componentsAlias[value]._num;\n            this.enqueueUpdate({\n                path: `${this._path}.${Shortcuts.NodeName}`,\n                value: valueAlias,\n            });\n        }\n    }\n    static extend(methodName, options) {\n        extend(Element, methodName, options);\n    }\n}\n","class EventSource extends Map {\n    static create() {\n        const inst = new Map();\n        inst['__proto__'] = EventSource.prototype;\n        return inst;\n    }\n    removeNode(child) {\n        const { sid, uid } = child;\n        this.delete(sid);\n        if (uid !== sid && uid)\n            this.delete(uid);\n    }\n    removeNodeTree(child) {\n        this.removeNode(child);\n        const { childNodes } = child;\n        childNodes.forEach(node => this.removeNodeTree(node));\n    }\n}\nexport const eventSource = EventSource.create();\n","import { hooks, isArray, isObject, warn } from '@ice/shared';\nexport class EventTarget {\n    constructor() {\n        this.__handlers = {};\n    }\n    addEventListener(type, handler, options) {\n        type = type.toLowerCase();\n        hooks.call('onAddEvent', type, handler, options, this);\n        if (type === 'regionchange') {\n            // map 组件的 regionchange 事件非常特殊，详情：https://github.com/NervJS/taro/issues/5766\n            this.addEventListener('begin', handler, options);\n            this.addEventListener('end', handler, options);\n            return;\n        }\n        let isCapture = Boolean(options);\n        let isOnce = false;\n        if (isObject(options)) {\n            isCapture = Boolean(options.capture);\n            isOnce = Boolean(options.once);\n        }\n        if (isOnce) {\n            const wrapper = function (...args) {\n                handler.apply(this, args); // this 指向 Element\n                this.removeEventListener(type, wrapper);\n            };\n            this.addEventListener(type, wrapper, {\n                ...options,\n                once: false,\n            });\n            return;\n        }\n        process.env.NODE_ENV !== 'production' && warn(isCapture, 'ICE Miniapp 暂未实现 event 的 capture 特性。');\n        // 某些框架，如 PReact 有委托的机制，handler 始终是同一个函数\n        // 这会导致多层停止冒泡失败：view -> view(handler.stop = false) -> view(handler.stop = true)\n        // 这样解决：view -> view(handlerA.stop = false) -> view(handlerB.stop = false)\n        // 因此每次绑定事件都新建一个函数，如果带来了性能问题，可以把这段逻辑抽取到 PReact 插件中。\n        const oldHandler = handler;\n        handler = function (...args) {\n            oldHandler.apply(this, args); // this 指向 Element\n        };\n        handler.oldHandler = oldHandler;\n        const handlers = this.__handlers[type];\n        if (isArray(handlers)) {\n            handlers.push(handler);\n        }\n        else {\n            this.__handlers[type] = [handler];\n        }\n    }\n    removeEventListener(type, handler) {\n        type = type.toLowerCase();\n        if (type === 'regionchange') {\n            // map 组件的 regionchange 事件非常特殊，详情：https://github.com/NervJS/taro/issues/5766\n            this.removeEventListener('begin', handler);\n            this.removeEventListener('end', handler);\n            return;\n        }\n        if (!handler) {\n            return;\n        }\n        const handlers = this.__handlers[type];\n        if (!isArray(handlers)) {\n            return;\n        }\n        const index = handlers.findIndex(item => {\n            if (item === handler || item.oldHandler === handler) {\n                return true;\n            }\n            return;\n        });\n        process.env.NODE_ENV !== 'production' && warn(index === -1, `事件: '${type}' 没有注册在 DOM 中，因此不会被移除。`);\n        handlers.splice(index, 1);\n    }\n    isAnyEventBinded() {\n        const handlers = this.__handlers;\n        const isAnyEventBinded = Object.keys(handlers).find(key => handlers[key].length);\n        return Boolean(isAnyEventBinded);\n    }\n    triggerEventListenerInternal(type, args) {\n        type = type.toLowerCase();\n        const handlers = this.__handlers[type];\n        if (!isArray(handlers)) {\n            return;\n        }\n        for (const handler of handlers) {\n            handler(...args);\n        }\n    }\n    getListenerNames() {\n        const handlers = this.__handlers;\n        return Object.keys(handlers).filter(key => handlers[key].length);\n    }\n}\n","import { EMPTY_OBJ, hooks } from '@ice/shared';\nimport { CONFIRM, CURRENT_TARGET, INPUT, KEY_CODE, TARGET, TIME_STAMP, TOUCHMOVE, TYPE, } from '../constants/index.js';\nimport env from '../env.js';\nimport { isParentBinded } from '../utils/index.js';\n// 事件对象。以 Web 标准的事件对象为基础，加入小程序事件对象中携带的部分信息，并模拟实现事件冒泡。\nexport class Event {\n    constructor(type, opts, event) {\n        this._stop = false;\n        this._end = false;\n        this.defaultPrevented = false;\n        // timestamp can either be hi-res ( relative to page load) or low-res (relative to UNIX epoch)\n        // here use hi-res timestamp\n        this.timeStamp = Date.now();\n        this.type = type.toLowerCase();\n        this.mpEvent = event;\n        this.bubbles = Boolean(opts && opts.bubbles);\n        this.cancelable = Boolean(opts && opts.cancelable);\n    }\n    stopPropagation() {\n        this._stop = true;\n    }\n    stopImmediatePropagation() {\n        this._end = this._stop = true;\n    }\n    preventDefault() {\n        this.defaultPrevented = true;\n    }\n    get target() {\n        var _a, _b;\n        const { cacheTarget } = this;\n        if (cacheTarget) {\n            return cacheTarget;\n        }\n        else {\n            const target = Object.create(((_a = this.mpEvent) === null || _a === void 0 ? void 0 : _a.target) || null);\n            const element = env.document.getElementById(target.id);\n            target.dataset = element === null ? EMPTY_OBJ : element.dataset;\n            for (const key in (_b = this.mpEvent) === null || _b === void 0 ? void 0 : _b.detail) {\n                target[key] = this.mpEvent.detail[key];\n            }\n            this.cacheTarget = target;\n            return target;\n        }\n    }\n    get currentTarget() {\n        var _a, _b, _c, _d;\n        const { cacheCurrentTarget } = this;\n        if (cacheCurrentTarget) {\n            return cacheCurrentTarget;\n        }\n        else {\n            const doc = env.document;\n            const currentTarget = Object.create(((_a = this.mpEvent) === null || _a === void 0 ? void 0 : _a.currentTarget) || null);\n            const element = doc.getElementById(currentTarget.id);\n            const targetElement = doc.getElementById(((_c = (_b = this.mpEvent) === null || _b === void 0 ? void 0 : _b.target) === null || _c === void 0 ? void 0 : _c.id) || null);\n            if (element === null || (element && element === targetElement)) {\n                this.cacheCurrentTarget = this.target;\n                return this.target;\n            }\n            currentTarget.dataset = element.dataset;\n            for (const key in (_d = this.mpEvent) === null || _d === void 0 ? void 0 : _d.detail) {\n                currentTarget[key] = this.mpEvent.detail[key];\n            }\n            this.cacheCurrentTarget = currentTarget;\n            return currentTarget;\n        }\n    }\n}\nexport function createEvent(event, node) {\n    if (typeof event === 'string') {\n        // For Vue3 using document.createEvent\n        return new Event(event, { bubbles: true, cancelable: true });\n    }\n    const domEv = new Event(event.type, { bubbles: true, cancelable: true }, event);\n    for (const key in event) {\n        if (key === CURRENT_TARGET || key === TARGET || key === TYPE || key === TIME_STAMP) {\n            continue;\n        }\n        else {\n            domEv[key] = event[key];\n        }\n    }\n    if (domEv.type === CONFIRM && (node === null || node === void 0 ? void 0 : node.nodeName) === INPUT) {\n        // eslint-disable-next-line dot-notation\n        domEv[KEY_CODE] = 13;\n    }\n    return domEv;\n}\nconst eventsBatch = {};\n// 小程序的事件代理回调函数\nexport function eventHandler(event) {\n    var _a;\n    hooks.call('modifyMpEventImpl', event);\n    if (!event.currentTarget) {\n        event.currentTarget = event.target;\n    }\n    const { currentTarget } = event;\n    const id = ((_a = currentTarget.dataset) === null || _a === void 0 ? void 0 : _a.sid /** sid */) || currentTarget.id /** uid */ || '';\n    const node = env.document.getElementById(id);\n    if (node) {\n        const dispatch = () => {\n            const e = createEvent(event, node);\n            hooks.call('modifyIceEvent', e, node);\n            node.dispatchEvent(e);\n        };\n        if (hooks.isExist('batchedEventUpdates')) {\n            const { type } = event;\n            if (!hooks.call('isBubbleEvents', type) ||\n                !isParentBinded(node, type) ||\n                (type === TOUCHMOVE && !!node.props.catchMove)) {\n                // 最上层组件统一 batchUpdate\n                hooks.call('batchedEventUpdates', () => {\n                    if (eventsBatch[type]) {\n                        eventsBatch[type].forEach(fn => fn());\n                        delete eventsBatch[type];\n                    }\n                    dispatch();\n                });\n            }\n            else {\n                // 如果上层组件也有绑定同类型的组件，委托给上层组件调用事件回调\n                if (!eventsBatch[type]) {\n                    eventsBatch[type] = [];\n                }\n                eventsBatch[type].push(dispatch);\n            }\n        }\n        else {\n            dispatch();\n        }\n    }\n}\nexport function createEventHandlerForThirdComponent(sid, eventName) {\n    return (...args) => {\n        const node = env.document.getElementById(sid);\n        if (node) {\n            node.triggerEventListenerInternal(eventName, args);\n        }\n    };\n}\nexport function bindEventHandlersForThirdComponentNode(node) {\n    var _a;\n    const instance = (_a = node._root) === null || _a === void 0 ? void 0 : _a.ctx;\n    if (!instance) {\n        return;\n    }\n    const eventNames = node.getListenerNames();\n    for (const eventName of eventNames) {\n        instance[`eh_${node.sid}_${eventName}`] = createEventHandlerForThirdComponent(node.sid, eventName);\n    }\n}\n","import { CHANGE, INPUT, VALUE, } from '../constants/index.js';\nimport { Element } from './element.js';\nexport class FormElement extends Element {\n    get value() {\n        // eslint-disable-next-line dot-notation\n        const val = this.props[VALUE];\n        return val == null ? '' : val;\n    }\n    set value(val) {\n        this.setAttribute(VALUE, val);\n    }\n    dispatchEvent(event) {\n        if (event.mpEvent) {\n            const val = event.mpEvent.detail.value;\n            if (event.type === CHANGE) {\n                this.props.value = val;\n            }\n            else if (event.type === INPUT) {\n                // Web 规范中表单组件的 value 应该跟着输入改变\n                // 只是改 this.props.value 的话不会进行 setData，因此这里修改 this.value。\n                // 只测试了 React、Vue、Vue3 input 组件的 onInput 事件，onChange 事件不确定有没有副作用，所以暂不修改。\n                this.value = val;\n            }\n        }\n        return super.dispatchEvent(event);\n    }\n}\n","import { ensure, hooks, Shortcuts } from '@ice/shared';\nimport { DOCUMENT_FRAGMENT } from '../constants/index.js';\nimport { MutationObserver } from '../dom-external/mutation-observer/index.js';\nimport env from '../env.js';\nimport { hydrate } from '../hydrate.js';\nimport { extend, incrementId, isComment } from '../utils/index.js';\nimport { eventSource } from './event-source.js';\nimport { EventTarget } from './event-target.js';\nconst CHILDNODES = Shortcuts.Childnodes;\nconst nodeId = incrementId();\nexport class Node extends EventTarget {\n    constructor() {\n        super();\n        this.parentNode = null;\n        this.childNodes = [];\n        this.hydrate = (node) => () => hydrate(node);\n        this.uid = `_${nodeId()}`; // dom 节点 id，开发者可修改\n        this.sid = this.uid; // dom 节点全局唯一 id，不可被修改\n        eventSource.set(this.sid, this);\n    }\n    updateChildNodes(isClean) {\n        const cleanChildNodes = () => [];\n        const rerenderChildNodes = () => {\n            const childNodes = this.childNodes.filter(node => !isComment(node));\n            return childNodes.map(hydrate);\n        };\n        this.enqueueUpdate({\n            path: `${this._path}.${CHILDNODES}`,\n            value: isClean ? cleanChildNodes : rerenderChildNodes,\n        });\n    }\n    get _root() {\n        var _a;\n        return ((_a = this.parentNode) === null || _a === void 0 ? void 0 : _a._root) || null;\n    }\n    findIndex(refChild) {\n        const index = this.childNodes.indexOf(refChild);\n        ensure(index !== -1, 'The node to be replaced is not a child of this node.');\n        return index;\n    }\n    get _path() {\n        const { parentNode } = this;\n        if (parentNode) {\n            // 计算路径时，先过滤掉 comment 节点\n            const list = parentNode.childNodes.filter(node => !isComment(node));\n            const indexOfNode = list.indexOf(this);\n            const index = hooks.call('getPathIndex', indexOfNode);\n            return `${parentNode._path}.${CHILDNODES}.${index}`;\n        }\n        return '';\n    }\n    get nextSibling() {\n        const { parentNode } = this;\n        return (parentNode === null || parentNode === void 0 ? void 0 : parentNode.childNodes[parentNode.findIndex(this) + 1]) || null;\n    }\n    get previousSibling() {\n        const { parentNode } = this;\n        return (parentNode === null || parentNode === void 0 ? void 0 : parentNode.childNodes[parentNode.findIndex(this) - 1]) || null;\n    }\n    get parentElement() {\n        const { parentNode } = this;\n        if ((parentNode === null || parentNode === void 0 ? void 0 : parentNode.nodeType) === 1 /* NodeType.ELEMENT_NODE */) {\n            return parentNode;\n        }\n        return null;\n    }\n    get firstChild() {\n        return this.childNodes[0] || null;\n    }\n    get lastChild() {\n        const { childNodes } = this;\n        return childNodes[childNodes.length - 1] || null;\n    }\n    /**\n     * @textContent 目前只能置空子元素\n     * @TODO 等待完整 innerHTML 实现\n     */\n    // eslint-disable-next-line accessor-pairs\n    set textContent(text) {\n        const removedNodes = this.childNodes.slice();\n        const addedNodes = [];\n        // Handle old children' data structure & ref\n        while (this.firstChild) {\n            this.removeChild(this.firstChild, { doUpdate: false });\n        }\n        if (text === '') {\n            this.updateChildNodes(true);\n        }\n        else {\n            const newText = env.document.createTextNode(text);\n            addedNodes.push(newText);\n            this.appendChild(newText);\n            this.updateChildNodes();\n        }\n        // @Todo: appendChild 会多触发一次\n        MutationObserver.record({\n            type: \"childList\" /* MutationRecordType.CHILD_LIST */,\n            target: this,\n            removedNodes,\n            addedNodes,\n        });\n    }\n    /**\n     * @doc https://developer.mozilla.org/zh-CN/docs/Web/API/Node/insertBefore\n     * @scenario\n     * [A,B,C]\n     *   1. insert D before C, D has no parent\n     *   2. insert D before C, D has the same parent of C\n     *   3. insert D before C, D has the different parent of C\n     */\n    insertBefore(newChild, refChild, isReplace) {\n        if (newChild.nodeName === DOCUMENT_FRAGMENT) {\n            newChild.childNodes.reduceRight((previousValue, currentValue) => {\n                this.insertBefore(currentValue, previousValue);\n                return currentValue;\n            }, refChild);\n            return newChild;\n        }\n        // Parent release newChild\n        //   - cleanRef: false (No need to clean eventSource, because newChild is about to be inserted)\n        //   - update: true (Need to update parent.childNodes, because parent.childNodes is reordered)\n        newChild.remove({ cleanRef: false });\n        // Data structure\n        newChild.parentNode = this;\n        if (refChild) {\n            // insertBefore & replaceChild\n            const index = this.findIndex(refChild);\n            this.childNodes.splice(index, 0, newChild);\n        }\n        else {\n            // appendChild\n            this.childNodes.push(newChild);\n        }\n        // Serialization\n        if (this._root) {\n            if (!refChild) {\n                // appendChild\n                const isOnlyChild = this.childNodes.length === 1;\n                if (isOnlyChild) {\n                    this.updateChildNodes();\n                }\n                else {\n                    this.enqueueUpdate({\n                        path: newChild._path,\n                        value: this.hydrate(newChild),\n                    });\n                }\n            }\n            else if (isReplace) {\n                // replaceChild\n                this.enqueueUpdate({\n                    path: newChild._path,\n                    value: this.hydrate(newChild),\n                });\n            }\n            else {\n                // insertBefore\n                this.updateChildNodes();\n            }\n        }\n        MutationObserver.record({\n            type: \"childList\" /* MutationRecordType.CHILD_LIST */,\n            target: this,\n            addedNodes: [newChild],\n            removedNodes: isReplace\n                ? [refChild] /** replaceChild */\n                : [],\n            nextSibling: isReplace\n                ? refChild.nextSibling /** replaceChild */\n                : (refChild || null),\n            previousSibling: newChild.previousSibling,\n        });\n        return newChild;\n    }\n    /**\n     * @doc https://developer.mozilla.org/zh-CN/docs/Web/API/Node/appendChild\n     * @scenario\n     * [A,B,C]\n     *   1. append C, C has no parent\n     *   2. append C, C has the same parent of B\n     *   3. append C, C has the different parent of B\n     */\n    appendChild(newChild) {\n        return this.insertBefore(newChild);\n    }\n    /**\n     * @doc https://developer.mozilla.org/zh-CN/docs/Web/API/Node/replaceChild\n     * @scenario\n     * [A,B,C]\n     *   1. replace B with C, C has no parent\n     *   2. replace B with C, C has no parent, C has the same parent of B\n     *   3. replace B with C, C has no parent, C has the different parent of B\n     */\n    replaceChild(newChild, oldChild) {\n        if (oldChild.parentNode !== this)\n            return;\n        // Insert the newChild\n        this.insertBefore(newChild, oldChild, true);\n        // Destroy the oldChild\n        // - cleanRef: true (Need to clean eventSource, because the oldChild was detached from the DOM tree)\n        // - update: false (No need to update parent.childNodes,\n        // because replace will not cause the parent.childNodes being reordered)\n        oldChild.remove({ doUpdate: false });\n        return oldChild;\n    }\n    /**\n     * @doc https://developer.mozilla.org/zh-CN/docs/Web/API/Node/removeChild\n     * @scenario\n     * [A,B,C]\n     *   1. remove A or B\n     *   2. remove C\n     */\n    removeChild(child, options = {}) {\n        const { cleanRef, doUpdate } = options;\n        if (cleanRef !== false && doUpdate !== false) {\n            // appendChild/replaceChild/insertBefore 不应该触发\n            // @Todo: 但其实如果 newChild 的父节点是另一颗子树的节点，应该是要触发的\n            MutationObserver.record({\n                type: \"childList\" /* MutationRecordType.CHILD_LIST */,\n                target: this,\n                removedNodes: [child],\n                nextSibling: child.nextSibling,\n                previousSibling: child.previousSibling,\n            });\n        }\n        // Data Structure\n        const index = this.findIndex(child);\n        this.childNodes.splice(index, 1);\n        child.parentNode = null;\n        // Set eventSource\n        if (cleanRef !== false) {\n            eventSource.removeNodeTree(child);\n        }\n        // Serialization\n        if (this._root && doUpdate !== false) {\n            this.updateChildNodes();\n        }\n        return child;\n    }\n    remove(options) {\n        var _a;\n        (_a = this.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(this, options);\n    }\n    hasChildNodes() {\n        return this.childNodes.length > 0;\n    }\n    enqueueUpdate(payload) {\n        var _a;\n        (_a = this._root) === null || _a === void 0 ? void 0 : _a.enqueueUpdate(payload);\n    }\n    get ownerDocument() {\n        return env.document;\n    }\n    static extend(methodName, options) {\n        extend(Node, methodName, options);\n    }\n}\n","import { hooks, isFunction, isUndefined, Shortcuts } from '@ice/shared';\nimport { CUSTOM_WRAPPER, PAGE_INIT, ROOT_STR, SET_DATA, } from '../constants/index.js';\nimport { options } from '../options.js';\nimport { perf } from '../perf.js';\nimport { customWrapperCache } from '../utils/index.js';\nimport { Element } from './element.js';\nfunction findCustomWrapper(root, dataPathArr) {\n    // ['root', 'cn', '[0]'] remove 'root' => ['cn', '[0]']\n    const list = dataPathArr.slice(1);\n    let currentData = root;\n    let customWrapper;\n    let splitedPath = '';\n    list.some((item, i) => {\n        const key = item\n            // '[0]' => '0'\n            .replace(/^\\[(.+)\\]$/, '$1')\n            // 'cn' => 'childNodes'\n            .replace(/\\bcn\\b/g, 'childNodes');\n        currentData = currentData[key];\n        if (isUndefined(currentData))\n            return true;\n        if (currentData.nodeName === CUSTOM_WRAPPER) {\n            const res = customWrapperCache.get(currentData.sid);\n            if (res) {\n                customWrapper = res;\n                splitedPath = dataPathArr.slice(i + 2).join('.');\n            }\n        }\n        return;\n    });\n    if (customWrapper) {\n        return {\n            customWrapper,\n            splitedPath,\n        };\n    }\n}\nexport class RootElement extends Element {\n    constructor() {\n        super();\n        this.updatePayloads = [];\n        this.updateCallbacks = [];\n        this.pendingUpdate = false;\n        this.ctx = null;\n        this.nodeName = ROOT_STR;\n        this.tagName = ROOT_STR.toUpperCase();\n    }\n    get _path() {\n        return ROOT_STR;\n    }\n    get _root() {\n        return this;\n    }\n    enqueueUpdate(payload) {\n        this.updatePayloads.push(payload);\n        if (!this.pendingUpdate && this.ctx) {\n            this.performUpdate();\n        }\n    }\n    performUpdate(initRender = false, prerender) {\n        this.pendingUpdate = true;\n        const ctx = this.ctx;\n        setTimeout(() => {\n            perf.start(SET_DATA);\n            const data = Object.create(null);\n            const resetPaths = new Set(initRender\n                ? ['root.cn.[0]', 'root.cn[0]']\n                : []);\n            while (this.updatePayloads.length > 0) {\n                const { path, value } = this.updatePayloads.shift();\n                if (path.endsWith(Shortcuts.Childnodes)) {\n                    resetPaths.add(path);\n                }\n                data[path] = value;\n            }\n            for (const path in data) {\n                resetPaths.forEach(p => {\n                    // 已经重置了数组，就不需要分别再设置了\n                    if (path.includes(p) && path !== p) {\n                        delete data[path];\n                    }\n                });\n                const value = data[path];\n                if (isFunction(value)) {\n                    data[path] = value();\n                }\n            }\n            // 预渲染\n            if (isFunction(prerender))\n                return prerender(data);\n            // 正常渲染\n            this.pendingUpdate = false;\n            let normalUpdate = {};\n            const customWrapperMap = new Map();\n            if (initRender) {\n                // 初次渲染，使用页面级别的 setData\n                normalUpdate = data;\n            }\n            else {\n                // 更新渲染，区分 CustomWrapper 与页面级别的 setData\n                for (const p in data) {\n                    const dataPathArr = p.split('.');\n                    const found = findCustomWrapper(this, dataPathArr);\n                    if (found) {\n                        // 此项数据使用 CustomWrapper 去更新\n                        const { customWrapper, splitedPath } = found;\n                        // 合并同一个 customWrapper 的相关更新到一次 setData 中\n                        customWrapperMap.set(customWrapper, {\n                            ...(customWrapperMap.get(customWrapper) || {}),\n                            [`i.${splitedPath}`]: data[p],\n                        });\n                    }\n                    else {\n                        // 此项数据使用页面去更新\n                        normalUpdate[p] = data[p];\n                    }\n                }\n            }\n            const customWrpperCount = customWrapperMap.size;\n            const isNeedNormalUpdate = Object.keys(normalUpdate).length > 0;\n            const updateArrLen = customWrpperCount + (isNeedNormalUpdate ? 1 : 0);\n            let executeTime = 0;\n            const cb = () => {\n                if (++executeTime === updateArrLen) {\n                    perf.stop(SET_DATA);\n                    this.flushUpdateCallback();\n                    initRender && perf.stop(PAGE_INIT);\n                }\n            };\n            // custom-wrapper setData\n            if (customWrpperCount) {\n                customWrapperMap.forEach((data, ctx) => {\n                    if (process.env.NODE_ENV !== 'production' && options.debug) {\n                        // eslint-disable-next-line no-console\n                        console.log('custom wrapper setData: ', data);\n                    }\n                    hooks.call('modifySetDataPayload', data, ctx);\n                    ctx.setData(data, cb);\n                });\n            }\n            // page setData\n            if (isNeedNormalUpdate) {\n                if (process.env.NODE_ENV !== 'production' && options.debug) {\n                    // eslint-disable-next-line no-console\n                    console.log('page setData:', normalUpdate);\n                }\n                hooks.call('modifySetDataPayload', data, ctx);\n                ctx.setData(normalUpdate, cb);\n            }\n        }, 0);\n    }\n    enqueueUpdateCallback(cb, ctx) {\n        this.updateCallbacks.push(() => {\n            ctx ? cb.call(ctx) : cb();\n        });\n    }\n    flushUpdateCallback() {\n        const { updateCallbacks } = this;\n        if (!updateCallbacks.length)\n            return;\n        const copies = updateCallbacks.slice(0);\n        this.updateCallbacks.length = 0;\n        for (let i = 0; i < copies.length; i++) {\n            copies[i]();\n        }\n    }\n}\n","import { isNull, isString, isUndefined, Shortcuts, toCamelCase, toDashed, warn } from '@ice/shared';\nimport { PROPERTY_THRESHOLD } from '../constants/index.js';\nimport { MutationObserver } from '../dom-external/mutation-observer/index.js';\nimport { styleProperties } from './style_properties.js';\nfunction recordCss(obj) {\n    MutationObserver.record({\n        type: \"attributes\" /* MutationRecordType.ATTRIBUTES */,\n        target: obj._element,\n        attributeName: 'style',\n        oldValue: obj.cssText,\n    });\n}\nfunction enqueueUpdate(obj) {\n    const element = obj._element;\n    if (element._root) {\n        element.enqueueUpdate({\n            path: `${element._path}.${Shortcuts.Style}`,\n            value: obj.cssText,\n        });\n    }\n}\nfunction setStyle(newVal, styleKey) {\n    process.env.NODE_ENV !== 'production' && warn(isString(newVal) && newVal.length > PROPERTY_THRESHOLD, `Style 属性 ${styleKey} 的值数据量过大，可能会影响渲染性能，考虑使用 CSS 类或其它方案替代。`);\n    const old = this[styleKey];\n    if (old === newVal)\n        return;\n    !this._pending && recordCss(this);\n    if (isNull(newVal) || isUndefined(newVal)) {\n        this._usedStyleProp.delete(styleKey);\n        delete this._value[styleKey];\n    }\n    else {\n        this._usedStyleProp.add(styleKey);\n        this._value[styleKey] = newVal;\n    }\n    !this._pending && enqueueUpdate(this);\n}\nfunction initStyle(ctor) {\n    const properties = {};\n    for (let i = 0; i < styleProperties.length; i++) {\n        const styleKey = styleProperties[i];\n        properties[styleKey] = {\n            get() {\n                const val = this._value[styleKey];\n                return isNull(val) || isUndefined(val) ? '' : val;\n            },\n            set(newVal) {\n                setStyle.call(this, newVal, styleKey);\n            },\n        };\n    }\n    Object.defineProperties(ctor.prototype, properties);\n}\nfunction isCssVariable(propertyName) {\n    return /^--/.test(propertyName);\n}\nexport class Style {\n    constructor(element) {\n        this._element = element;\n        this._usedStyleProp = new Set();\n        this._value = {};\n    }\n    setCssVariables(styleKey) {\n        Object.prototype.hasOwnProperty.call(this, styleKey) || Object.defineProperty(this, styleKey, {\n            enumerable: true,\n            configurable: true,\n            get: () => {\n                return this._value[styleKey] || '';\n            },\n            set: (newVal) => {\n                setStyle.call(this, newVal, styleKey);\n            },\n        });\n    }\n    get cssText() {\n        if (!this._usedStyleProp.size)\n            return '';\n        const texts = [];\n        this._usedStyleProp.forEach(key => {\n            const val = this[key];\n            if (isNull(val) || isUndefined(val))\n                return;\n            let styleName = isCssVariable(key) ? key : toDashed(key);\n            if (styleName.indexOf('webkit') === 0 || styleName.indexOf('Webkit') === 0) {\n                styleName = `-${styleName}`;\n            }\n            texts.push(`${styleName}: ${val};`);\n        });\n        return texts.join(' ');\n    }\n    set cssText(str) {\n        this._pending = true;\n        recordCss(this);\n        this._usedStyleProp.forEach(prop => {\n            this.removeProperty(prop);\n        });\n        if (str === '' || isUndefined(str) || isNull(str)) {\n            this._pending = false;\n            enqueueUpdate(this);\n            return;\n        }\n        const rules = str.split(';');\n        for (let i = 0; i < rules.length; i++) {\n            const rule = rules[i].trim();\n            if (rule === '') {\n                continue;\n            }\n            // 可能存在 'background: url(http:x/y/z)' 的情况\n            const [propName, ...valList] = rule.split(':');\n            const val = valList.join(':');\n            if (isUndefined(val)) {\n                continue;\n            }\n            this.setProperty(propName.trim(), val.trim());\n        }\n        this._pending = false;\n        enqueueUpdate(this);\n    }\n    setProperty(propertyName, value) {\n        if (propertyName[0] === '-') {\n            // 支持 webkit 属性或 css 变量\n            this.setCssVariables(propertyName);\n        }\n        else {\n            propertyName = toCamelCase(propertyName);\n        }\n        if (isNull(value) || isUndefined(value)) {\n            this.removeProperty(propertyName);\n        }\n        else {\n            this[propertyName] = value;\n        }\n    }\n    removeProperty(propertyName) {\n        propertyName = toCamelCase(propertyName);\n        if (!this._usedStyleProp.has(propertyName)) {\n            return '';\n        }\n        const value = this[propertyName];\n        this[propertyName] = undefined;\n        return value;\n    }\n    getPropertyValue(propertyName) {\n        propertyName = toCamelCase(propertyName);\n        const value = this[propertyName];\n        if (!value) {\n            return '';\n        }\n        return value;\n    }\n}\ninitStyle(Style);\n","/* eslint-disable camelcase */\n/*\n *\n * https://www.w3.org/Style/CSS/all-properties.en.html\n */\nconst WEBKIT = 'webkit';\nconst styleProperties = [\n    'all',\n    'appearance',\n    'blockOverflow',\n    'blockSize',\n    'bottom',\n    'clear',\n    'contain',\n    'content',\n    'continue',\n    'cursor',\n    'direction',\n    'display',\n    'filter',\n    'float',\n    'gap',\n    'height',\n    'inset',\n    'isolation',\n    'left',\n    'letterSpacing',\n    'lightingColor',\n    'markerSide',\n    'mixBlendMode',\n    'opacity',\n    'order',\n    'position',\n    'quotes',\n    'resize',\n    'right',\n    'rowGap',\n    'tabSize',\n    'tableLayout',\n    'top',\n    'userSelect',\n    'verticalAlign',\n    'visibility',\n    'voiceFamily',\n    'volume',\n    'whiteSpace',\n    'widows',\n    'width',\n    'zIndex',\n    'pointerEvents',\n    /** 非常用 style */\n    // 'azimuth',\n    // 'backfaceVisibility',\n    // 'baselineShift',\n    // 'captionSide',\n    // 'chains',\n    // 'dominantBaseline',\n    // 'elevation',\n    // 'emptyCells',\n    // 'forcedColorAdjust',\n    // 'glyphOrientationVertical',\n    // 'hangingPunctuation',\n    // 'hyphenateCharacter',\n    // 'hyphens',\n    // 'imageOrientation',\n    // 'imageResolution',\n    // 'orphans',\n    // 'playDuring',\n    // 'pointerEvents',\n    // 'regionFragment',\n    // 'richness',\n    // 'running',\n    // 'scrollBehavior',\n    // 'speechRate',\n    // 'stress',\n    // 'stringSet',\n    // 'unicodeBidi',\n    // 'willChange',\n    // 'writingMode',\n];\n// 减少文件体积\nfunction combine(prefix, list, excludeSelf) {\n    !excludeSelf && styleProperties.push(prefix);\n    list.forEach(item => {\n        styleProperties.push(prefix + item);\n        if (prefix === WEBKIT) {\n            styleProperties.push(`Webkit${item}`);\n        }\n    });\n}\nconst color = 'Color';\nconst style = 'Style';\nconst width = 'Width';\nconst image = 'Image';\nconst size = 'Size';\nconst color_style_width = [color, style, width];\nconst fitlength_fitwidth_image = ['FitLength', 'FitWidth', image];\nconst fitlength_fitwidth_image_radius = [...fitlength_fitwidth_image, 'Radius'];\nconst color_style_width_fitlength_fitwidth_image = [...color_style_width, ...fitlength_fitwidth_image];\nconst endRadius_startRadius = ['EndRadius', 'StartRadius'];\nconst bottom_left_right_top = ['Bottom', 'Left', 'Right', 'Top'];\nconst end_start = ['End', 'Start'];\nconst content_items_self = ['Content', 'Items', 'Self'];\nconst blockSize_height_inlineSize_width = ['BlockSize', 'Height', 'InlineSize', width];\nconst after_before = ['After', 'Before'];\ncombine('borderBlock', color_style_width);\ncombine('borderBlockEnd', color_style_width);\ncombine('borderBlockStart', color_style_width);\ncombine('outline', [...color_style_width, 'Offset']);\ncombine('border', [...color_style_width, 'Boundary', 'Break', 'Collapse', 'Radius', 'Spacing']);\ncombine('borderFit', ['Length', width]);\ncombine('borderInline', color_style_width);\ncombine('borderInlineEnd', color_style_width);\ncombine('borderInlineStart', color_style_width);\ncombine('borderLeft', color_style_width_fitlength_fitwidth_image);\ncombine('borderRight', color_style_width_fitlength_fitwidth_image);\ncombine('borderTop', color_style_width_fitlength_fitwidth_image);\ncombine('borderBottom', color_style_width_fitlength_fitwidth_image);\ncombine('textDecoration', [color, style, 'Line']);\ncombine('textEmphasis', [color, style, 'Position']);\ncombine('scrollMargin', bottom_left_right_top);\ncombine('scrollPadding', bottom_left_right_top);\ncombine('padding', bottom_left_right_top);\ncombine('margin', [...bottom_left_right_top, 'Trim']);\ncombine('scrollMarginBlock', end_start);\ncombine('scrollMarginInline', end_start);\ncombine('scrollPaddingBlock', end_start);\ncombine('scrollPaddingInline', end_start);\ncombine('gridColumn', end_start);\ncombine('gridRow', end_start);\ncombine('insetBlock', end_start);\ncombine('insetInline', end_start);\ncombine('marginBlock', end_start);\ncombine('marginInline', end_start);\ncombine('paddingBlock', end_start);\ncombine('paddingInline', end_start);\ncombine('pause', after_before);\ncombine('cue', after_before);\ncombine('mask', ['Clip', 'Composite', image, 'Mode', 'Origin', 'Position', 'Repeat', size, 'Type']);\ncombine('borderImage', ['Outset', 'Repeat', 'Slice', 'Source', 'Transform', width]);\ncombine('maskBorder', ['Mode', 'Outset', 'Repeat', 'Slice', 'Source', width]);\ncombine('font', ['Family', 'FeatureSettings', 'Kerning', 'LanguageOverride', 'MaxSize', 'MinSize', 'OpticalSizing', 'Palette', size, 'SizeAdjust', 'Stretch', style, 'Weight', 'VariationSettings']);\ncombine('transform', ['Box', 'Origin', style]);\ncombine('background', [color, image, 'Attachment', 'BlendMode', 'Clip', 'Origin', 'Position', 'Repeat', size]);\ncombine('listStyle', [image, 'Position', 'Type']);\ncombine('scrollSnap', ['Align', 'Stop', 'Type']);\ncombine('grid', ['Area', 'AutoColumns', 'AutoFlow', 'AutoRows']);\ncombine('gridTemplate', ['Areas', 'Columns', 'Rows']);\ncombine('overflow', ['Block', 'Inline', 'Wrap', 'X', 'Y']);\ncombine('transition', ['Delay', 'Duration', 'Property', 'TimingFunction']);\ncombine('color', ['Adjust', 'InterpolationFilters', 'Scheme']);\ncombine('textAlign', ['All', 'Last']);\ncombine('page', ['BreakAfter', 'BreakBefore', 'BreakInside']);\ncombine('animation', ['Delay', 'Direction', 'Duration', 'FillMode', 'IterationCount', 'Name', 'PlayState', 'TimingFunction']);\ncombine('flex', ['Basis', 'Direction', 'Flow', 'Grow', 'Shrink', 'Wrap']);\ncombine('offset', [...after_before, ...end_start, 'Anchor', 'Distance', 'Path', 'Position', 'Rotate']);\ncombine('perspective', ['Origin']);\ncombine('clip', ['Path', 'Rule']);\ncombine('flow', ['From', 'Into']);\ncombine('align', ['Content', 'Items', 'Self'], true);\ncombine('alignment', ['Adjust', 'Baseline'], true);\ncombine('borderStart', endRadius_startRadius, true);\ncombine('borderEnd', endRadius_startRadius, true);\ncombine('borderCorner', ['Fit', image, 'ImageTransform'], true);\ncombine('borderTopLeft', fitlength_fitwidth_image_radius, true);\ncombine('borderTopRight', fitlength_fitwidth_image_radius, true);\ncombine('borderBottomLeft', fitlength_fitwidth_image_radius, true);\ncombine('borderBottomRight', fitlength_fitwidth_image_radius, true);\ncombine('column', ['s', 'Count', 'Fill', 'Gap', 'Rule', 'RuleColor', 'RuleStyle', 'RuleWidth', 'Span', width], true);\ncombine('break', [...after_before, 'Inside'], true);\ncombine('wrap', [...after_before, 'Flow', 'Inside', 'Through'], true);\ncombine('justify', content_items_self, true);\ncombine('place', content_items_self, true);\ncombine('max', [...blockSize_height_inlineSize_width, 'Lines'], true);\ncombine('min', blockSize_height_inlineSize_width, true);\ncombine('line', ['Break', 'Clamp', 'Grid', 'Height', 'Padding', 'Snap'], true);\ncombine('inline', ['BoxAlign', size, 'Sizing'], true);\ncombine('text', ['CombineUpright', 'GroupAlign', 'Height', 'Indent', 'Justify', 'Orientation', 'Overflow', 'Shadow', 'SpaceCollapse', 'SpaceTrim', 'Spacing', 'Transform', 'UnderlinePosition', 'Wrap'], true);\ncombine('shape', ['ImageThreshold', 'Inside', 'Margin', 'Outside'], true);\ncombine('word', ['Break', 'Spacing', 'Wrap'], true);\ncombine('object', ['Fit', 'Position'], true);\ncombine('box', ['DecorationBreak', 'Shadow', 'Sizing', 'Snap'], true);\ncombine(WEBKIT, ['LineClamp', 'BoxOrient', 'TextFillColor', 'TextStroke', 'TextStrokeColor', 'TextStrokeWidth'], true);\n/** 非常用 style */\n// combine('caret', [color, 'Shape'])\n// combine('counter', ['Increment', 'Reset', 'Set'], true)\n// combine('dropInitial', ['AfterAdjust', 'AfterAlign', 'BeforeAdjust', 'BeforeAlign', size, 'Value'], true)\n// combine('flood', [color, 'Opacity'], true)\n// combine('footnote', ['Display', 'Policy'], true)\n// combine('hyphenateLimit', ['Chars', 'Last', 'Lines', 'Zone'], true)\n// combine('initialLetters', ['Align', 'Wrap'])\n// combine('ruby', ['Align', 'Merge', 'Position'], true)\n// combine('lineStacking', ['Ruby', 'Shift', 'Strategy'])\n// combine('bookmark', ['Label', 'Level', 'State'], true)\n// combine('speak', ['Header', 'Numeral', 'Punctuation'])\n// combine('pitch', ['Range'])\n// combine('nav', ['Down', 'Left', 'Right', 'Up'], true)\n// combine('fontSynthesis', ['SmallCaps', style, 'Weight'])\n// combine('fontVariant', ['Alternates', 'Caps', 'EastAsian', 'Emoji', 'Ligatures', 'Numeric', 'Position'])\nexport { styleProperties };\n","import { Element } from './element.js';\n// for Vue3\nexport class SVGElement extends Element {\n}\n","import { Shortcuts } from '@ice/shared';\nimport { MutationObserver } from '../dom-external/mutation-observer/index.js';\nimport { Node } from './node.js';\nexport class Text extends Node {\n    constructor(value) {\n        super();\n        this.nodeType = 3 /* NodeType.TEXT_NODE */;\n        this.nodeName = '#text';\n        this._value = value;\n    }\n    set textContent(text) {\n        MutationObserver.record({\n            target: this,\n            type: \"characterData\" /* MutationRecordType.CHARACTER_DATA */,\n            oldValue: this._value,\n        });\n        this._value = text;\n        this.enqueueUpdate({\n            path: `${this._path}.${Shortcuts.Text}`,\n            value: text,\n        });\n    }\n    get textContent() {\n        return this._value;\n    }\n    set nodeValue(text) {\n        this.textContent = text;\n    }\n    get nodeValue() {\n        return this._value;\n    }\n    set data(text) {\n        this.textContent = text;\n    }\n    get data() {\n        return this._value;\n    }\n}\n","function returnTrue() {\n    return true;\n}\nexport function treeToArray(root, predict) {\n    const array = [];\n    const filter = predict !== null && predict !== void 0 ? predict : returnTrue;\n    let object = root;\n    while (object) {\n        if (object.nodeType === 1 /* NodeType.ELEMENT_NODE */ && filter(object)) {\n            array.push(object);\n        }\n        object = following(object, root);\n    }\n    return array;\n}\nfunction following(el, root) {\n    const { firstChild } = el;\n    if (firstChild) {\n        return firstChild;\n    }\n    let current = el;\n    do {\n        if (current === root) {\n            return null;\n        }\n        const { nextSibling } = current;\n        if (nextSibling) {\n            return nextSibling;\n        }\n        current = current.parentElement;\n    } while (current);\n    return null;\n}\n","/* eslint-disable dot-notation */\nimport { EMPTY_OBJ, ensure, hooks, isArray, isFunction, isString, isUndefined, Shortcuts } from '@ice/shared';\nimport { raf } from '../bom/raf.js';\nimport { BEHAVIORS, CUSTOM_WRAPPER, EXTERNAL_CLASSES, ON_HIDE, ON_LOAD, ON_READY, ON_SHOW, OPTIONS, PAGE_INIT, VIEW, APP_DATA_READY } from '../constants/index.js';\nimport { Current } from '../current.js';\nimport { eventHandler } from '../dom/event.js';\nimport { eventCenter } from '../emitter/emitter.js';\nimport env from '../env.js';\nimport { perf } from '../perf.js';\nimport { customWrapperCache, incrementId } from '../utils/index.js';\nconst instances = new Map();\nconst pageId = incrementId();\nexport function injectPageInstance(inst, id) {\n    hooks.call('mergePageInstance', instances.get(id), inst);\n    instances.set(id, inst);\n}\nexport function getPageInstance(id) {\n    return instances.get(id);\n}\nexport function addLeadingSlash(path) {\n    if (path == null) {\n        return '';\n    }\n    return path.charAt(0) === '/' ? path : `/${path}`;\n}\nexport function safeExecute(path, lifecycle, ...args) {\n    const instance = instances.get(path);\n    if (instance == null) {\n        return;\n    }\n    const func = hooks.call('getLifecycle', instance, lifecycle);\n    if (isArray(func)) {\n        const res = func.map(fn => fn.apply(instance, args));\n        return res[0];\n    }\n    if (!isFunction(func)) {\n        return;\n    }\n    return func.apply(instance, args);\n}\nexport function stringify(obj) {\n    if (obj == null) {\n        return '';\n    }\n    const path = Object.keys(obj).map((key) => {\n        return `${key}=${obj[key]}`;\n    }).join('&');\n    return path === '' ? path : `?${path}`;\n}\nexport function getPath(id, options) {\n    const idx = id.indexOf('?');\n    return `${idx > -1 ? id.substring(0, idx) : id}${stringify(options)}`;\n}\nexport function getOnReadyEventKey(path) {\n    return `${path}.${ON_READY}`;\n}\nexport function getOnShowEventKey(path) {\n    return `${path}.${ON_SHOW}`;\n}\nexport function getOnHideEventKey(path) {\n    return `${path}.${ON_HIDE}`;\n}\nexport function createPageConfig(component, pageName, data, { dataLoader, pageConfig }, miniappPageConfig) {\n    // 小程序 Page 构造器是一个傲娇小公主，不能把复杂的对象挂载到参数上\n    const id = pageName !== null && pageName !== void 0 ? pageName : `ice_page_${pageId()}`;\n    const [ONLOAD, ONUNLOAD, ONREADY, ONSHOW, ONHIDE, LIFECYCLES, , ALI_MINIAPP_EVENTS,] = hooks.call('getMiniLifecycleImpl').page;\n    let pageElement = null;\n    let unmounting = false;\n    let prepareMountList = [];\n    function setCurrentRouter(page) {\n        const router = page.route || page.__route__ || page.$icePath;\n        Current.router = {\n            params: page.$iceParams,\n            path: addLeadingSlash(router),\n            $icePath: page.$icePath,\n            onReady: getOnReadyEventKey(id),\n            onShow: getOnShowEventKey(id),\n            onHide: getOnHideEventKey(id),\n        };\n        if (!isUndefined(page.exitState)) {\n            Current.router.exitState = page.exitState;\n        }\n    }\n    let loadResolver;\n    let hasLoaded;\n    const routeConfig = pageConfig === null || pageConfig === void 0 ? void 0 : pageConfig();\n    const config = {\n        [ONLOAD](options = {}, cb) {\n            hasLoaded = new Promise(resolve => { loadResolver = resolve; });\n            perf.start(PAGE_INIT);\n            Current.page = this;\n            this.config = miniappPageConfig || {};\n            // this.$icePath 是页面唯一标识\n            const uniqueOptions = Object.assign({}, options);\n            const $icePath = this.$icePath = getPath(id, uniqueOptions);\n            // this.$iceParams 作为暴露给开发者的页面参数对象，可以被随意修改\n            if (this.$iceParams == null) {\n                this.$iceParams = uniqueOptions;\n            }\n            setCurrentRouter(this);\n            if (!dataLoader) {\n                // createRoot(render) is asynchronous\n                dataLoader = () => new Promise(resolve => setTimeout(resolve, 0));\n            }\n            const mount = () => {\n                dataLoader({ pathname: id, query: this.$iceParams }).then(routeData => {\n                    Current.app.mount(component, { id: $icePath, routeData, routeConfig }, () => {\n                        pageElement = env.document.getElementById($icePath);\n                        ensure(pageElement !== null, '没有找到页面实例。');\n                        safeExecute($icePath, ON_LOAD, this.$iceParams);\n                        loadResolver();\n                        pageElement.ctx = this;\n                        pageElement.performUpdate(true, cb);\n                    });\n                });\n            };\n            if (unmounting) {\n                prepareMountList.push(mount);\n            }\n            else if (Current.appDataReady) {\n                mount();\n            }\n            else {\n                // Only when getAppData is ready, the page can be mounted\n                eventCenter.on(APP_DATA_READY, () => {\n                    mount();\n                });\n            }\n        },\n        [ONUNLOAD]() {\n            const { $icePath } = this;\n            // 触发onUnload生命周期\n            safeExecute($icePath, ONUNLOAD);\n            unmounting = true;\n            Current.app.unmount($icePath, () => {\n                unmounting = false;\n                instances.delete($icePath);\n                if (pageElement) {\n                    pageElement.ctx = null;\n                    pageElement = null;\n                }\n                if (prepareMountList.length) {\n                    prepareMountList.forEach(fn => fn());\n                    prepareMountList = [];\n                }\n            });\n        },\n        [ONREADY]() {\n            hasLoaded.then(() => {\n                // 触发生命周期\n                safeExecute(this.$icePath, ON_READY);\n                // 通过事件触发子组件的生命周期\n                raf(() => eventCenter.trigger(getOnReadyEventKey(id)));\n                this.onReady.called = true;\n            });\n        },\n        [ONSHOW](options = {}) {\n            hasLoaded.then(() => {\n                // 设置 Current 的 page 和 router\n                Current.page = this;\n                setCurrentRouter(this);\n                // 触发生命周期\n                safeExecute(this.$icePath, ON_SHOW, options);\n                // 通过事件触发子组件的生命周期\n                raf(() => eventCenter.trigger(getOnShowEventKey(id)));\n            });\n        },\n        [ONHIDE]() {\n            // 设置 Current 的 page 和 router\n            if (Current.page === this) {\n                Current.page = null;\n                Current.router = null;\n            }\n            // 触发生命周期\n            safeExecute(this.$icePath, ON_HIDE);\n            // 通过事件触发子组件的生命周期\n            eventCenter.trigger(getOnHideEventKey(id));\n        },\n        // For ali miniapp only\n        events: {},\n    };\n    LIFECYCLES.forEach((lifecycle) => {\n        config[lifecycle] = function (...args) {\n            return safeExecute(this.$icePath, lifecycle, ...args);\n        };\n    });\n    /*\n      onShareAppMessage 和 onShareTimeline 会影响小程序右上方按钮的选项，因此不能默认注册\n      onPageScroll 则因性能问题不能默认注册\n     */\n    const { nativeEvents = [] } = routeConfig || {};\n    nativeEvents.forEach(nativeEvent => {\n        if (ALI_MINIAPP_EVENTS.includes(nativeEvent)) {\n            config.events[nativeEvent] = function (...args) {\n                return safeExecute(this.$icePath, nativeEvent, ...args);\n            };\n        }\n        else {\n            config[nativeEvent] = function (...args) {\n                if (nativeEvent === 'onShareAppMessage') {\n                    const target = args === null || args === void 0 ? void 0 : args[0].target;\n                    if (target) {\n                        const { id } = target;\n                        const element = document.getElementById(id);\n                        if (element) {\n                            target.dataset = element.dataset;\n                        }\n                    }\n                }\n                return safeExecute(this.$icePath, nativeEvent, ...args);\n            };\n        }\n    });\n    config.eh = eventHandler;\n    if (!isUndefined(data)) {\n        config.data = data;\n    }\n    hooks.call('modifyPageObject', config);\n    return config;\n}\nexport function createComponentConfig(component, componentName, data) {\n    const id = componentName !== null && componentName !== void 0 ? componentName : `ice_component_${pageId()}`;\n    let componentElement = null;\n    const config = {\n        attached() {\n            var _a;\n            perf.start(PAGE_INIT);\n            const path = getPath(id, { id: ((_a = this.getPageId) === null || _a === void 0 ? void 0 : _a.call(this)) || pageId() });\n            Current.app.mount(component, { id: path }, () => {\n                componentElement = env.document.getElementById(path);\n                ensure(componentElement !== null, '没有找到组件实例。');\n                this.$iceInstances = instances.get(path);\n                safeExecute(path, ON_LOAD);\n                if (componentElement) {\n                    componentElement.ctx = this;\n                    componentElement.performUpdate(true);\n                }\n            });\n        },\n        detached() {\n            const path = getPath(id, { id: this.getPageId() });\n            Current.app.unmount(path, () => {\n                instances.delete(path);\n                if (componentElement) {\n                    componentElement.ctx = null;\n                }\n            });\n        },\n        methods: {\n            eh: eventHandler,\n        },\n    };\n    if (!isUndefined(data)) {\n        config.data = data;\n    }\n    [OPTIONS, EXTERNAL_CLASSES, BEHAVIORS].forEach(key => {\n        var _a;\n        config[key] = (_a = component[key]) !== null && _a !== void 0 ? _a : EMPTY_OBJ;\n    });\n    return config;\n}\nexport function createRecursiveComponentConfig(componentName) {\n    const isCustomWrapper = componentName === CUSTOM_WRAPPER;\n    const lifeCycles = isCustomWrapper\n        ? {\n            attached() {\n                var _a;\n                const componentId = (_a = this.data.i) === null || _a === void 0 ? void 0 : _a.sid;\n                if (isString(componentId)) {\n                    customWrapperCache.set(componentId, this);\n                }\n            },\n            detached() {\n                var _a;\n                const componentId = (_a = this.data.i) === null || _a === void 0 ? void 0 : _a.sid;\n                if (isString(componentId)) {\n                    customWrapperCache.delete(componentId);\n                }\n            },\n        }\n        : EMPTY_OBJ;\n    return {\n        properties: {\n            i: {\n                type: Object,\n                value: {\n                    [Shortcuts.NodeName]: VIEW,\n                },\n            },\n            l: {\n                type: String,\n                value: '',\n            },\n        },\n        options: {\n            addGlobalClass: true,\n            virtualHost: !isCustomWrapper,\n        },\n        methods: {\n            eh: eventHandler,\n        },\n        ...lifeCycles,\n    };\n}\n","export {};\n","import { Events, hooks } from '@ice/shared';\nconst eventCenter = hooks.call('getEventCenter', Events);\nexport { eventCenter, Events };\n","import { EMPTY_OBJ } from '@ice/shared';\nconst env = {\n    window: EMPTY_OBJ,\n    document: EMPTY_OBJ,\n};\nexport default env;\n","import { hooks, Shortcuts, toCamelCase } from '@ice/shared';\nimport { CATCH_VIEW, CATCHMOVE, CLASS, ID, PURE_VIEW, STYLE, VIEW, } from './constants/index.js';\nimport { getComponentsAlias, isComment, isHasExtractProp, isText } from './utils/index.js';\nlet SPECIAL_NODES;\nlet componentsAlias;\n/**\n * React also has a fancy function's name for this: `hydrate()`.\n * You may have been heard `hydrate` as a SSR-related function,\n * actually, `hydrate` basicly do the `render()` thing, but ignore some properties,\n * it's a vnode traverser and modifier: that's exactly what ICE's doing in here.\n */\nexport function hydrate(node) {\n    if (!componentsAlias) {\n        // 初始化 componentsAlias\n        componentsAlias = getComponentsAlias();\n    }\n    if (!SPECIAL_NODES) {\n        // 初始化 SPECIAL_NODES\n        SPECIAL_NODES = hooks.call('getSpecialNodes');\n    }\n    const { nodeName } = node;\n    if (isText(node)) {\n        return {\n            [Shortcuts.Text]: node.nodeValue,\n            [Shortcuts.NodeName]: componentsAlias[nodeName]._num,\n        };\n    }\n    const data = {\n        [Shortcuts.NodeName]: nodeName,\n        sid: node.sid,\n    };\n    if (node.uid !== node.sid) {\n        data.uid = node.uid;\n    }\n    if (!node.isAnyEventBinded() && SPECIAL_NODES.indexOf(nodeName) > -1) {\n        data[Shortcuts.NodeName] = `static-${nodeName}`;\n        if (nodeName === VIEW && !isHasExtractProp(node)) {\n            data[Shortcuts.NodeName] = PURE_VIEW;\n        }\n    }\n    const { props } = node;\n    for (const prop in props) {\n        const propInCamelCase = toCamelCase(prop);\n        if (!prop.startsWith('data-') && // 在 node.dataset 的数据\n            prop !== CLASS &&\n            prop !== STYLE &&\n            prop !== ID &&\n            propInCamelCase !== CATCHMOVE) {\n            data[propInCamelCase] = props[prop];\n        }\n        if (nodeName === VIEW && propInCamelCase === CATCHMOVE && props[prop] !== false) {\n            data[Shortcuts.NodeName] = CATCH_VIEW;\n        }\n    }\n    // Children\n    data[Shortcuts.Childnodes] = node.childNodes.filter(node => !isComment(node)).map(hydrate);\n    if (node.className !== '') {\n        data[Shortcuts.Class] = node.className;\n    }\n    const { cssText } = node;\n    if (cssText !== '' && nodeName !== 'swiper-item') {\n        data[Shortcuts.Style] = cssText;\n    }\n    hooks.call('modifyHydrateData', data);\n    const nn = data[Shortcuts.NodeName];\n    const componentAlias = componentsAlias[nn];\n    if (componentAlias) {\n        data[Shortcuts.NodeName] = componentAlias._num;\n        for (const prop in data) {\n            if (prop in componentAlias) {\n                data[componentAlias[prop]] = data[prop];\n                delete data[prop];\n            }\n        }\n    }\n    else {\n        hooks.call('hydrateNativeComponentNode', node);\n    }\n    return data;\n}\n","// hook\n// dom-external\nimport './dom-external/index.js';\nexport { hooks } from '@ice/shared';\n// bom\nexport { document } from './bom/document.js';\nexport { getComputedStyle } from './bom/getComputedStyle.js';\nexport { navigator } from './bom/navigator.js';\nexport { caf as cancelAnimationFrame, now, raf as requestAnimationFrame } from './bom/raf.js';\nexport { window } from './bom/window.js';\n// dom\nexport { Element } from './dom/element.js';\nexport { createEvent, eventHandler, Event, createEventHandlerForThirdComponent, bindEventHandlersForThirdComponentNode } from './dom/event.js';\nexport { FormElement } from './dom/form.js';\nexport { Node } from './dom/node.js';\nexport { RootElement } from './dom/root.js';\nexport { Style } from './dom/style.js';\nexport { SVGElement } from './dom/svg.js';\nexport { Text } from './dom/text.js';\nexport { MutationObserver } from './dom-external/mutation-observer/index.js';\n// others\nexport { Current, getCurrentInstance } from './current.js';\nexport { eventSource } from './dom/event-source.js';\nexport { addLeadingSlash, createComponentConfig, createPageConfig, createRecursiveComponentConfig, getPageInstance, injectPageInstance, safeExecute, stringify, } from './dsl/common.js';\nexport * from './emitter/emitter.js';\nexport { hydrate } from './hydrate.js';\nexport { nextTick } from './next-tick.js';\nexport { options } from './options.js';\nexport { incrementId } from './utils/index.js';\n// typings\nexport * from './dsl/instance.js';\nexport * from './interface/index.js';\n","export {};\n","export {};\n","export {};\n","export {};\n","export * from './element.js';\nexport * from './event.js';\nexport * from './event-target.js';\nexport * from './hydrate.js';\nexport * from './node.js';\nexport * from './options.js';\nexport * from './utils.js';\n","export {};\n","export {};\n","export {};\n","import { Current } from './current.js';\nimport env from './env.js';\nexport const nextTick = (cb, ctx) => {\n    const { router } = Current;\n    const timerFunc = () => {\n        setTimeout(() => {\n            ctx ? cb.call(ctx) : cb();\n        }, 1);\n    };\n    if (router === null) {\n        timerFunc();\n    }\n    else {\n        let pageElement = null;\n        const path = router.$icePath;\n        pageElement = env.document.getElementById(path);\n        if (pageElement === null || pageElement === void 0 ? void 0 : pageElement.pendingUpdate) {\n            pageElement.enqueueUpdateCallback(cb, ctx);\n        }\n        else {\n            timerFunc();\n        }\n    }\n};\n","export const options = {\n    prerender: true,\n    debug: false,\n};\n","import { options } from './options.js';\nclass Performance {\n    constructor() {\n        this.recorder = new Map();\n    }\n    start(id) {\n        if (!options.debug) {\n            return;\n        }\n        this.recorder.set(id, Date.now());\n    }\n    stop(id) {\n        if (!options.debug) {\n            return;\n        }\n        const now = Date.now();\n        const prev = this.recorder.get(id);\n        const time = now - prev;\n        // eslint-disable-next-line no-console\n        console.log(`${id} 时长： ${time}ms`);\n    }\n}\nexport const perf = new Performance();\n","import { getComponentsAlias as _getComponentsAlias, internalComponents, isFunction, Shortcuts, } from '@ice/shared';\nimport { CLASS, COMMENT, ID, ROOT_STR, STYLE, UID, } from '../constants/index.js';\nexport const incrementId = () => {\n    const chatCodes = [];\n    // A-Z\n    for (let i = 65; i <= 90; i++) {\n        chatCodes.push(i);\n    }\n    // a-z\n    for (let i = 97; i <= 122; i++) {\n        chatCodes.push(i);\n    }\n    const chatCodesLen = chatCodes.length - 1;\n    const list = [0, 0];\n    return () => {\n        const target = list.map(item => chatCodes[item]);\n        const res = String.fromCharCode(...target);\n        let tailIdx = list.length - 1;\n        list[tailIdx]++;\n        while (list[tailIdx] > chatCodesLen) {\n            list[tailIdx] = 0;\n            tailIdx = tailIdx - 1;\n            if (tailIdx < 0) {\n                list.push(0);\n                break;\n            }\n            list[tailIdx]++;\n        }\n        return res;\n    };\n};\nexport function isElement(node) {\n    return node.nodeType === 1 /* NodeType.ELEMENT_NODE */;\n}\nexport function isText(node) {\n    return node.nodeType === 3 /* NodeType.TEXT_NODE */;\n}\nexport function isComment(node) {\n    return node.nodeName === COMMENT;\n}\nexport function isHasExtractProp(el) {\n    const res = Object.keys(el.props).find(prop => {\n        return !(/^(class|style|id)$/.test(prop) || prop.startsWith('data-'));\n    });\n    return Boolean(res);\n}\n/**\n * 往上寻找组件树直到 root，寻找是否有祖先组件绑定了同类型的事件\n * @param node 当前组件\n * @param type 事件类型\n */\nexport function isParentBinded(node, type) {\n    var _a;\n    let res = false;\n    while ((node === null || node === void 0 ? void 0 : node.parentElement) && node.parentElement._path !== ROOT_STR) {\n        if ((_a = node.parentElement.__handlers[type]) === null || _a === void 0 ? void 0 : _a.length) {\n            res = true;\n            break;\n        }\n        node = node.parentElement;\n    }\n    return res;\n}\nexport function shortcutAttr(key) {\n    switch (key) {\n        case STYLE:\n            return Shortcuts.Style;\n        case ID:\n            return UID;\n        case CLASS:\n            return Shortcuts.Class;\n        default:\n            return key;\n    }\n}\nexport const customWrapperCache = new Map();\nexport function extend(ctor, methodName, options) {\n    if (isFunction(options)) {\n        options = {\n            value: options,\n        };\n    }\n    Object.defineProperty(ctor.prototype, methodName, {\n        configurable: true,\n        enumerable: true,\n        ...options,\n    });\n}\nlet componentsAlias;\nexport function getComponentsAlias() {\n    if (!componentsAlias) {\n        componentsAlias = _getComponentsAlias(internalComponents);\n    }\n    return componentsAlias;\n}\n","/* eslint-disable no-undef */\nimport { createRecursiveComponentConfig } from '@ice/miniapp-runtime';\n// @ts-ignore\nComponent(createRecursiveComponentConfig());\n","/* eslint-disable no-undef */\nimport { createRecursiveComponentConfig } from '@ice/miniapp-runtime';\n// @ts-ignore\nComponent(createRecursiveComponentConfig('custom-wrapper'));\n","export function defineMiniappConfig(miniappConfigOrDefineMiniappConfig) {\n    let miniappLifecycles = {};\n    if (typeof miniappConfigOrDefineMiniappConfig === 'function') {\n        miniappLifecycles = miniappConfigOrDefineMiniappConfig();\n    }\n    else {\n        miniappLifecycles = miniappConfigOrDefineMiniappConfig;\n    }\n    return miniappLifecycles;\n}\nconst runtime = ({}) => { };\nexport default runtime;\n","const _true = 'true';\nconst _false = 'false';\nconst _empty = '';\nconst _zero = '0';\nexport const components = {\n    // ======== 调整属性 ========\n    Progress: {\n        'border-radius': _zero,\n        'font-size': '16',\n        duration: '30',\n        bindActiveEnd: _empty,\n    },\n    RichText: {\n        space: _empty,\n        'user-select': _false,\n    },\n    Text: {\n        'user-select': _false,\n        overflow: 'visible',\n        'max-lines': '',\n    },\n    Map: {\n        polygons: '[]',\n        subkey: _empty,\n        rotate: _zero,\n        skew: _zero,\n        'max-scale': '20',\n        'min-scale': '3',\n        'enable-3D': _false,\n        'show-compass': _false,\n        'show-scale': _false,\n        'enable-overlooking': _false,\n        'enable-auto-max-overlooking': _false,\n        'enable-zoom': _true,\n        'enable-scroll': _true,\n        'enable-rotate': _false,\n        'enable-satellite': _false,\n        'enable-traffic': _false,\n        'enable-poi': _true,\n        'enable-building': _true,\n        setting: '[]',\n        bindLabelTap: _empty,\n        bindRegionChange: _empty,\n        bindPoiTap: _empty,\n        bindPolylineTap: _empty,\n        bindAbilitySuccess: _empty,\n        bindAbilityFailed: _empty,\n        bindAuthSuccess: _empty,\n        bindInterpolatePoint: _empty,\n        bindError: _empty,\n        bindAnchorPointTap: _empty,\n    },\n    Button: {\n        lang: 'en',\n        'session-from': _empty,\n        'send-message-title': _empty,\n        'send-message-path': _empty,\n        'send-message-img': _empty,\n        'app-parameter': _empty,\n        'show-message-card': _false,\n        'business-id': _empty,\n        bindGetUserInfo: _empty,\n        bindContact: _empty,\n        bindGetPhoneNumber: _empty,\n        bindGetRealTimePhoneNumber: _empty,\n        bindChooseAvatar: _empty,\n        bindError: _empty,\n        bindOpenSetting: _empty,\n        bindLaunchApp: _empty,\n        bindAgreePrivacyAuthorization: _empty,\n    },\n    Form: {\n        'report-submit-timeout': _zero,\n    },\n    Input: {\n        'always-embed': _false,\n        'adjust-position': _true,\n        'hold-keyboard': _false,\n        'safe-password-cert-path': '',\n        'safe-password-length': '',\n        'safe-password-time-stamp': '',\n        'safe-password-nonce': '',\n        'safe-password-salt': '',\n        'safe-password-custom-hash': '',\n        'auto-fill': _empty,\n        bindKeyboardHeightChange: _empty,\n        bindNicknameReview: _empty,\n    },\n    Picker: {\n        'header-text': _empty,\n        level: 'region',\n    },\n    PickerView: {\n        'immediate-change': _false,\n        bindPickStart: _empty,\n        bindPickEnd: _empty,\n    },\n    Slider: {\n        color: \"'#e9e9e9'\",\n        'selected-color': \"'#1aad19'\",\n    },\n    Textarea: {\n        'show-confirm-bar': _true,\n        'adjust-position': _true,\n        'hold-keyboard': _false,\n        'disable-default-padding': _false,\n        'confirm-type': \"'return'\",\n        'confirm-hold': _false,\n        bindKeyboardHeightChange: _empty,\n    },\n    ScrollView: {\n        'enable-flex': _false,\n        'scroll-anchoring': _false,\n        enhanced: _false,\n        'using-sticky': _false,\n        'paging-enabled': _false,\n        'enable-passive': _false,\n        'refresher-enabled': _false,\n        'refresher-threshold': '45',\n        'refresher-default-style': \"'black'\",\n        'refresher-background': \"'#FFF'\",\n        'refresher-triggered': _false,\n        bounces: _true,\n        'show-scrollbar': _true,\n        'fast-deceleration': _false,\n        type: \"'list'\",\n        reverse: _false,\n        clip: _true,\n        'enable-back-to-top': _false,\n        'cache-extent': _empty,\n        'min-drag-distance': '18',\n        'scroll-into-view-within-extent': _false,\n        'scroll-into-view-alignment': \"'start'\",\n        padding: '[0,0,0,0]',\n        'refresher-two-level-enabled': _false,\n        'refresher-two-level-triggered': _false,\n        'refresher-two-level-threshold': '150',\n        'refresher-two-level-close-threshold': '80',\n        'refresher-two-level-scroll-enabled': _false,\n        'refresher-ballistic-refresh-enabled': _false,\n        'refresher-two-level-pinned': _false,\n        bindDragStart: _empty,\n        bindDragging: _empty,\n        bindDragEnd: _empty,\n        bindRefresherPulling: _empty,\n        bindRefresherRefresh: _empty,\n        bindRefresherRestore: _empty,\n        bindRefresherAbort: _empty,\n        bindScrollStart: _empty,\n        bindScrollEnd: _empty,\n        bindRefresherWillRefresh: _empty,\n        bindRefresherStatusChange: _empty,\n    },\n    StickySection: {\n        'push-pinned-header': _true,\n        padding: '[0, 0, 0, 0]',\n    },\n    GridView: {\n        type: \"'aligned'\",\n        'cross-axis-count': '2',\n        'max-cross-axis-extent': _zero,\n        'main-axis-gap': _zero,\n        'cross-axis-gap': _zero,\n        padding: '[0, 0, 0, 0]',\n    },\n    GridBuilder: {\n        type: \"'aligned'\",\n        list: '[]',\n        'cross-axis-count': '2',\n        'max-cross-axis-extent': _zero,\n        'main-axis-gap': _zero,\n        'cross-axis-gap': _zero,\n        padding: '[0, 0, 0, 0]',\n        bindItemBuild: _empty,\n        bindItemDispose: _empty,\n    },\n    ListView: {\n        padding: '[0, 0, 0, 0]',\n    },\n    ListBuilder: {\n        list: '[]',\n        type: 'static',\n        padding: '[0, 0, 0, 0]',\n        'child-count': _empty,\n        'child-height': _empty,\n        bindItemBuild: _empty,\n        bindItemDispose: _empty,\n    },\n    StickyHeader: {\n        'offset-top': '0',\n        padding: '[0, 0, 0, 0]',\n    },\n    Swiper: {\n        'snap-to-edge': _false,\n        'easing-function': \"'default'\",\n    },\n    SwiperItem: {\n        'skip-hidden-item-layout': _false,\n    },\n    Navigator: {\n        target: \"'self'\",\n        'app-id': _empty,\n        path: _empty,\n        'extra-data': _empty,\n        version: \"'version'\",\n    },\n    Camera: {\n        mode: \"'normal'\",\n        resolution: \"'medium'\",\n        'frame-size': \"'medium'\",\n        bindInitDone: _empty,\n        bindScanCode: _empty,\n    },\n    Image: {\n        webp: _false,\n        'show-menu-by-longpress': _false,\n    },\n    LivePlayer: {\n        mode: \"'live'\",\n        'sound-mode': \"'speaker'\",\n        'auto-pause-if-navigate': _true,\n        'auto-pause-if-open-native': _true,\n        'picture-in-picture-mode': '[]',\n        'enable-auto-rotation': _false,\n        'referrer-policy': \"'no-referrer'\",\n        'enable-casting': _false,\n        bindstatechange: _empty,\n        bindfullscreenchange: _empty,\n        bindnetstatus: _empty,\n        bindAudioVolumeNotify: _empty,\n        bindEnterPictureInPicture: _empty,\n        bindLeavePictureInPicture: _empty,\n        bindCastingUserSelect: _empty,\n        bindCastingStateChange: _empty,\n        bindCastingInterrupt: _empty,\n    },\n    Video: {\n        title: _empty,\n        'play-btn-position': \"'bottom'\",\n        'enable-play-gesture': _false,\n        'auto-pause-if-navigate': _true,\n        'auto-pause-if-open-native': _true,\n        'vslide-gesture': _false,\n        'vslide-gesture-in-fullscreen': _true,\n        'show-bottom-progress': _true,\n        'ad-unit-id': _empty,\n        'poster-for-crawler': _empty,\n        'show-casting-button': _false,\n        'picture-in-picture-mode': '[]',\n        // picture-in-picture-show-progress 属性先注释掉的原因如下：\n        // 该属性超过了 wxml 属性的长度限制，实际无法使用且导致编译报错。可等微信官方修复后再放开。\n        // 参考1：https://developers.weixin.qq.com/community/develop/doc/000a429beb87f0eac07acc0fc5b400\n        // 参考2: https://developers.weixin.qq.com/community/develop/doc/0006883619c48054286a4308258c00?_at=vyxqpllafi\n        // 'picture-in-picture-show-progress': 'false',\n        'enable-auto-rotation': _false,\n        'show-screen-lock-button': _false,\n        'show-snapshot-button': _false,\n        'show-background-playback-button': _false,\n        'background-poster': _empty,\n        'referrer-policy': \"'no-referrer'\",\n        'is-drm': _false,\n        'is-live': _false,\n        'provision-url': _empty,\n        'certificate-url': _empty,\n        'license-url': _empty,\n        'preferred-peak-bit-rate': _empty,\n        bindProgress: _empty,\n        bindLoadedMetadata: _empty,\n        bindControlsToggle: _empty,\n        bindEnterPictureInPicture: _empty,\n        bindLeavePictureInPicture: _empty,\n        bindSeekComplete: _empty,\n        bindCastingUserSelect: _empty,\n        bindCastingStateChange: _empty,\n        bindCastingInterrupt: _empty,\n        bindAdLoad: _empty,\n        bindAdError: _empty,\n        bindAdClose: _empty,\n        bindAdPlay: _empty,\n    },\n    Canvas: {\n        type: _empty,\n    },\n    Ad: {\n        'ad-type': \"'banner'\",\n        'ad-theme': \"'white'\",\n    },\n    CoverView: {\n        'marker-id': _empty,\n        slot: _empty,\n    },\n    // ======== 额外组件 ========\n    Editor: {\n        'read-only': _false,\n        placeholder: _empty,\n        'show-img-size': _false,\n        'show-img-toolbar': _false,\n        'show-img-resize': _false,\n        focus: _false,\n        bindReady: _empty,\n        bindFocus: _empty,\n        bindBlur: _empty,\n        bindInput: _empty,\n        bindStatusChange: _empty,\n        name: _empty,\n    },\n    MatchMedia: {\n        'min-width': _empty,\n        'max-width': _empty,\n        width: _empty,\n        'min-height': _empty,\n        'max-height': _empty,\n        height: _empty,\n        orientation: _empty,\n    },\n    FunctionalPageNavigator: {\n        version: \"'release'\",\n        name: _empty,\n        args: _empty,\n        bindSuccess: _empty,\n        bindFail: _empty,\n        bindCancel: _empty,\n    },\n    LivePusher: {\n        url: _empty,\n        mode: \"'RTC'\",\n        autopush: _false,\n        muted: _false,\n        'enable-camera': _true,\n        'auto-focus': _true,\n        orientation: \"'vertical'\",\n        beauty: _zero,\n        whiteness: _zero,\n        aspect: \"'9:16'\",\n        'min-bitrate': '200',\n        'max-bitrate': '1000',\n        'audio-quality': \"'high'\",\n        'waiting-image': _empty,\n        'waiting-image-hash': _empty,\n        zoom: _false,\n        'device-position': \"'front'\",\n        'background-mute': _false,\n        mirror: _false,\n        'remote-mirror': _false,\n        'local-mirror': _false,\n        'audio-reverb-type': _zero,\n        'enable-mic': _true,\n        'enable-agc': _false,\n        'enable-ans': _false,\n        'audio-volume-type': \"'voicecall'\",\n        'video-width': '360',\n        'video-height': '640',\n        'beauty-style': \"'smooth'\",\n        filter: \"'standard'\",\n        'picture-in-picture-mode': '[]',\n        animation: _empty,\n        bindStateChange: _empty,\n        bindNetStatus: _empty,\n        bindBgmStart: _empty,\n        bindBgmProgress: _empty,\n        bindBgmComplete: _empty,\n        bindAudioVolumeNotify: _empty,\n    },\n    OfficialAccount: {\n        bindLoad: _empty,\n        bindError: _empty,\n    },\n    OpenData: {\n        type: _empty,\n        'open-gid': _empty,\n        lang: \"'en'\",\n        'default-text': _empty,\n        'default-avatar': _empty,\n        bindError: _empty,\n    },\n    NavigationBar: {\n        title: _empty,\n        loading: _false,\n        'front-color': \"'#000000'\",\n        'background-color': _empty,\n        'color-animation-duration': _zero,\n        'color-animation-timing-func': \"'linear'\",\n    },\n    PageMeta: {\n        'background-text-style': _empty,\n        'background-color': _empty,\n        'background-color-top': _empty,\n        'background-color-bottom': _empty,\n        'root-background-color': _empty,\n        'scroll-top': \"''\",\n        'scroll-duration': '300',\n        'page-style': \"''\",\n        'root-font-size': \"''\",\n        'page-orientation': \"''\",\n        bindResize: _empty,\n        bindScroll: _empty,\n        bindScrollDone: _empty,\n    },\n    VoipRoom: {\n        openid: _empty,\n        mode: \"'camera'\",\n        'device-position': \"'front'\",\n        bindError: _empty,\n    },\n    AdCustom: {\n        'unit-id': _empty,\n        'ad-intervals': _empty,\n        bindLoad: _empty,\n        bindError: _empty,\n    },\n    PageContainer: {\n        show: _false,\n        duration: '300',\n        'z-index': '100',\n        overlay: _true,\n        position: \"'bottom'\",\n        round: _false,\n        'close-on-slide-down': _false,\n        'overlay-style': _empty,\n        'custom-style': _empty,\n        bindBeforeEnter: _empty,\n        bindEnter: _empty,\n        bindAfterEnter: _empty,\n        bindBeforeLeave: _empty,\n        bindLeave: _empty,\n        bindAfterLeave: _empty,\n        bindClickOverlay: _empty,\n    },\n    ShareElement: {\n        mapkey: _empty,\n        transform: _false,\n        duration: '300',\n        'easing-function': \"'ease-out'\",\n    },\n    KeyboardAccessory: {},\n    RootPortal: {\n        enable: _true,\n    },\n    ChannelLive: {\n        'feed-id': _empty,\n        'finder-user-name': _empty,\n    },\n    ChannelVideo: {\n        'feed-id': _empty,\n        'finder-user-name': _empty,\n        'feed-token': _empty,\n        autoplay: _false,\n        loop: _false,\n        muted: _false,\n        'object-fit': \"'contain'\",\n        bindError: _empty,\n    },\n    Snapshot: {\n        mode: \"'view'\",\n    },\n    Span: {},\n    OpenContainer: {\n        transitionType: \"'fade'\",\n        transitionDuration: '300',\n        closedColor: \"'white'\",\n        closedElevation: _zero,\n        closeBorderRadius: _zero,\n        middleColor: _empty,\n        openColor: \"'white'\",\n        openElevation: _zero,\n        openBorderRadius: _zero,\n    },\n    DraggableSheet: {\n        initialChildSize: '0.5',\n        minChildSize: '0.25',\n        maxChildSize: '1.0',\n        snap: _false,\n        snapSizes: '[]',\n    },\n    NestedScrollHeader: {},\n    NestedScrollBody: {},\n};\n","import { mergeInternalComponents } from '@ice/shared';\nimport { components } from './components.js';\nmergeInternalComponents(components);\n","import React from 'react';\nconst Context = React.createContext(null);\nconst ActivityProvider = Context.Provider;\nexport const useActive = () => {\n    const data = React.useContext(Context);\n    return data === null || data === void 0 ? void 0 : data.active;\n};\nexport default function Activity({ mode, children }) {\n    const active = mode === 'visible';\n    return (React.createElement(ActivityProvider, { value: {\n            active,\n        } },\n        React.createElement(\"div\", { style: { display: active ? 'block' : 'none' } }, children)));\n}\n","import React from 'react';\nimport AppErrorBoundary from './AppErrorBoundary.js';\nimport { useAppContext } from './AppContext.js';\nexport default function App({ children }) {\n    const { appConfig } = useAppContext();\n    const { strict, errorBoundary } = appConfig.app;\n    const StrictMode = strict ? React.StrictMode : React.Fragment;\n    const ErrorBoundary = errorBoundary ? AppErrorBoundary : React.Fragment;\n    return (React.createElement(StrictMode, null,\n        React.createElement(ErrorBoundary, null, children)));\n}\n","import * as React from 'react';\nconst Context = React.createContext(undefined);\nContext.displayName = 'AppContext';\nfunction useAppContext() {\n    const value = React.useContext(Context);\n    return value;\n}\nfunction useAppData() {\n    const value = React.useContext(Context);\n    return value.appData;\n}\nconst AppContextProvider = Context.Provider;\nexport { useAppContext, useAppData, AppContextProvider, };\n","import * as React from 'react';\nexport default class AppErrorBoundary extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            error: null,\n        };\n    }\n    static getDerivedStateFromError(error) {\n        return { error };\n    }\n    componentDidCatch(error, errorInfo) {\n        console.error('AppErrorBoundary', error, errorInfo);\n    }\n    render() {\n        if (this.state.error) {\n            // TODO: Show the error message and the error stack.\n            return React.createElement(\"h1\", null, \"Something went wrong.\");\n        }\n        return this.props.children;\n    }\n}\n","import React, { isValidElement } from 'react';\nimport useMounted from './useMounted.js';\nconst ClientOnly = ({ children, fallback }) => {\n    const mounted = useMounted();\n    // Ref https://github.com/facebook/docusaurus/blob/v2.1.0/packages/docusaurus/src/client/exports/BrowserOnly.tsx\n    if (mounted) {\n        if (typeof children !== 'function' &&\n            process.env.NODE_ENV === 'development') {\n            throw new Error(`Error: The children of <ClientOnly> must be a \"render function\", e.g. <ClientOnly>{() => <span>{window.location.href}</span>}</ClientOnly>.\nCurrent type: ${isValidElement(children) ? 'React element' : typeof children}`);\n        }\n        return React.createElement(React.Fragment, null, children === null || children === void 0 ? void 0 : children());\n    }\n    return fallback !== null && fallback !== void 0 ? fallback : null;\n};\nexport default ClientOnly;\n","import React, { useEffect } from 'react';\nimport { RouterProvider } from 'react-router-dom';\nimport { createRouter } from '@remix-run/router';\nimport App from './App.js';\nimport { useAppContext } from './AppContext.js';\nimport { setHistory } from './history.js';\nimport { disableHistoryWarning } from './utils/deprecatedHistory.js';\nfunction createRouterHistory(history, router) {\n    const routerHistory = history;\n    routerHistory.push = (to, state) => {\n        router.navigate(to, { replace: false, state });\n    };\n    routerHistory.replace = (to, state) => {\n        router.navigate(to, { replace: true, state });\n    };\n    routerHistory.go = (delta) => {\n        router.navigate(delta);\n    };\n    return routerHistory;\n}\nlet router = null;\nfunction ClientRouter(props) {\n    const { Component, routerContext } = props;\n    const { revalidate } = useAppContext();\n    function clearRouter() {\n        if (router) {\n            router.dispose();\n            router = null;\n        }\n    }\n    // API createRouter only needs to be called once, and create before mount.\n    if (process.env.ICE_CORE_ROUTER === 'true') {\n        // Clear router before re-create in case of hot module replacement.\n        clearRouter();\n        // @ts-expect-error routes type should be AgnosticBaseRouteObject[]\n        router = createRouter(routerContext).initialize();\n        disableHistoryWarning();\n        // Replace history methods by router navigate for backwards compatibility.\n        setHistory(createRouterHistory({ ...routerContext.history }, router));\n    }\n    useEffect(() => {\n        if (revalidate) {\n            // Revalidate after render for SSG while staticDataLoader and dataLoader both defined.\n            router === null || router === void 0 ? void 0 : router.revalidate();\n        }\n        return () => {\n            // In case of micro app, ClientRouter will be unmounted,\n            // duspose router before mount again.\n            clearRouter();\n        };\n    }, [revalidate]);\n    let element;\n    if (process.env.ICE_CORE_ROUTER === 'true') {\n        element = React.createElement(RouterProvider, { router: router, fallbackElement: null });\n    }\n    else {\n        element = React.createElement(Component, null);\n    }\n    return (React.createElement(App, null, element));\n}\nexport default ClientRouter;\n","import * as React from 'react';\nimport { useAppContext, useAppData } from './AppContext.js';\nimport { getMeta, getTitle, getLinks, getScripts } from './routesConfig.js';\nimport getCurrentRoutePath from './utils/getCurrentRoutePath.js';\nconst Context = React.createContext(undefined);\nContext.displayName = 'DocumentContext';\nfunction useDocumentContext() {\n    const value = React.useContext(Context);\n    return value;\n}\nexport const DocumentContextProvider = Context.Provider;\nexport const Meta = (props) => {\n    const { matches, loaderData } = useAppContext();\n    const meta = getMeta(matches, loaderData);\n    const { MetaElement = 'meta', } = props;\n    return (React.createElement(React.Fragment, null,\n        meta.map(item => React.createElement(MetaElement, { key: item.name, ...props, ...item })),\n        React.createElement(MetaElement, { ...props, name: \"ice-meta-count\", content: meta.length.toString() })));\n};\nexport const Title = (props) => {\n    const { matches, loaderData } = useAppContext();\n    const title = getTitle(matches, loaderData);\n    const { TitleElement = 'title', ...rest } = props;\n    return (React.createElement(TitleElement, { ...rest }, title));\n};\nexport const Links = (props) => {\n    const { loaderData, matches, assetsManifest } = useAppContext();\n    const { LinkElement = 'link', ...rest } = props;\n    const routeLinks = getLinks(matches, loaderData);\n    const pageAssets = getPageAssets(matches, assetsManifest);\n    const entryAssets = getEntryAssets(assetsManifest);\n    const styles = entryAssets.concat(pageAssets).filter(path => path.indexOf('.css') > -1);\n    return (React.createElement(React.Fragment, null,\n        routeLinks.map(routeLinkProps => {\n            return React.createElement(LinkElement, { key: routeLinkProps.href, ...rest, ...routeLinkProps, \"data-route-link\": true });\n        }),\n        styles.map(style => React.createElement(LinkElement, { key: style, ...rest, rel: \"stylesheet\", type: \"text/css\", href: style }))));\n};\nexport const Scripts = (props) => {\n    const { loaderData, matches, assetsManifest } = useAppContext();\n    const { ScriptElement = 'script', ...rest } = props;\n    const routeScripts = getScripts(matches, loaderData);\n    const pageAssets = getPageAssets(matches, assetsManifest);\n    const entryAssets = getEntryAssets(assetsManifest);\n    // Page assets need to be load before entry assets, so when call dynamic import won't cause duplicate js chunk loaded.\n    let scripts = pageAssets.concat(entryAssets).filter(path => path.indexOf('.js') > -1);\n    if (assetsManifest.dataLoader) {\n        scripts.unshift(`${assetsManifest.publicPath}${assetsManifest.dataLoader}`);\n    }\n    // Unique scripts for duplicate chunks.\n    const jsSet = {};\n    scripts = scripts.filter((script) => {\n        if (jsSet[script])\n            return false;\n        jsSet[script] = true;\n        return true;\n    });\n    return (React.createElement(React.Fragment, null,\n        React.createElement(Data, { ScriptElement: ScriptElement }),\n        routeScripts.map(routeScriptProps => {\n            return React.createElement(ScriptElement, { key: routeScriptProps.src, ...rest, ...routeScriptProps, \"data-route-script\": true });\n        }),\n        scripts.map(script => {\n            return React.createElement(ScriptElement, { key: script, src: script, ...rest });\n        })));\n};\nexport function getAllAssets(loaderData, matches, assetsManifest) {\n    const routeLinks = getLinks(matches, loaderData);\n    const routeScripts = getScripts(matches, loaderData);\n    const pageAssets = getPageAssets(matches, assetsManifest);\n    const entryAssets = getEntryAssets(assetsManifest);\n    // Page assets need to be load before entry assets, so when call dynamic import won't cause duplicate js chunk loaded.\n    const assets = [].concat(routeLinks).concat(routeScripts).concat(pageAssets).concat(entryAssets);\n    if (assetsManifest.dataLoader) {\n        assets.unshift(`${assetsManifest.publicPath}${assetsManifest.dataLoader}`);\n    }\n    return assets;\n}\nexport function usePageAssets() {\n    const { loaderData, matches, assetsManifest } = useAppContext();\n    return getAllAssets(loaderData, matches, assetsManifest);\n}\n// use app context separately\nexport const Data = (props) => {\n    const { documentOnly, matches, downgrade, renderMode, serverData, loaderData, revalidate } = useAppContext();\n    const appData = useAppData();\n    const { ScriptElement = 'script', } = props;\n    const matchedIds = matches.map(match => match.route.id);\n    const routePath = matches.length > 0 ? encodeURI(getCurrentRoutePath(matches)) : '';\n    const windowContext = {\n        appData,\n        loaderData,\n        routePath,\n        downgrade,\n        matchedIds,\n        documentOnly,\n        renderMode,\n        serverData,\n        revalidate,\n    };\n    return (\n    // Disable hydration warning for csr, initial app data may not equal csr result.\n    // Should merge global context when there are multiple <Data />.\n    React.createElement(ScriptElement, { suppressHydrationWarning: documentOnly, dangerouslySetInnerHTML: { __html: `!(function () {var a = window.__ICE_APP_CONTEXT__ || {};var b = ${JSON.stringify(windowContext)};for (var k in a) {b[k] = a[k]}window.__ICE_APP_CONTEXT__=b;})();` } }));\n};\nexport const FirstChunkCache = () => {\n    return React.createElement(\"div\", { dangerouslySetInnerHTML: { __html: '<!--fcc-->' } });\n};\nexport const Main = (props) => {\n    const { main } = useDocumentContext();\n    const { appConfig } = useAppContext();\n    return (React.createElement(\"div\", { id: appConfig.app.rootId, ...props }, main));\n};\n/**\n * merge assets info for matched route\n */\nexport function getPageAssets(matches, assetsManifest) {\n    const { pages, publicPath } = assetsManifest;\n    let result = [];\n    matches.forEach(match => {\n        const { componentName } = match.route;\n        const assets = pages[componentName];\n        assets && assets.forEach(filePath => {\n            result.push(`${publicPath}${filePath}`);\n        });\n    });\n    return result;\n}\nexport function getEntryAssets(assetsManifest) {\n    const { entries, publicPath } = assetsManifest;\n    let result = [];\n    Object.values(entries).forEach(assets => {\n        result = result.concat(assets);\n    });\n    return result.map((filePath) => {\n        const prefixes = ['http:', 'https:', '//'];\n        if (prefixes.some(prefix => filePath.startsWith(prefix))) {\n            return filePath;\n        }\n        else {\n            return `${publicPath}${filePath}`;\n        }\n    });\n}\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useOutlet, useLocation } from 'react-router-dom';\nimport ActivityComponent from './Activity.js';\n// @ts-ignore\nconst Activity = React.unstable_Activity || ActivityComponent;\nconst OUTLET_LIMIT = 5;\nexport default function KeepAliveOutlet(props) {\n    if (!Activity) {\n        throw new Error('`<KeepAliveOutlet />` now requires react experimental version. Please install it first.');\n    }\n    const [outlets, setOutlets] = useState([]);\n    const location = useLocation();\n    const outlet = useOutlet();\n    const outletLimit = props.limit || OUTLET_LIMIT;\n    const keepAlivePaths = props.paths;\n    // Save the first outlet for SSR hydration.\n    const outletRef = useRef({\n        key: location.key,\n        pathname: location.pathname,\n        outlet,\n    });\n    useEffect(() => {\n        var _a;\n        // If outlets is empty, save the first outlet for SSR hydration,\n        // and should not call setOutlets to avoid re-render.\n        if (outlets.length !== 0 ||\n            ((_a = outletRef.current) === null || _a === void 0 ? void 0 : _a.pathname) !== location.pathname) {\n            let currentOutlets = outletRef.current ? [outletRef.current] : outlets;\n            // Check current path if exsist before filter, to avoid infinite setOutlets loop.\n            const result = currentOutlets.some(o => o.pathname === location.pathname);\n            if (keepAlivePaths && keepAlivePaths.length > 0) {\n                currentOutlets = currentOutlets.filter(o => keepAlivePaths.includes(o.pathname));\n            }\n            if (!result) {\n                setOutlets([\n                    ...currentOutlets,\n                    {\n                        key: location.key,\n                        pathname: location.pathname,\n                        outlet,\n                    },\n                ].slice(-outletLimit));\n                outletRef.current = null;\n            }\n        }\n    }, [location.pathname, location.key, outlet, outlets, outletLimit, keepAlivePaths]);\n    // Render initail outlet for SSR hydration.\n    const renderOutlets = outlets.length === 0 ? [outletRef.current] : outlets;\n    return (React.createElement(React.Fragment, null, renderOutlets.map((o) => {\n        return (React.createElement(Activity, { key: o.key, mode: location.pathname === o.pathname ? 'visible' : 'hidden' }, o.outlet));\n    })));\n}\n","import { useLoaderData } from 'react-router-dom';\nfunction useData() {\n    var _a;\n    return (_a = useLoaderData()) === null || _a === void 0 ? void 0 : _a.data;\n}\nfunction useConfig() {\n    var _a;\n    return (_a = useLoaderData()) === null || _a === void 0 ? void 0 : _a.pageConfig;\n}\nexport { useData, useConfig, };\n","import * as React from 'react';\nexport default function RouteWrapper(props) {\n    const { wrappers = [], id, isLayout, routeExports } = props;\n    // layout should only be wrapped by Wrapper with `layout: true`\n    const filtered = isLayout ? wrappers.filter(wrapper => wrapper.layout === true) : wrappers;\n    const RouteWrappers = filtered.map(item => item.Wrapper);\n    let element;\n    if (RouteWrappers.length) {\n        element = RouteWrappers.reduce((preElement, CurrentWrapper) => (React.createElement(CurrentWrapper, { routeId: id, routeExports: routeExports }, preElement)), props.children);\n    }\n    else {\n        element = props.children;\n    }\n    return element;\n}\n","import * as React from 'react';\nimport { useAppContext } from './AppContext.js';\nimport proxyData from './proxyData.js';\nconst LOADER = '__ICE_SUSPENSE_LOADER__';\nconst isClient = typeof window !== 'undefined' && 'onload' in window;\nconst SuspenseContext = React.createContext(undefined);\nconst getHydrateData = (id) => {\n    let data = null;\n    const loaderData = isClient && window[LOADER];\n    let hasHydrateData;\n    if (loaderData) {\n        // Compatible with the old version which use Map to store data.\n        if (loaderData.has) {\n            hasHydrateData = loaderData.has(id);\n            data = window[LOADER].get(id);\n        }\n        else {\n            hasHydrateData = Object.prototype.hasOwnProperty.call(loaderData, id);\n            // If hasHydrateData is false, data will be undefined.\n            data = window[LOADER][id];\n        }\n    }\n    return {\n        hasHydrateData,\n        data,\n    };\n};\nexport function useSuspenseData(request) {\n    const appContext = useAppContext();\n    const { requestContext } = appContext;\n    const suspenseState = React.useContext(SuspenseContext);\n    const { data, done, promise, update, error, id } = suspenseState;\n    const { hasHydrateData, data: hydrateData } = getHydrateData(id);\n    let thenable = null;\n    if (!hasHydrateData && !error && !done && !promise && request) {\n        thenable = request(requestContext);\n        thenable.then((response) => {\n            update({\n                done: true,\n                data: response,\n                promise: null,\n            });\n        }).catch(e => {\n            update({\n                done: true,\n                error: e,\n                promise: null,\n            });\n        });\n    }\n    React.useEffect(() => {\n        // Update state in useEffect, otherwise it will cause bad setState warning.\n        if (thenable) {\n            update({\n                promise: thenable,\n            });\n        }\n    }, [thenable, update]);\n    // 1. Use data from server side directly when hydrate.\n    if (hasHydrateData) {\n        return hydrateData;\n    }\n    // 2. Check data request error, if error throw it to react.\n    if (error) {\n        throw error;\n    }\n    // 3. If request is done, return data.\n    if (done) {\n        if (process.env.NODE_ENV === 'development' && typeof data === 'object') {\n            return proxyData(data);\n        }\n        return data;\n    }\n    // 4. If request is pending, throw the promise to react.\n    if (promise) {\n        throw promise;\n    }\n    // 5. If no request, return null.\n    if (!request) {\n        return null;\n    }\n    if (!isClient) {\n        // 6. Create a promise for the request and throw it to react.\n        update({\n            promise: thenable,\n        });\n    }\n    throw thenable;\n}\nexport function withSuspense(Component) {\n    return (props) => {\n        const { fallback, id, ...componentProps } = props;\n        const [suspenseState, updateSuspenseData] = React.useState({\n            id: id,\n            data: null,\n            done: false,\n            promise: null,\n            error: null,\n            update,\n        });\n        function update(value) {\n            let newState;\n            if (isClient) {\n                newState = Object.assign({}, suspenseState, value);\n            }\n            else {\n                // For SSR, setState is not working, so here we need to update the state manually.\n                newState = Object.assign(suspenseState, value);\n            }\n            // For CSR.\n            updateSuspenseData(newState);\n        }\n        return (React.createElement(React.Suspense, { fallback: fallback || null },\n            React.createElement(SuspenseContext.Provider, { value: suspenseState },\n                React.createElement(Component, { ...componentProps }),\n                React.createElement(Data, { id: id }),\n                React.createElement(\"script\", { dangerouslySetInnerHTML: {\n                        __html: `window.dispatchEvent(new CustomEvent('ice-suspense', { detail: { id: ${id ? `'${id}'` : undefined} } }));`,\n                    } }))));\n    };\n}\nfunction Data(props) {\n    const data = useSuspenseData();\n    return (React.createElement(\"script\", { id: props.id && `suspense-script-${props.id}`, dangerouslySetInnerHTML: {\n            __html: `!function(){window['${LOADER}'] = window['${LOADER}'] || {};window['${LOADER}']['${props.id}'] = ${JSON.stringify(data)}}();`,\n        } }));\n}\n","const defaultAppConfig = {\n    app: {\n        strict: false,\n        rootId: 'ice-container',\n    },\n    router: {\n        type: 'browser',\n    },\n};\nexport default function getAppConfig(appExport) {\n    const appConfig = (appExport === null || appExport === void 0 ? void 0 : appExport.default) || {};\n    const { app, router, ...others } = appConfig;\n    return {\n        app: {\n            ...defaultAppConfig.app,\n            ...(app || {}),\n        },\n        router: {\n            ...defaultAppConfig.router,\n            ...(router || {}),\n        },\n        ...others,\n    };\n}\nexport function defineAppConfig(appConfigOrDefineAppConfig) {\n    if (typeof appConfigOrDefineAppConfig === 'function') {\n        return appConfigOrDefineAppConfig();\n    }\n    else {\n        return appConfigOrDefineAppConfig;\n    }\n}\n","import { callDataLoader } from './dataLoader.js';\n/**\n * Call the getData of app config.\n */\nasync function getAppData(appExport, requestContext) {\n    const hasGlobalLoader = typeof window !== 'undefined' && window.__ICE_DATA_LOADER__;\n    const globalLoader = hasGlobalLoader ? window.__ICE_DATA_LOADER__ : null;\n    if (globalLoader) {\n        return await globalLoader.getData('__app');\n    }\n    const appDataLoaderConfig = appExport === null || appExport === void 0 ? void 0 : appExport.dataLoader;\n    if (!appDataLoaderConfig) {\n        return null;\n    }\n    if (process.env.ICE_CORE_REMOVE_DATA_LOADER !== 'true') {\n        let loader;\n        if (typeof appDataLoaderConfig === 'function' || Array.isArray(appDataLoaderConfig)) {\n            loader = appDataLoaderConfig;\n        }\n        else {\n            loader = appDataLoaderConfig.loader;\n        }\n        return await callDataLoader(loader, requestContext);\n    }\n}\nexport { getAppData, };\n","import getRequestContext from './requestContext.js';\nexport function defineDataLoader(dataLoader, options) {\n    return {\n        loader: dataLoader,\n        options,\n    };\n}\nexport function defineServerDataLoader(dataLoader, options) {\n    return {\n        loader: dataLoader,\n        options,\n    };\n}\nexport function defineStaticDataLoader(dataLoader) {\n    return {\n        loader: dataLoader,\n    };\n}\n/**\n * Custom fetcher for load static data loader config.\n * Set globally to avoid passing this fetcher too deep.\n */\nlet dataLoaderFetcher;\nexport function setFetcher(customFetcher) {\n    dataLoaderFetcher = customFetcher;\n}\n/**\n * Custom decorator for deal with data loader.\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nlet dataLoaderDecorator = (dataLoader, id) => {\n    return dataLoader;\n};\nexport function setDecorator(customDecorator) {\n    dataLoaderDecorator = customDecorator;\n}\n/**\n * Parse template for static dataLoader.\n */\nexport function parseTemplate(config) {\n    const queryParams = {};\n    const getQueryParams = () => {\n        if (Object.keys(queryParams).length === 0) {\n            if (location.search.includes('?')) {\n                location.search.substring(1).split('&').forEach(query => {\n                    const res = query.split('=');\n                    // ?test=1&hello=world\n                    if (res[0] !== undefined && res[1] !== undefined) {\n                        queryParams[res[0]] = res[1];\n                    }\n                });\n            }\n        }\n        return queryParams;\n    };\n    const cookie = {};\n    const getCookie = () => {\n        if (Object.keys(cookie).length === 0) {\n            document.cookie.split(';').forEach(c => {\n                const [key, value] = c.split('=');\n                if (key !== undefined && value !== undefined) {\n                    cookie[key.trim()] = value.trim();\n                }\n            });\n        }\n        return cookie;\n    };\n    // Match all template of query cookie and storage.\n    let strConfig = JSON.stringify(config) || '';\n    const regexp = /\\$\\{(queryParams|cookie|storage)(\\.(\\w|-)+)?}/g;\n    let cap = [];\n    let matched = [];\n    while ((cap = regexp.exec(strConfig)) !== null) {\n        matched.push(cap);\n    }\n    matched.forEach(item => {\n        const [origin, key, value] = item;\n        if (item && origin && key && value && value.startsWith('.')) {\n            if (key === 'queryParams') {\n                // Replace query params.\n                strConfig = strConfig.replace(origin, getQueryParams()[value.substring(1)] || '');\n            }\n            else if (key === 'cookie') {\n                // Replace cookie.\n                strConfig = strConfig.replace(origin, getCookie()[value.substring(1)] || '');\n            }\n            else if (key === 'storage') {\n                // Replace storage.\n                strConfig = strConfig.replace(origin, localStorage.getItem(value.substring(1)) || '');\n            }\n        }\n    });\n    // Replace url.\n    strConfig = strConfig.replace('${url}', location.href);\n    return JSON.parse(strConfig);\n}\nexport function loadDataByCustomFetcher(config) {\n    let parsedConfig = config;\n    try {\n        // Not parse template in SSG/SSR.\n        if (import.meta.renderer === 'client') {\n            parsedConfig = parseTemplate(config);\n        }\n    }\n    catch (error) {\n        console.error('parse template error: ', error);\n    }\n    return dataLoaderFetcher(parsedConfig);\n}\n/**\n * Handle for different dataLoader.\n */\nexport function callDataLoader(dataLoader, requestContext) {\n    if (Array.isArray(dataLoader)) {\n        const loaders = dataLoader.map((loader, index) => {\n            return typeof loader === 'object' ? loadDataByCustomFetcher(loader) : dataLoaderDecorator(loader, index)(requestContext);\n        });\n        return loaders;\n    }\n    if (typeof dataLoader === 'object') {\n        return loadDataByCustomFetcher(dataLoader);\n    }\n    return dataLoaderDecorator(dataLoader)(requestContext);\n}\nconst cache = new Map();\n/**\n * Start getData once data-loader.js is ready in client, and set to cache.\n */\nfunction loadInitialDataInClient(loaders) {\n    const context = window.__ICE_APP_CONTEXT__ || {};\n    const matchedIds = context.matchedIds || [];\n    const loaderData = context.loaderData || {};\n    const { renderMode } = context;\n    const ids = ['__app'].concat(matchedIds);\n    ids.forEach(id => {\n        var _a;\n        const dataFromSSR = (_a = loaderData[id]) === null || _a === void 0 ? void 0 : _a.data;\n        if (dataFromSSR) {\n            cache.set(renderMode === 'SSG' ? `${id}_ssg` : id, {\n                value: dataFromSSR,\n            });\n            if (renderMode === 'SSR') {\n                return;\n            }\n        }\n        const dataLoaderConfig = loaders[id];\n        if (dataLoaderConfig) {\n            const requestContext = getRequestContext(window.location);\n            const { loader } = dataLoaderConfig;\n            const promise = callDataLoader(loader, requestContext);\n            cache.set(id, {\n                value: promise,\n            });\n        }\n    });\n}\n/**\n * Init data loader in client side.\n * Load initial data and register global loader.\n * In order to load data, JavaScript modules, CSS and other assets in parallel.\n */\nasync function init(loaders, options) {\n    const { fetcher, decorator, runtimeModules, appExport, } = options;\n    const runtimeApi = {\n        appContext: {\n            appExport,\n        },\n    };\n    if (runtimeModules) {\n        await Promise.all(runtimeModules.map(module => {\n            const runtimeModule = (module.default || module);\n            return runtimeModule(runtimeApi);\n        }).filter(Boolean));\n    }\n    if (fetcher) {\n        setFetcher(fetcher);\n    }\n    if (decorator) {\n        setDecorator(decorator);\n    }\n    try {\n        loadInitialDataInClient(loaders);\n    }\n    catch (error) {\n        console.error('Load initial data error: ', error);\n    }\n    window.__ICE_DATA_LOADER__ = {\n        getLoader: (id) => {\n            return loaders[id];\n        },\n        getData: (id, options) => {\n            let result;\n            // First render for ssg use data from build time, second render for ssg will use data from data loader.\n            const cacheKey = `${id}${(options === null || options === void 0 ? void 0 : options.renderMode) === 'SSG' ? '_ssg' : ''}`;\n            // In CSR, all dataLoader is called by global data loader to avoid bundle dataLoader in page bundle duplicate.\n            result = cache.get(cacheKey);\n            // Always fetch new data after cache is been used.\n            cache.delete(cacheKey);\n            // Already send data request.\n            if (result) {\n                return result.value;\n            }\n            const dataLoaderConfig = loaders[id];\n            // No data loader.\n            if (!dataLoaderConfig) {\n                return null;\n            }\n            // Call dataLoader.\n            const { loader } = dataLoaderConfig;\n            return callDataLoader(loader, (options === null || options === void 0 ? void 0 : options.requestContext) || getRequestContext(window.location));\n        },\n    };\n}\nexport const dataLoader = {\n    init,\n};\nexport default dataLoader;\n","import React, { Suspense, lazy } from 'react';\nimport useMounted from './useMounted.js';\nconst isServer = import.meta.renderer === 'server';\n// Normalize loader to return the module as form { default: Component } for `React.lazy`.\nfunction convertModule(mod) {\n    return { default: (mod === null || mod === void 0 ? void 0 : mod.default) || mod };\n}\nconst DefaultFallback = () => null;\nexport function dynamic(loader, option) {\n    const { ssr = true, fallback = DefaultFallback } = option || {};\n    let realLoader;\n    // convert dynamic(import('xxx')) to dynamic(() => import('xxx'))\n    if (loader instanceof Promise) {\n        realLoader = () => loader;\n    }\n    else if (typeof loader === 'function') {\n        realLoader = loader;\n    }\n    if (!realLoader)\n        return DefaultFallback;\n    const Fallback = fallback;\n    if (!ssr && isServer) {\n        return () => React.createElement(Fallback, null);\n    }\n    const LazyComp = lazy(() => realLoader().then(convertModule));\n    return (props) => {\n        const hasMounted = useMounted();\n        return ssr || hasMounted ? (React.createElement(Suspense, { fallback: React.createElement(Fallback, null) },\n            React.createElement(LazyComp, { ...props }))) : (React.createElement(Fallback, null));\n    };\n}\n","// Value of history will be modified after render Router.\nlet routerHistory = null;\nfunction setHistory(customHistory) {\n    routerHistory = customHistory;\n}\nexport { routerHistory, setHistory, };\n","import Runtime from './runtime.js';\nimport runClientApp from './runClientApp.js';\nimport { useAppContext as useInternalAppContext, useAppData, AppContextProvider } from './AppContext.js';\nimport { getAppData } from './appData.js';\nimport { useData, useConfig } from './RouteContext.js';\nimport { Meta, Title, Links, Scripts, FirstChunkCache, Main, Data, usePageAssets, } from './Document.js';\nimport dataLoader, { defineDataLoader, defineServerDataLoader, defineStaticDataLoader, callDataLoader } from './dataLoader.js';\nimport getRequestContext from './requestContext.js';\nimport AppErrorBoundary from './AppErrorBoundary.js';\nimport getAppConfig, { defineAppConfig } from './appConfig.js';\nimport { routerHistory as history } from './history.js';\nimport KeepAliveOutlet from './KeepAliveOutlet.js';\nimport { useActive } from './Activity.js';\nimport ClientOnly from './ClientOnly.js';\nimport useMounted from './useMounted.js';\nimport usePageLifecycle from './usePageLifecycle.js';\nimport { withSuspense, useSuspenseData } from './Suspense.js';\nimport { createRouteLoader, WrapRouteComponent, RouteErrorComponent, Await } from './routes.js';\nimport { dynamic } from './dynamic.js';\nfunction useAppContext() {\n    console.warn('import { useAppContext } from \\'@ice/runtime\\'; is deprecated, please use import { useAppContext } from \\'ice\\'; instead.');\n    return useInternalAppContext();\n}\nfunction usePublicAppContext() {\n    const context = useInternalAppContext();\n    const { appConfig, routePath, downgrade, documentOnly, renderMode, } = context;\n    return {\n        appConfig,\n        routePath,\n        downgrade,\n        documentOnly,\n        renderMode,\n    };\n}\nfunction useDocumentData() {\n    const context = useInternalAppContext();\n    return context.documentData;\n}\n// @TODO: remove unstable prefix or refactor.\n// eslint-disable-next-line\nexport const unstable_useDocumentData = useDocumentData;\nexport { getAppConfig, defineAppConfig, Runtime, runClientApp, AppContextProvider, \n/**\n * @deprecated\n * Please use import { useAppContext } from \\'ice\\'; instead.\n */\nuseAppContext, usePublicAppContext, useAppData, useData, getAppData, defineDataLoader, defineServerDataLoader, defineStaticDataLoader, useConfig, Meta, Title, Links, Scripts, FirstChunkCache, Data, Main, usePageAssets, \n// API for data-loader.\ndataLoader, callDataLoader, getRequestContext, history, dynamic, useActive, KeepAliveOutlet, AppErrorBoundary, ClientOnly, useMounted, usePageLifecycle, withSuspense, useSuspenseData, Await, createRouteLoader, WrapRouteComponent, RouteErrorComponent, };\nexport { Link, NavLink, Outlet, useParams, useSearchParams, useLocation, useNavigate, useNavigation, useRevalidator, useAsyncValue, } from 'react-router-dom';\n","export * from '@ice/jsx-runtime/jsx-dev-runtime';\n","import { matchRoutes as originMatchRoutes } from 'react-router-dom';\nimport { matchRoutes as matchRoutesSingle } from './singleRouter.js';\nexport default function matchRoutes(routes, location, basename) {\n    const matchRoutesFn = process.env.ICE_CORE_ROUTER === 'true' ? originMatchRoutes : matchRoutesSingle;\n    let matches = matchRoutesFn(routes, location, basename);\n    if (!matches)\n        return [];\n    return matches.map(({ params, pathname, pathnameBase, route }) => ({\n        params,\n        pathname,\n        route: route,\n        pathnameBase,\n    }));\n}\n","function proxyData(data) {\n    if (typeof Proxy === 'function') {\n        const errorMessage = 'Do not mutate suspense data directly, it will cause unexpected behavior.';\n        const handler = {\n            deleteProperty(target, prop) {\n                console.error(errorMessage);\n                delete target[prop];\n                return true;\n            },\n            get(target, prop, receiver) {\n                const value = Reflect.get(target, prop, receiver);\n                if (typeof value === 'object' && value !== null) {\n                    return new Proxy(value, handler);\n                }\n                return value;\n            },\n            set(target, prop, value, receiver) {\n                if (prop === 'length' && Array.isArray(target)) {\n                    if (value < target.length) {\n                        console.error(errorMessage, `Popping value \"${target[target.length - 1]}\" from array`);\n                    }\n                    else {\n                        console.error(errorMessage, `Pushing value \"${value}\" to array`);\n                    }\n                }\n                else {\n                    console.error(errorMessage, `Setting property \"${String(prop)}\" to \"${value}\"`);\n                }\n                Reflect.set(target, prop, value, receiver);\n                return true;\n            },\n        };\n        return new Proxy(data, handler);\n    }\n    else {\n        console.log('Recommend using the latest Chrome to debug suspense data.');\n        return data;\n    }\n}\nexport default proxyData;\n","function isRuntimeWarning(error) {\n    return error instanceof Error ? [\n        'This Suspense boundary received an update before it finished hydrating.',\n    ].some((message) => { var _a; return (_a = error === null || error === void 0 ? void 0 : error.message) === null || _a === void 0 ? void 0 : _a.includes(message); }) : false;\n}\nexport const defaultOnRecoverableError = typeof reportError === 'function'\n    ? reportError\n    : function (error) {\n        console['error'](error);\n    };\nconst reportRecoverableError = (error, errorStack, options) => {\n    const ignoreError = (options === null || options === void 0 ? void 0 : options.ignoreRuntimeWarning) && isRuntimeWarning(error);\n    if (!ignoreError) {\n        if (process.env.NODE_ENV === 'production') {\n            // Report error stack in production by default.\n            if ((errorStack === null || errorStack === void 0 ? void 0 : errorStack.componentStack) && error instanceof Error) {\n                const detailError = new Error(error.message);\n                detailError.name = error.name;\n                detailError.stack = `${error.name}: ${error.message}${errorStack.componentStack}`;\n                defaultOnRecoverableError(detailError);\n                return;\n            }\n        }\n        // Fallback to default error handler.\n        defaultOnRecoverableError(error);\n    }\n};\nexport default reportRecoverableError;\n","/**\n * context for getData both in server and client side.\n */\nexport default function getRequestContext(location, serverContext = {}) {\n    var _a;\n    const { pathname, search } = location;\n    // Use query form server context first to avoid unnecessary parsing.\n    // @ts-ignore\n    const query = ((_a = serverContext === null || serverContext === void 0 ? void 0 : serverContext.req) === null || _a === void 0 ? void 0 : _a.query) || parseSearch(search);\n    const requestContext = {\n        ...(serverContext || {}),\n        pathname,\n        query,\n    };\n    return requestContext;\n}\n/**\n * Search string to object\n * URLSearchParams is not compatible with iOS9 and IE.\n */\nexport function parseSearch(search) {\n    // remove first '?'\n    if (search.indexOf('?') === 0) {\n        search = search.slice(1);\n    }\n    const result = {};\n    let pairs = search.split('&');\n    for (let j = 0; j < pairs.length; j++) {\n        const value = pairs[j];\n        const index = value.indexOf('=');\n        if (index > -1) {\n            const k = value.slice(0, index);\n            const v = value.slice(index + 1);\n            result[k] = v;\n        }\n        else if (value) {\n            result[value] = '';\n        }\n    }\n    return result;\n}\n","import React, { Suspense } from 'react';\nimport { useRouteError, defer, Await as ReactRouterAwait } from 'react-router-dom';\nimport RouteWrapper from './RouteWrapper.js';\nimport { useAppContext } from './AppContext.js';\nimport { callDataLoader } from './dataLoader.js';\nimport { updateRoutesConfig } from './routesConfig.js';\nimport { parseSearch } from './requestContext.js';\nexport function getRoutesPath(routes, parentPath = '') {\n    let paths = [];\n    routes.forEach((route) => {\n        const pathId = `${parentPath}/${route.path || ''}`.replace('//', '/');\n        if (route.children) {\n            paths.push(...getRoutesPath(route.children, pathId));\n        }\n        else {\n            paths.push(pathId);\n        }\n    });\n    return paths.map(str => str.replace('//', '/'));\n}\nexport async function loadRouteModule(route, routeModulesCache = {}) {\n    const { id, lazy } = route;\n    if (import.meta.renderer === 'client' && // Don't use module cache and should load again in ssr. Ref: https://github.com/ice-lab/ice-next/issues/82\n        id in routeModulesCache) {\n        return routeModulesCache[id];\n    }\n    try {\n        const routeModule = await lazy();\n        routeModulesCache[id] = routeModule;\n        return routeModule;\n    }\n    catch (error) {\n        console.error(`Failed to load route module: ${id}.`);\n        // Re-throw error for better debugging.\n        throw error;\n    }\n}\nexport async function loadRouteModules(routes, originRouteModules = {}) {\n    const routeModules = { ...originRouteModules };\n    for (const route of routes) {\n        const routeModule = await loadRouteModule(route, routeModules);\n        routeModules[route.id] = routeModule;\n    }\n    return routeModules;\n}\n// Wrap route component with runtime wrappers.\nexport function WrapRouteComponent(options) {\n    const { routeId, isLayout, routeExports } = options;\n    const { RouteWrappers } = useAppContext();\n    return (React.createElement(RouteWrapper, { routeExports: routeExports, id: routeId, isLayout: isLayout, wrappers: RouteWrappers },\n        React.createElement(routeExports.default, null)));\n}\nexport function RouteComponent({ id }) {\n    // get current route component from latest routeModules\n    const { routeModules } = useAppContext();\n    const { Component } = routeModules[id] || {};\n    if (process.env.NODE_ENV === 'development') {\n        if (!Component) {\n            throw new Error(`Route \"${id}\" has no component! Please go add a \\`default\\` export in the route module file.\\n` +\n                'If you were trying to navigate or submit to a resource route, use `<a>` instead of `<Link>` or `<Form reloadDocument>`.');\n        }\n    }\n    return React.createElement(Component, null);\n}\nfunction ErrorComponentWithRouter() {\n    const error = useRouteError();\n    if (error) {\n        // Re-throws the error so it can be caught by App Error Boundary.\n        throw error;\n    }\n    return React.createElement(React.Fragment, null);\n}\nexport function RouteErrorComponent() {\n    return process.env.ICE_CORE_ROUTER === 'true' ? React.createElement(ErrorComponentWithRouter, null) : React.createElement(React.Fragment, null);\n}\nexport function Await(props) {\n    return process.env.ICE_CORE_ROUTER === 'true' ? (React.createElement(Suspense, { fallback: props.fallback },\n        React.createElement(ReactRouterAwait, { resolve: props.resolve, errorElement: props.errorElement }, props.children))) : React.createElement(React.Fragment, null, props.children);\n}\nfunction getClientLoaderContext(url) {\n    // Compatible with browsers do not support URL.\n    const patterns = {\n        protocol: '(?:([^:/?#]+):)',\n        authority: '(?://([^/?#]*))',\n        path: '([^?#]*)',\n        query: '(\\\\?[^#]*)',\n        hash: '(#.*)',\n    };\n    const urlRegExp = new RegExp(`^${patterns.protocol}?${patterns.authority}?${patterns.path}${patterns.query}?${patterns.hash}?`);\n    const urlMatch = urlRegExp.exec(url);\n    return urlMatch ? {\n        pathname: urlMatch[3] || '',\n        query: parseSearch(urlMatch[4] || ''),\n    } : null;\n}\nexport function createRouteLoader(options) {\n    let dataLoaderConfig;\n    const { dataLoader, pageConfig, staticDataLoader, serverDataLoader } = options.module;\n    const { requestContext: defaultRequestContext, renderMode, routeId } = options;\n    const globalLoader = (typeof window !== 'undefined' && window.__ICE_DATA_LOADER__) ? window.__ICE_DATA_LOADER__ : null;\n    if (import.meta.renderer !== 'client' || process.env.ICE_CORE_REMOVE_DATA_LOADER !== 'true') {\n        if (globalLoader) {\n            dataLoaderConfig = globalLoader.getLoader(routeId);\n        }\n        else if (renderMode === 'SSG') {\n            dataLoaderConfig = staticDataLoader;\n        }\n        else if (renderMode === 'SSR') {\n            dataLoaderConfig = serverDataLoader || dataLoader;\n        }\n        else {\n            dataLoaderConfig = dataLoader;\n        }\n    }\n    if (!dataLoaderConfig) {\n        return async () => {\n            const loaderData = {\n                pageConfig: pageConfig ? pageConfig({}) : {},\n            };\n            if (import.meta.renderer === 'client' && process.env.ICE_CORE_REMOVE_ROUTES_CONFIG !== 'true') {\n                await updateRoutesConfig(loaderData);\n            }\n            return loaderData;\n        };\n    }\n    // if ICE_CORE_REMOVE_DATA_LOADER is true, dataLoaderConfig should be null and it already return above.\n    // dataLoader should be always called in server side because of the serverDataLoader.\n    if (import.meta.renderer !== 'client' || process.env.ICE_CORE_REMOVE_DATA_LOADER !== 'true') {\n        let loader;\n        let loaderOptions;\n        // Compat dataLoaderConfig not return by defineDataLoader.\n        if (typeof dataLoaderConfig === 'function' || Array.isArray(dataLoaderConfig)) {\n            loader = dataLoaderConfig;\n        }\n        else {\n            loader = dataLoaderConfig.loader;\n            loaderOptions = dataLoaderConfig.options;\n        }\n        const getData = (requestContext) => {\n            let routeData;\n            if (import.meta.renderer !== 'client' || process.env.ICE_CORE_REMOVE_DATA_LOADER !== 'true') {\n                if (globalLoader) {\n                    routeData = globalLoader.getData(routeId, { renderMode, requestContext });\n                }\n                else {\n                    routeData = callDataLoader(loader, requestContext);\n                }\n            }\n            return routeData;\n        };\n        // Async dataLoader.\n        if (loaderOptions === null || loaderOptions === void 0 ? void 0 : loaderOptions.defer) {\n            if (process.env.ICE_CORE_ROUTER === 'true') {\n                return async (params) => {\n                    const promise = getData(import.meta.renderer === 'client' ? getClientLoaderContext(params.request.url) : defaultRequestContext);\n                    return defer({\n                        data: promise,\n                        // Call pageConfig without data.\n                        pageConfig: pageConfig ? pageConfig({}) : {},\n                    });\n                };\n            }\n            else {\n                throw new Error('DataLoader: defer is not supported in single router mode.');\n            }\n        }\n        // Await dataLoader before render.\n        return async (params) => {\n            const result = getData(import.meta.renderer === 'client' && params ? getClientLoaderContext(params.request.url) : defaultRequestContext);\n            let routeData;\n            try {\n                if (Array.isArray(result)) {\n                    routeData = await Promise.all(result);\n                }\n                else if (result instanceof Promise) {\n                    routeData = await result;\n                }\n                else {\n                    routeData = result;\n                }\n            }\n            catch (error) {\n                if (import.meta.renderer === 'client') {\n                    console.error('DataLoader: getData error.\\n', error);\n                    routeData = {\n                        message: 'DataLoader: getData error.',\n                        error,\n                    };\n                }\n                else {\n                    // Throw to trigger downgrade.\n                    throw error;\n                }\n            }\n            const routeConfig = pageConfig ? pageConfig({ data: routeData }) : {};\n            const loaderData = {\n                data: routeData,\n                pageConfig: routeConfig,\n            };\n            // Update routes config when render mode is CSR.\n            if (import.meta.renderer === 'client' && process.env.ICE_CORE_REMOVE_ROUTES_CONFIG !== 'true') {\n                await updateRoutesConfig(loaderData);\n            }\n            return loaderData;\n        };\n    }\n}\n","export function getMeta(matches, loadersData) {\n    return getMergedValue('meta', matches, loadersData) || [];\n}\nexport function getLinks(matches, loadersData) {\n    return getMergedValue('links', matches, loadersData) || [];\n}\nexport function getScripts(matches, loadersData) {\n    return getMergedValue('scripts', matches, loadersData) || [];\n}\nexport function getTitle(matches, loadersData) {\n    return getMergedValue('title', matches, loadersData);\n}\n/**\n * merge value for each matched route\n */\nfunction getMergedValue(key, matches, loadersData) {\n    var _a;\n    let result;\n    for (let match of matches) {\n        const routeId = match.route.id;\n        const data = (_a = loadersData[routeId]) === null || _a === void 0 ? void 0 : _a.pageConfig;\n        const value = data === null || data === void 0 ? void 0 : data[key];\n        if (Array.isArray(value)) {\n            // merge array\n            result = result ? result.concat(value) : value;\n        }\n        else if (value) {\n            // overwrite\n            result = value;\n        }\n    }\n    return result;\n}\n/**\n * update routes config to document.\n */\nexport async function updateRoutesConfig(loaderData) {\n    const routeConfig = loaderData === null || loaderData === void 0 ? void 0 : loaderData.pageConfig;\n    const title = routeConfig === null || routeConfig === void 0 ? void 0 : routeConfig.title;\n    if (title) {\n        document.title = title;\n    }\n    const meta = (routeConfig === null || routeConfig === void 0 ? void 0 : routeConfig.meta) || [];\n    const links = (routeConfig === null || routeConfig === void 0 ? void 0 : routeConfig.links) || [];\n    const scripts = (routeConfig === null || routeConfig === void 0 ? void 0 : routeConfig.scripts) || [];\n    await Promise.all([\n        updateMeta(meta),\n        updateAssets('link', links),\n        updateAssets('script', scripts),\n    ]);\n}\n/**\n * find meta by 'next-meta-count' and update it\n */\nfunction updateMeta(meta) {\n    var _a;\n    const headEl = document.head;\n    const metaCountEl = headEl.querySelector('meta[name=ice-meta-count]');\n    if (!metaCountEl) {\n        console.warn('Can not find meta element.');\n        return;\n    }\n    const headCount = Number(metaCountEl.content);\n    const oldTags = [];\n    for (let i = 0, j = metaCountEl.previousElementSibling; i < headCount; i++, j = j === null || j === void 0 ? void 0 : j.previousElementSibling) {\n        if (((_a = j === null || j === void 0 ? void 0 : j.tagName) === null || _a === void 0 ? void 0 : _a.toLowerCase()) === 'meta') {\n            oldTags.push(j);\n        }\n    }\n    const newTags = meta.map(item => {\n        return reactElementToDOM('meta', item);\n    });\n    oldTags.forEach((t) => t.parentNode.removeChild(t));\n    newTags.forEach((t) => headEl.insertBefore(t, metaCountEl));\n    metaCountEl.content = (newTags.length).toString();\n}\nconst DOMAttributeNames = {\n    acceptCharset: 'accept-charset',\n    className: 'class',\n    htmlFor: 'for',\n    httpEquiv: 'http-equiv',\n    noModule: 'noModule',\n};\n/**\n * map element props to dom\n * https://github.com/vercel/next.js/blob/canary/packages/next/client/head-manager.ts#L9\n */\nfunction reactElementToDOM(type, props) {\n    const el = document.createElement(type);\n    for (const p in props) {\n        // we don't render undefined props to the DOM\n        if (props[p] === undefined)\n            continue;\n        const attr = DOMAttributeNames[p] || p.toLowerCase();\n        if (type === 'script' &&\n            (attr === 'async' || attr === 'defer' || attr === 'noModule')) {\n            el[attr] = !!props[p];\n        }\n        else {\n            el.setAttribute(attr, props[p]);\n        }\n    }\n    return el;\n}\nconst looseToArray = (input) => [].slice.call(input);\n/**\n * Load links/scripts for current page.\n * Remove links/scripts for the last page.\n */\nasync function updateAssets(type, assets) {\n    const oldTags = looseToArray(document.querySelectorAll(`${type}[data-route-${type}]`));\n    await Promise.all(assets.map((asset) => {\n        return appendTags(type, asset);\n    }));\n    oldTags.forEach((tag) => {\n        var _a;\n        // In some parcel case oldTags may be removed by other routes.\n        (_a = tag.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(tag);\n    });\n}\nasync function appendTags(type, props) {\n    return new Promise((resolve, reject) => {\n        const tag = reactElementToDOM(type, props);\n        tag.setAttribute(`data-route-${type}`, 'true');\n        tag.onload = () => {\n            resolve(null);\n        };\n        tag.onerror = () => {\n            reject();\n        };\n        document.head.appendChild(tag);\n    });\n}\n","import React from 'react';\nimport * as ReactDOM from 'react-dom/client';\nimport { createHashHistory, createBrowserHistory, createMemoryHistory } from '@remix-run/router';\nimport { createHistory as createHistorySingle, getSingleRoute } from './singleRouter.js';\nimport { setHistory } from './history.js';\nimport Runtime from './runtime.js';\nimport { getAppData } from './appData.js';\nimport { getRoutesPath, loadRouteModule } from './routes.js';\nimport getRequestContext from './requestContext.js';\nimport getAppConfig from './appConfig.js';\nimport matchRoutes from './matchRoutes.js';\nimport { setFetcher, setDecorator } from './dataLoader.js';\nimport ClientRouter from './ClientRouter.js';\nimport addLeadingSlash from './utils/addLeadingSlash.js';\nimport { AppContextProvider } from './AppContext.js';\nimport { deprecatedHistory } from './utils/deprecatedHistory.js';\nimport reportRecoverableError from './reportRecoverableError.js';\nexport default async function runClientApp(options) {\n    const { app, createRoutes, runtimeModules, basename, hydrate, memoryRouter, runtimeOptions, dataLoaderFetcher, dataLoaderDecorator, } = options;\n    const windowContext = window.__ICE_APP_CONTEXT__ || {};\n    const assetsManifest = window.__ICE_ASSETS_MANIFEST__ || {};\n    let { appData, loaderData, routePath, downgrade, documentOnly, renderMode, serverData, revalidate, } = windowContext;\n    const formattedBasename = addLeadingSlash(basename);\n    const requestContext = getRequestContext(window.location);\n    const appConfig = getAppConfig(app);\n    const routes = createRoutes ? createRoutes({\n        requestContext,\n        renderMode: 'CSR',\n    }) : [];\n    const historyOptions = {\n        memoryRouter,\n        initialEntry: routePath,\n        routes,\n    };\n    const history = createHistory(appConfig, historyOptions);\n    // Set history for import it from ice.\n    setHistory(deprecatedHistory(history));\n    const appContext = {\n        appExport: app,\n        routes,\n        appConfig,\n        appData,\n        loaderData,\n        assetsManifest,\n        basename: formattedBasename,\n        routePath,\n        renderMode,\n        requestContext,\n        serverData,\n        revalidate,\n    };\n    const runtime = new Runtime(appContext, runtimeOptions);\n    runtime.setAppRouter(ClientRouter);\n    // Load static module before getAppData,\n    // so we can call request in in getAppData which provide by `plugin-request`.\n    if (runtimeModules.statics) {\n        await Promise.all(runtimeModules.statics.map(m => runtime.loadModule(m)).filter(Boolean));\n    }\n    if (process.env.ICE_CORE_REMOVE_DATA_LOADER !== 'true') {\n        dataLoaderFetcher && setFetcher(dataLoaderFetcher);\n        dataLoaderDecorator && setDecorator(dataLoaderDecorator);\n    }\n    if (!appData) {\n        appData = await getAppData(app, requestContext);\n    }\n    const needHydrate = hydrate && !downgrade && !documentOnly;\n    if (needHydrate) {\n        runtime.setRender((container, element) => {\n            var _a, _b, _c;\n            const hydrateOptions = {\n                // @ts-ignore react-dom do not define the type of second argument of onRecoverableError.\n                onRecoverableError: ((_a = appConfig === null || appConfig === void 0 ? void 0 : appConfig.app) === null || _a === void 0 ? void 0 : _a.onRecoverableError) ||\n                    ((error, errorInfo) => {\n                        reportRecoverableError(error, errorInfo, { ignoreRuntimeWarning: revalidate });\n                    }),\n            };\n            if ((_b = appConfig === null || appConfig === void 0 ? void 0 : appConfig.app) === null || _b === void 0 ? void 0 : _b.onBeforeHydrate) {\n                (_c = appConfig === null || appConfig === void 0 ? void 0 : appConfig.app) === null || _c === void 0 ? void 0 : _c.onBeforeHydrate();\n            }\n            return ReactDOM.hydrateRoot(container, element, hydrateOptions);\n        });\n    }\n    // Reset app context after app context is updated.\n    runtime.setAppContext({ ...appContext, appData });\n    if (runtimeModules.commons) {\n        await Promise.all(runtimeModules.commons.map(m => runtime.loadModule(m)).filter(Boolean));\n    }\n    return render({ runtime, history, needHydrate });\n}\nasync function render({ history, runtime, needHydrate }) {\n    const appContext = runtime.getAppContext();\n    const { appConfig, loaderData, routes, basename, routePath } = appContext;\n    const appRender = runtime.getRender();\n    const AppRuntimeProvider = runtime.composeAppProvider() || React.Fragment;\n    const AppRouter = runtime.getAppRouter();\n    const rootId = appConfig.app.rootId || 'app';\n    let root = document.getElementById(rootId);\n    if (!root) {\n        root = document.createElement('div');\n        root.id = rootId;\n        document.body.appendChild(root);\n        console.warn(`Root node #${rootId} is not found, current root is automatically created by the framework.`);\n    }\n    const hydrationData = needHydrate ? { loaderData } : undefined;\n    const routeModuleCache = {};\n    const location = history.location ? history.location : { pathname: routePath || window.location.pathname };\n    if (needHydrate) {\n        const lazyMatches = matchRoutes(routes, location, basename).filter((m) => m.route.lazy);\n        if ((lazyMatches === null || lazyMatches === void 0 ? void 0 : lazyMatches.length) > 0) {\n            // Load the lazy matches and update the routes before creating your router\n            // so we can hydrate the SSR-rendered content synchronously.\n            await Promise.all(lazyMatches.map(async (m) => {\n                let routeModule = await loadRouteModule(m.route, routeModuleCache);\n                Object.assign(m.route, {\n                    ...routeModule,\n                    lazy: undefined,\n                });\n            }));\n        }\n    }\n    const routerOptions = {\n        basename,\n        routes,\n        history,\n        hydrationData,\n        future: {\n            v7_prependBasename: true,\n        },\n    };\n    const SingleComponent = process.env.ICE_CORE_ROUTER !== 'true' &&\n        await getSingleRoute(routes, basename, location, routeModuleCache);\n    const renderRoot = appRender(root, React.createElement(AppContextProvider, { value: appContext },\n        React.createElement(AppRuntimeProvider, null,\n            React.createElement(AppRouter, { routerContext: routerOptions, routes: routes, location: history.location, Component: SingleComponent }))));\n    return renderRoot;\n}\nfunction createHistory(appConfig, { memoryRouter, initialEntry, routes }) {\n    var _a, _b, _c;\n    const routerType = memoryRouter ? 'memory' : (_a = appConfig === null || appConfig === void 0 ? void 0 : appConfig.router) === null || _a === void 0 ? void 0 : _a.type;\n    const createHistory = process.env.ICE_CORE_ROUTER === 'true'\n        ? createRouterHistory((_b = appConfig === null || appConfig === void 0 ? void 0 : appConfig.router) === null || _b === void 0 ? void 0 : _b.type, memoryRouter)\n        : createHistorySingle;\n    let createHistoryOptions = { window };\n    if (routerType === 'memory') {\n        const memoryOptions = {};\n        memoryOptions.initialEntries = ((_c = appConfig === null || appConfig === void 0 ? void 0 : appConfig.router) === null || _c === void 0 ? void 0 : _c.initialEntries) || getRoutesPath(routes);\n        if (initialEntry) {\n            const initialIndex = memoryOptions.initialEntries.findIndex((entry) => typeof entry === 'string' && entry === initialEntry);\n            if (initialIndex >= 0) {\n                memoryOptions.initialIndex = initialIndex;\n            }\n            else {\n                console.error(`path: ${initialEntry} do not match any initialEntries ${memoryOptions.initialEntries}`);\n            }\n        }\n        createHistoryOptions = memoryOptions;\n    }\n    const history = createHistory(createHistoryOptions);\n    return history;\n}\nfunction createRouterHistory(type, memoryRouter) {\n    if (memoryRouter || type === 'memory') {\n        return createMemoryHistory;\n    }\n    if (type === 'browser') {\n        return createBrowserHistory;\n    }\n    if (type === 'hash') {\n        return createHashHistory;\n    }\n}\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom/client';\nimport { routerHistory as history } from './history.js';\nimport { useData, useConfig } from './RouteContext.js';\nimport { useData as useSingleRouterData, useConfig as useSingleRouterConfig } from './singleRouter.js';\nimport { useAppContext } from './AppContext.js';\nclass Runtime {\n    constructor(appContext, runtimeOptions) {\n        this.getAppContext = () => {\n            return {\n                ...this.appContext,\n                RouteWrappers: this.RouteWrappers,\n            };\n        };\n        this.setAppContext = (appContext) => {\n            this.appContext = appContext;\n        };\n        this.getRender = () => {\n            return this.render;\n        };\n        this.getWrappers = () => this.RouteWrappers;\n        this.addProvider = (Provider) => {\n            // must promise user's providers are wrapped by the plugins' providers\n            this.AppProvider.unshift(Provider);\n        };\n        this.setRender = (render) => {\n            this.render = render;\n        };\n        this.addWrapper = (Wrapper, forLayout) => {\n            this.RouteWrappers.push({\n                Wrapper,\n                layout: forLayout,\n            });\n        };\n        this.setAppRouter = (AppRouter) => {\n            this.AppRouter = AppRouter;\n        };\n        this.addResponseHandler = (handler) => {\n            this.responseHandlers.push(handler);\n        };\n        this.getResponseHandlers = () => {\n            return this.responseHandlers;\n        };\n        this.AppProvider = [];\n        this.appContext = appContext;\n        this.render = (container, element) => {\n            const root = ReactDOM.createRoot(container);\n            root.render(element);\n            return root;\n        };\n        this.RouteWrappers = [];\n        this.runtimeOptions = runtimeOptions;\n        this.responseHandlers = [];\n        this.getAppRouter = this.getAppRouter.bind(this);\n    }\n    getAppRouter() {\n        return this.AppRouter;\n    }\n    loadModule(module) {\n        let runtimeAPI = {\n            addProvider: this.addProvider,\n            addResponseHandler: this.addResponseHandler,\n            getResponseHandlers: this.getResponseHandlers,\n            getAppRouter: this.getAppRouter,\n            setRender: this.setRender,\n            addWrapper: this.addWrapper,\n            appContext: this.appContext,\n            setAppRouter: this.setAppRouter,\n            useData: process.env.ICE_CORE_ROUTER === 'true' ? useData : useSingleRouterData,\n            useConfig: process.env.ICE_CORE_ROUTER === 'true' ? useConfig : useSingleRouterConfig,\n            useAppContext,\n            history,\n        };\n        const runtimeModule = (module.default || module);\n        if (module) {\n            return runtimeModule(runtimeAPI, this.runtimeOptions);\n        }\n    }\n    composeAppProvider() {\n        if (!this.AppProvider.length)\n            return null;\n        return this.AppProvider.reduce((ProviderComponent, CurrentProvider) => {\n            return ({ children, ...rest }) => {\n                const element = CurrentProvider\n                    ? React.createElement(CurrentProvider, { ...rest }, children)\n                    : children;\n                return React.createElement(ProviderComponent, { ...rest }, element);\n            };\n        });\n    }\n}\nexport default Runtime;\n","/**\n * Fake API of react-router-dom, react-router-dom will be remove\n * if user config `optimize.router` false\n */\nimport * as React from 'react';\nimport { loadRouteModules } from './routes.js';\nconst Context = React.createContext(undefined);\nContext.displayName = 'DataContext';\nexport const DataContextProvider = Context.Provider;\nexport const RouteContext = React.createContext({\n    outlet: null,\n    matches: [],\n    routeData: null,\n});\nRouteContext.displayName = 'RouteContext';\nexport function useData() {\n    var _a;\n    const value = React.useContext(RouteContext);\n    return (_a = value.routeData) === null || _a === void 0 ? void 0 : _a.data;\n}\nexport function useConfig() {\n    var _a;\n    const value = React.useContext(RouteContext);\n    return (_a = value.routeData) === null || _a === void 0 ? void 0 : _a.pageConfig;\n}\nconst OutletContext = React.createContext(null);\nexport function useOutlet(context) {\n    let { outlet } = React.useContext(RouteContext);\n    if (outlet) {\n        return (React.createElement(OutletContext.Provider, { value: context }, outlet));\n    }\n    return outlet;\n}\nexport function useOutletContext() {\n    return React.useContext(OutletContext);\n}\nexport function Outlet(props) {\n    return useOutlet(props.context);\n}\nexport function RenderedRoute({ routeContext, children }) {\n    return (React.createElement(RouteContext.Provider, { value: routeContext }, children));\n}\nexport const useRoutes = (routes) => {\n    return React.createElement(React.Fragment, null, routes[0].element);\n};\nexport const Router = (props) => {\n    return React.createElement(React.Fragment, null, props.children);\n};\nexport const createHistory = () => {\n    return {\n        // @ts-expect-error\n        listen: () => { },\n        // @ts-expect-error\n        action: 'POP',\n        // @ts-expect-error\n        location: '',\n    };\n};\nconst joinPaths = (paths) => paths.join('/').replace(/\\/\\/+/g, '/');\nconst flattenRoutes = (routes, branches = [], parentsMeta = [], parentPath = '') => {\n    let flattenRoute = (route, index, relativePath) => {\n        let routeMeta = {\n            relativePath: relativePath === undefined ? route.path || '' : relativePath,\n            childrenIndex: index,\n            route,\n        };\n        if (routeMeta.relativePath.startsWith('/')) {\n            if (!routeMeta.relativePath.startsWith(parentPath)) {\n                throw new Error(`Route path \"${routeMeta.relativePath}\" nested under path \"${parentPath}\" is not valid`);\n            }\n            routeMeta.relativePath = routeMeta.relativePath.slice(parentPath.length);\n        }\n        let path = joinPaths([parentPath, routeMeta.relativePath]);\n        let routesMeta = parentsMeta.concat(routeMeta);\n        if (route.children && route.children.length > 0) {\n            if (route.index) {\n                throw new Error(`Index route should not have children, path \"${path}\"`);\n            }\n            flattenRoutes(route.children, branches, routesMeta, path);\n        }\n        if (route.path == null && !route.index) {\n            return;\n        }\n        branches.push({\n            path,\n            routesMeta,\n        });\n    };\n    routes.forEach((route, index) => {\n        var _a;\n        if (route.path === '' || !((_a = route.path) === null || _a === void 0 ? void 0 : _a.includes('?'))) {\n            flattenRoute(route, index);\n        }\n        else {\n            throw new Error(`Single Route mode do not support path: \"${route.path}\"`);\n        }\n    });\n    return branches;\n};\nfunction compilePath(path, end = true) {\n    let regexpSource = `^${path\n        .replace(/\\/*\\*?$/, '') // Ignore trailing / and /*, we'll handle it below\n        .replace(/^\\/*/, '/') // Make sure it has a leading /\n        .replace(/[\\\\.*+^${}|()[\\]]/g, '\\\\$&')}`; // Escape special regex chars;\n    if (end) {\n        // When matching to the end, ignore trailing slashes\n        regexpSource += '\\\\/*$';\n    }\n    else if (path !== '' && path !== '/') {\n        // Keep alignment with react-router:\n        // https://github.com/remix-run/react-router/blob/fb0f1f94778f4762989930db209e6a111504aa63/packages/router/utils.ts#L988-L995\n        regexpSource += '(?:(?=\\\\/|$))';\n    }\n    else {\n        // Nothing to match for \"\" or \"/\"\n    }\n    let matcher = new RegExp(regexpSource, 'i');\n    return matcher;\n}\nexport function matchPath(pattern, pathname) {\n    if (typeof pattern === 'string') {\n        pattern = { path: pattern, end: true };\n    }\n    let matcher = compilePath(pattern.path, pattern.end);\n    let match = pathname.match(matcher);\n    if (!match)\n        return null;\n    let matchedPathname = match[0];\n    let pathnameBase = matchedPathname.replace(/(.)\\/+$/, '$1');\n    return {\n        // Params is not supported yet in single route mode.\n        params: {},\n        pathname: matchedPathname,\n        pathnameBase,\n        pattern,\n    };\n}\nconst normalizePathname = (pathname) => pathname.replace(/\\/+$/, '').replace(/^\\/*/, '/');\nconst matchRouteBranch = (branch, pathname) => {\n    let { routesMeta } = branch;\n    let matchedPathname = '/';\n    let matches = [];\n    const len = routesMeta.length;\n    for (let i = 0; i < len; i++) {\n        let routeMeta = routesMeta[i];\n        let end = i === routesMeta.length - 1;\n        let remainingPathname = matchedPathname === '/' ? pathname : pathname.slice(matchedPathname.length) || '/';\n        let match = matchPath(\n        // TODO: casesensitive is not support yet.\n        { path: routeMeta.relativePath, end }, remainingPathname);\n        if (!match)\n            return null;\n        let { route } = routeMeta;\n        matches.push({\n            // TODO: Can this as be avoided?\n            params: {},\n            pathname: joinPaths([matchedPathname, match.pathname]),\n            pathnameBase: normalizePathname(joinPaths([matchedPathname, match.pathnameBase])),\n            route,\n        });\n        if (match.pathnameBase !== '/') {\n            matchedPathname = joinPaths([matchedPathname, match.pathnameBase]);\n        }\n    }\n    return matches;\n};\nconst stripBasename = (pathname, basename) => {\n    if (basename === '/')\n        return pathname;\n    if (!pathname.toLowerCase().startsWith(basename.toLowerCase())) {\n        return null;\n    }\n    const startIndex = basename.endsWith('/')\n        ? basename.length - 1\n        : basename.length;\n    let nextChar = pathname.charAt(startIndex);\n    if (nextChar && nextChar !== '/') {\n        return null;\n    }\n    return pathname.slice(startIndex) || '/';\n};\nexport const matchRoutes = (routes, location, basename) => {\n    const pathname = (typeof location === 'string' ? location : location.pathname) || '/';\n    let stripedPathname = stripBasename(pathname, basename || '/');\n    if (!stripedPathname && basename !== '/') {\n        // If pathname is not match, we should ignore the basename,\n        // in case of the basename is customized.\n        stripedPathname = stripBasename(pathname, '/');\n    }\n    let branches = flattenRoutes(routes);\n    if (branches.length === 1) {\n        // Just one branch, no need to match.\n        return [{\n                route: routes[0],\n                params: {},\n                pathname,\n                pathnameBase: '',\n            }];\n    }\n    let matches = null;\n    for (let i = 0; matches == null && i < branches.length; i++) {\n        matches = matchRouteBranch(branches[i], stripedPathname);\n    }\n    if (!matches) {\n        console.warn('Single route manifest: ', routes);\n        console.warn(`Basename \"${basename}\" is not match with pathname \"${pathname}\"`);\n    }\n    return matches;\n};\nexport const Link = () => null;\nexport const NavLink = () => null;\nexport const useParams = () => {\n    return {};\n};\nexport const useSearchParams = () => {\n    return [{}, () => { }];\n};\nexport const useLocation = () => {\n    return {};\n};\nexport const useNavigate = () => {\n    return {};\n};\nexport const useNavigation = () => {\n    throw new Error('useNavigation is not supported in single router mode');\n};\nexport const useRevalidator = () => {\n    throw new Error('useRevalidator is not supported in single router mode');\n};\nexport const useAsyncValue = () => {\n    throw new Error('useAsyncValue is not supported in single router mode');\n};\nexport const getSingleRoute = async (routes, basename, location, routeModuleCache = {}) => {\n    const matchedRoutes = matchRoutes(routes, location, basename);\n    const routeModules = await loadRouteModules(matchedRoutes.map(({ route }) => route), routeModuleCache);\n    let loaders = [];\n    let loaderIds = [];\n    const components = matchedRoutes.map(({ route }) => {\n        const { loader, Component } = (routeModules === null || routeModules === void 0 ? void 0 : routeModules[route.id]) || {};\n        if (loader) {\n            loaders.push(loader());\n            loaderIds.push(route.id);\n        }\n        return {\n            Component: Component || route.Component,\n            isDataRoute: !!loader,\n            id: route.id,\n        };\n    });\n    let routesData = {};\n    // Compose components.\n    const loaderDatas = await Promise.all(loaders);\n    loaderDatas.forEach((data, index) => {\n        routesData[loaderIds[index]] = data;\n    });\n    return () => components.reduceRight((outlet, { Component, isDataRoute, id }) => {\n        return (React.createElement(RenderedRoute, { routeContext: {\n                outlet,\n                routeData: isDataRoute && routesData[id],\n            }, children: React.createElement(Component, null) || outlet }));\n    }, null);\n};\n","import { useState, useEffect } from 'react';\nexport default function useMounted() {\n    const [mounted, setMounted] = useState(false);\n    useEffect(() => {\n        setMounted(true);\n    }, []);\n    return mounted;\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nexport default function usePageLifecycle(lifecycle, callback) {\n    // Just compatible with miniapp\n    return;\n}\n","const addLeadingSlash = (url = '') => (url.charAt(0) === '/' ? url : `/${url}`);\nexport default addLeadingSlash;\n","let disableWarning = false;\nexport function disableHistoryWarning() {\n    disableWarning = true;\n}\nexport function deprecatedHistory(history) {\n    const originHistory = { ...history };\n    const deprecatedMessage = 'history.push and history.replace is not recommended to use outside of react component. The usage will be deprecated in the next minor version.';\n    history.push = function (to, state) {\n        if (!disableWarning) {\n            console.warn(deprecatedMessage);\n        }\n        originHistory.push(to, state);\n    };\n    history.replace = function (to, state) {\n        if (!disableWarning) {\n            console.warn(deprecatedMessage);\n        }\n        originHistory.replace(to, state);\n    };\n    return history;\n}\n","/**\n * Get the current route path exclude the basename.\n */\nexport default function getCurrentRoutePath(matches) {\n    return matches.length && matches[matches.length - 1].pathname;\n}\n","export class Events {\n    constructor(opts) {\n        var _a;\n        this.callbacks = (_a = opts === null || opts === void 0 ? void 0 : opts.callbacks) !== null && _a !== void 0 ? _a : {};\n    }\n    on(eventName, callback, context) {\n        let event;\n        let node;\n        let tail;\n        let list;\n        if (!callback) {\n            return this;\n        }\n        eventName = eventName.split(Events.eventSplitter);\n        if (!this.callbacks) {\n            this.callbacks = {};\n        }\n        const calls = this.callbacks;\n        while ((event = eventName.shift())) {\n            list = calls[event];\n            node = list ? list.tail : {};\n            node.next = tail = {};\n            node.context = context;\n            node.callback = callback;\n            calls[event] = {\n                tail,\n                next: list ? list.next : node,\n            };\n        }\n        return this;\n    }\n    once(events, callback, context) {\n        const wrapper = (...args) => {\n            callback.apply(this, args);\n            this.off(events, wrapper, context);\n        };\n        this.on(events, wrapper, context);\n        return this;\n    }\n    off(events, callback, context) {\n        let event;\n        let calls;\n        let node;\n        let tail;\n        let cb;\n        let ctx;\n        if (!(calls = this.callbacks)) {\n            return this;\n        }\n        if (!(events || callback || context)) {\n            delete this.callbacks;\n            return this;\n        }\n        events = events ? events.split(Events.eventSplitter) : Object.keys(calls);\n        while ((event = events.shift())) {\n            node = calls[event];\n            delete calls[event];\n            if (!node || !(callback || context)) {\n                continue;\n            }\n            tail = node.tail;\n            while ((node = node.next) !== tail) {\n                cb = node.callback;\n                ctx = node.context;\n                if ((callback && cb !== callback) || (context && ctx !== context)) {\n                    this.on(event, cb, ctx);\n                }\n            }\n        }\n        return this;\n    }\n    trigger(events) {\n        let event;\n        let node;\n        let calls;\n        let tail;\n        if (!(calls = this.callbacks)) {\n            return this;\n        }\n        events = events.split(Events.eventSplitter);\n        /* eslint-disable prefer-rest-params */\n        const rest = [].slice.call(arguments, 1);\n        while ((event = events.shift())) {\n            if ((node = calls[event])) {\n                tail = node.tail;\n                while ((node = node.next) !== tail) {\n                    node.callback.apply(node.context || this, rest);\n                }\n            }\n        }\n        return this;\n    }\n}\nEvents.eventSplitter = /\\s+/;\n","export * from './is.js';\nexport * from './utils.js';\nexport * from './event-emitter.js';\nexport * from './miniapp/shortcuts.js';\nexport * from './miniapp/template.js';\nexport * from './miniapp/components.js';\nexport * from './miniapp/runtime-hooks.js';\nexport * from './miniapp/utils.js';\n","export function isString(o) {\n    return typeof o === 'string';\n}\nexport function isUndefined(o) {\n    return typeof o === 'undefined';\n}\nexport function isNull(o) {\n    return o === null;\n}\nexport function isObject(o) {\n    return o !== null && typeof o === 'object';\n}\nexport function isBoolean(o) {\n    return o === true || o === false;\n}\nexport function isFunction(o) {\n    return typeof o === 'function';\n}\nexport function isNumber(o) {\n    return typeof o === 'number';\n}\nexport function isBooleanStringLiteral(o) {\n    return o === 'true' || o === 'false';\n}\nexport const { isArray } = Array;\nexport function isEmpty(o) {\n    return Object.keys(o).length === 0;\n}\n","const DEFAULT_EMPTY_ARRAY = '[]';\nconst NO_DEFAULT_VALUE = '';\nconst DEFAULT_TRUE = '!0';\nconst DEFAULT_FALSE = '!1';\nexport const touchEvents = {\n    bindTouchStart: NO_DEFAULT_VALUE,\n    bindTouchMove: NO_DEFAULT_VALUE,\n    bindTouchEnd: NO_DEFAULT_VALUE,\n    bindTouchCancel: NO_DEFAULT_VALUE,\n    bindLongTap: NO_DEFAULT_VALUE,\n};\nexport const animation = {\n    animation: NO_DEFAULT_VALUE,\n    bindAnimationStart: NO_DEFAULT_VALUE,\n    bindAnimationIteration: NO_DEFAULT_VALUE,\n    bindAnimationEnd: NO_DEFAULT_VALUE,\n    bindTransitionEnd: NO_DEFAULT_VALUE,\n};\nexport function singleQuote(s) {\n    return `'${s}'`;\n}\nconst View = {\n    'hover-class': singleQuote('none'),\n    'hover-stop-propagation': DEFAULT_FALSE,\n    'hover-start-time': '50',\n    'hover-stay-time': '400',\n    ...touchEvents,\n    ...animation,\n};\nconst Icon = {\n    type: NO_DEFAULT_VALUE,\n    size: '23',\n    color: NO_DEFAULT_VALUE,\n};\nconst MapComp = {\n    longitude: NO_DEFAULT_VALUE,\n    latitude: NO_DEFAULT_VALUE,\n    scale: '16',\n    markers: DEFAULT_EMPTY_ARRAY,\n    covers: NO_DEFAULT_VALUE,\n    polyline: DEFAULT_EMPTY_ARRAY,\n    circles: DEFAULT_EMPTY_ARRAY,\n    controls: DEFAULT_EMPTY_ARRAY,\n    'include-points': DEFAULT_EMPTY_ARRAY,\n    'show-location': NO_DEFAULT_VALUE,\n    'layer-style': '1',\n    bindMarkerTap: NO_DEFAULT_VALUE,\n    bindControlTap: NO_DEFAULT_VALUE,\n    bindCalloutTap: NO_DEFAULT_VALUE,\n    bindUpdated: NO_DEFAULT_VALUE,\n    ...touchEvents,\n};\nconst Progress = {\n    percent: NO_DEFAULT_VALUE,\n    'stroke-width': '6',\n    color: singleQuote('#09BB07'),\n    activeColor: singleQuote('#09BB07'),\n    backgroundColor: singleQuote('#EBEBEB'),\n    active: DEFAULT_FALSE,\n    'active-mode': singleQuote('backwards'),\n    'show-info': DEFAULT_FALSE,\n};\nconst RichText = {\n    nodes: DEFAULT_EMPTY_ARRAY,\n};\nconst Text = {\n    selectable: DEFAULT_FALSE,\n    space: NO_DEFAULT_VALUE,\n    decode: DEFAULT_FALSE,\n};\nconst Button = {\n    size: singleQuote('default'),\n    type: NO_DEFAULT_VALUE,\n    plain: DEFAULT_FALSE,\n    disabled: NO_DEFAULT_VALUE,\n    loading: DEFAULT_FALSE,\n    'form-type': NO_DEFAULT_VALUE,\n    'open-type': NO_DEFAULT_VALUE,\n    'hover-class': singleQuote('button-hover'),\n    'hover-stop-propagation': DEFAULT_FALSE,\n    'hover-start-time': '20',\n    'hover-stay-time': '70',\n    name: NO_DEFAULT_VALUE,\n    ...touchEvents,\n};\nconst Checkbox = {\n    value: NO_DEFAULT_VALUE,\n    disabled: NO_DEFAULT_VALUE,\n    checked: DEFAULT_FALSE,\n    color: singleQuote('#09BB07'),\n    name: NO_DEFAULT_VALUE,\n};\nconst CheckboxGroup = {\n    bindChange: NO_DEFAULT_VALUE,\n    name: NO_DEFAULT_VALUE,\n};\nconst Form = {\n    'report-submit': DEFAULT_FALSE,\n    bindSubmit: NO_DEFAULT_VALUE,\n    bindReset: NO_DEFAULT_VALUE,\n    name: NO_DEFAULT_VALUE,\n};\nconst Input = {\n    value: NO_DEFAULT_VALUE,\n    type: singleQuote(NO_DEFAULT_VALUE),\n    password: DEFAULT_FALSE,\n    placeholder: NO_DEFAULT_VALUE,\n    'placeholder-style': NO_DEFAULT_VALUE,\n    'placeholder-class': singleQuote('input-placeholder'),\n    disabled: NO_DEFAULT_VALUE,\n    maxlength: '140',\n    'cursor-spacing': '0',\n    focus: DEFAULT_FALSE,\n    'confirm-type': singleQuote('done'),\n    'confirm-hold': DEFAULT_FALSE,\n    cursor: 'i.value.length',\n    'selection-start': '-1',\n    'selection-end': '-1',\n    bindInput: NO_DEFAULT_VALUE,\n    bindFocus: NO_DEFAULT_VALUE,\n    bindBlur: NO_DEFAULT_VALUE,\n    bindConfirm: NO_DEFAULT_VALUE,\n    name: NO_DEFAULT_VALUE,\n};\nconst Label = {\n    for: NO_DEFAULT_VALUE,\n    name: NO_DEFAULT_VALUE,\n};\nconst Picker = {\n    mode: singleQuote('selector'),\n    disabled: NO_DEFAULT_VALUE,\n    range: NO_DEFAULT_VALUE,\n    'range-key': NO_DEFAULT_VALUE,\n    value: NO_DEFAULT_VALUE,\n    start: NO_DEFAULT_VALUE,\n    end: NO_DEFAULT_VALUE,\n    fields: singleQuote('day'),\n    'custom-item': NO_DEFAULT_VALUE,\n    name: NO_DEFAULT_VALUE,\n    bindCancel: NO_DEFAULT_VALUE,\n    bindChange: NO_DEFAULT_VALUE,\n    bindColumnChange: NO_DEFAULT_VALUE,\n};\nconst PickerView = {\n    value: NO_DEFAULT_VALUE,\n    'indicator-style': NO_DEFAULT_VALUE,\n    'indicator-class': NO_DEFAULT_VALUE,\n    'mask-style': NO_DEFAULT_VALUE,\n    'mask-class': NO_DEFAULT_VALUE,\n    bindChange: NO_DEFAULT_VALUE,\n    name: NO_DEFAULT_VALUE,\n};\nconst PickerViewColumn = {\n    name: NO_DEFAULT_VALUE,\n};\nconst Radio = {\n    value: NO_DEFAULT_VALUE,\n    checked: DEFAULT_FALSE,\n    disabled: NO_DEFAULT_VALUE,\n    color: singleQuote('#09BB07'),\n    name: NO_DEFAULT_VALUE,\n};\nconst RadioGroup = {\n    bindChange: NO_DEFAULT_VALUE,\n    name: NO_DEFAULT_VALUE,\n};\nconst Slider = {\n    min: '0',\n    max: '100',\n    step: '1',\n    disabled: NO_DEFAULT_VALUE,\n    value: '0',\n    activeColor: singleQuote('#1aad19'),\n    backgroundColor: singleQuote('#e9e9e9'),\n    'block-size': '28',\n    'block-color': singleQuote('#ffffff'),\n    'show-value': DEFAULT_FALSE,\n    bindChange: NO_DEFAULT_VALUE,\n    bindChanging: NO_DEFAULT_VALUE,\n    name: NO_DEFAULT_VALUE,\n};\nconst Switch = {\n    checked: DEFAULT_FALSE,\n    disabled: NO_DEFAULT_VALUE,\n    type: singleQuote('switch'),\n    color: singleQuote('#04BE02'),\n    bindChange: NO_DEFAULT_VALUE,\n    name: NO_DEFAULT_VALUE,\n};\nconst Textarea = {\n    value: NO_DEFAULT_VALUE,\n    placeholder: NO_DEFAULT_VALUE,\n    'placeholder-style': NO_DEFAULT_VALUE,\n    'placeholder-class': singleQuote('textarea-placeholder'),\n    disabled: NO_DEFAULT_VALUE,\n    maxlength: '140',\n    'auto-focus': DEFAULT_FALSE,\n    focus: DEFAULT_FALSE,\n    'auto-height': DEFAULT_FALSE,\n    fixed: DEFAULT_FALSE,\n    'cursor-spacing': '0',\n    cursor: '-1',\n    'selection-start': '-1',\n    'selection-end': '-1',\n    bindFocus: NO_DEFAULT_VALUE,\n    bindBlur: NO_DEFAULT_VALUE,\n    bindLineChange: NO_DEFAULT_VALUE,\n    bindInput: NO_DEFAULT_VALUE,\n    bindConfirm: NO_DEFAULT_VALUE,\n    name: NO_DEFAULT_VALUE,\n};\nconst CoverImage = {\n    src: NO_DEFAULT_VALUE,\n    bindLoad: 'eh',\n    bindError: 'eh',\n};\nconst CoverView = {\n    'scroll-top': DEFAULT_FALSE,\n    ...touchEvents,\n};\nconst MovableArea = {\n    'scale-area': DEFAULT_FALSE,\n};\nconst MovableView = {\n    direction: 'none',\n    inertia: DEFAULT_FALSE,\n    'out-of-bounds': DEFAULT_FALSE,\n    x: NO_DEFAULT_VALUE,\n    y: NO_DEFAULT_VALUE,\n    damping: '20',\n    friction: '2',\n    disabled: NO_DEFAULT_VALUE,\n    scale: DEFAULT_FALSE,\n    'scale-min': '0.5',\n    'scale-max': '10',\n    'scale-value': '1',\n    bindChange: NO_DEFAULT_VALUE,\n    bindScale: NO_DEFAULT_VALUE,\n    bindHTouchMove: NO_DEFAULT_VALUE,\n    bindVTouchMove: NO_DEFAULT_VALUE,\n    width: singleQuote('10px'),\n    height: singleQuote('10px'),\n    ...touchEvents,\n    ...animation,\n};\nconst ScrollView = {\n    'scroll-x': DEFAULT_FALSE,\n    'scroll-y': DEFAULT_FALSE,\n    'upper-threshold': '50',\n    'lower-threshold': '50',\n    'scroll-top': NO_DEFAULT_VALUE,\n    'scroll-left': NO_DEFAULT_VALUE,\n    'scroll-into-view': NO_DEFAULT_VALUE,\n    'scroll-with-animation': DEFAULT_FALSE,\n    'enable-back-to-top': DEFAULT_FALSE,\n    bindScrollToUpper: NO_DEFAULT_VALUE,\n    bindScrollToLower: NO_DEFAULT_VALUE,\n    bindScroll: NO_DEFAULT_VALUE,\n    ...touchEvents,\n    ...animation,\n};\nconst Swiper = {\n    'indicator-dots': DEFAULT_FALSE,\n    'indicator-color': singleQuote('rgba(0, 0, 0, .3)'),\n    'indicator-active-color': singleQuote('#000000'),\n    autoplay: DEFAULT_FALSE,\n    current: '0',\n    interval: '5000',\n    duration: '500',\n    circular: DEFAULT_FALSE,\n    vertical: DEFAULT_FALSE,\n    'previous-margin': singleQuote('0px'),\n    'next-margin': singleQuote('0px'),\n    'display-multiple-items': '1',\n    bindChange: NO_DEFAULT_VALUE,\n    bindTransition: NO_DEFAULT_VALUE,\n    bindAnimationFinish: NO_DEFAULT_VALUE,\n    ...touchEvents,\n};\nconst SwiperItem = {\n    'item-id': NO_DEFAULT_VALUE,\n};\nconst Navigator = {\n    url: NO_DEFAULT_VALUE,\n    'open-type': singleQuote('navigate'),\n    delta: '1',\n    'hover-class': singleQuote('navigator-hover'),\n    'hover-stop-propagation': DEFAULT_FALSE,\n    'hover-start-time': '50',\n    'hover-stay-time': '600',\n    bindSuccess: NO_DEFAULT_VALUE,\n    bindFail: NO_DEFAULT_VALUE,\n    bindComplete: NO_DEFAULT_VALUE,\n};\nconst Audio = {\n    id: NO_DEFAULT_VALUE,\n    src: NO_DEFAULT_VALUE,\n    loop: DEFAULT_FALSE,\n    controls: DEFAULT_FALSE,\n    poster: NO_DEFAULT_VALUE,\n    name: NO_DEFAULT_VALUE,\n    author: NO_DEFAULT_VALUE,\n    bindError: NO_DEFAULT_VALUE,\n    bindPlay: NO_DEFAULT_VALUE,\n    bindPause: NO_DEFAULT_VALUE,\n    bindTimeUpdate: NO_DEFAULT_VALUE,\n    bindEnded: NO_DEFAULT_VALUE,\n};\nconst Camera = {\n    'device-position': singleQuote('back'),\n    flash: singleQuote('auto'),\n    bindStop: NO_DEFAULT_VALUE,\n    bindError: NO_DEFAULT_VALUE,\n};\nconst Image = {\n    src: NO_DEFAULT_VALUE,\n    mode: singleQuote('scaleToFill'),\n    'lazy-load': DEFAULT_FALSE,\n    bindError: NO_DEFAULT_VALUE,\n    bindLoad: NO_DEFAULT_VALUE,\n    ...touchEvents,\n};\nconst LivePlayer = {\n    src: NO_DEFAULT_VALUE,\n    autoplay: DEFAULT_FALSE,\n    muted: DEFAULT_FALSE,\n    orientation: singleQuote('vertical'),\n    'object-fit': singleQuote('contain'),\n    'background-mute': DEFAULT_FALSE,\n    'min-cache': '1',\n    'max-cache': '3',\n    bindStateChange: NO_DEFAULT_VALUE,\n    bindFullScreenChange: NO_DEFAULT_VALUE,\n    bindNetStatus: NO_DEFAULT_VALUE,\n    ...animation,\n};\nconst Video = {\n    src: NO_DEFAULT_VALUE,\n    duration: NO_DEFAULT_VALUE,\n    controls: DEFAULT_TRUE,\n    'danmu-list': NO_DEFAULT_VALUE,\n    'danmu-btn': NO_DEFAULT_VALUE,\n    'enable-danmu': NO_DEFAULT_VALUE,\n    autoplay: DEFAULT_FALSE,\n    loop: DEFAULT_FALSE,\n    muted: DEFAULT_FALSE,\n    'initial-time': '0',\n    'page-gesture': DEFAULT_FALSE,\n    direction: NO_DEFAULT_VALUE,\n    'show-progress': DEFAULT_TRUE,\n    'show-fullscreen-btn': DEFAULT_TRUE,\n    'show-play-btn': DEFAULT_TRUE,\n    'show-center-play-btn': DEFAULT_TRUE,\n    'enable-progress-gesture': DEFAULT_TRUE,\n    'object-fit': singleQuote('contain'),\n    poster: NO_DEFAULT_VALUE,\n    'show-mute-btn': DEFAULT_FALSE,\n    bindPlay: NO_DEFAULT_VALUE,\n    bindPause: NO_DEFAULT_VALUE,\n    bindEnded: NO_DEFAULT_VALUE,\n    bindTimeUpdate: NO_DEFAULT_VALUE,\n    bindFullScreenChange: NO_DEFAULT_VALUE,\n    bindWaiting: NO_DEFAULT_VALUE,\n    bindError: NO_DEFAULT_VALUE,\n    ...animation,\n};\nconst Canvas = {\n    'canvas-id': NO_DEFAULT_VALUE,\n    'disable-scroll': DEFAULT_FALSE,\n    bindError: NO_DEFAULT_VALUE,\n    ...touchEvents,\n};\nconst Ad = {\n    'unit-id': NO_DEFAULT_VALUE,\n    'ad-intervals': NO_DEFAULT_VALUE,\n    bindLoad: NO_DEFAULT_VALUE,\n    bindError: NO_DEFAULT_VALUE,\n    bindClose: NO_DEFAULT_VALUE,\n};\nconst WebView = {\n    src: NO_DEFAULT_VALUE,\n    bindMessage: NO_DEFAULT_VALUE,\n    bindLoad: NO_DEFAULT_VALUE,\n    bindError: NO_DEFAULT_VALUE,\n};\nconst Block = {};\n// For Vue，因为 slot 标签被 vue 占用了\nconst SlotView = {\n    name: NO_DEFAULT_VALUE,\n};\n// For React\n// Slot 和 SlotView 最终都会编译成 <view slot={{ i.name }} />\n// 因为 <slot name=\"{{ i.name }}\" /> 适用性没有前者高（无法添加类和样式）\n// 不给 View 直接加 slot 属性的原因是性能损耗\nconst Slot = {\n    name: NO_DEFAULT_VALUE,\n};\nexport const internalComponents = {\n    View,\n    Icon,\n    Progress,\n    RichText,\n    Text,\n    Button,\n    Checkbox,\n    CheckboxGroup,\n    Form,\n    Input,\n    Label,\n    Picker,\n    PickerView,\n    PickerViewColumn,\n    Radio,\n    RadioGroup,\n    Slider,\n    Switch,\n    CoverImage,\n    Textarea,\n    CoverView,\n    MovableArea,\n    MovableView,\n    ScrollView,\n    Swiper,\n    SwiperItem,\n    Navigator,\n    Audio,\n    Camera,\n    Image,\n    LivePlayer,\n    Video,\n    Canvas,\n    Ad,\n    WebView,\n    Block,\n    Map: MapComp,\n    Slot,\n    SlotView,\n};\nexport const controlledComponent = new Set([\n    'input',\n    'checkbox',\n    'picker',\n    'picker-view',\n    'radio',\n    'slider',\n    'switch',\n    'textarea',\n]);\nexport const focusComponents = new Set([\n    'input',\n    'textarea',\n]);\nexport const voidElements = new Set([\n    'progress',\n    'icon',\n    'rich-text',\n    'input',\n    'textarea',\n    'slider',\n    'switch',\n    'audio',\n    'ad',\n    'official-account',\n    'open-data',\n    'navigation-bar',\n]);\nexport const nestElements = new Map([\n    ['view', -1],\n    ['catch-view', -1],\n    ['cover-view', -1],\n    ['static-view', -1],\n    ['pure-view', -1],\n    ['block', -1],\n    ['text', -1],\n    ['static-text', 6],\n    ['slot', 8],\n    ['slot-view', 8],\n    ['label', 6],\n    ['form', 4],\n    ['scroll-view', 4],\n    ['swiper', 4],\n    ['swiper-item', 4],\n]);\n","import { Events } from '../event-emitter.js';\nimport { isFunction } from '../is.js';\nexport var HOOK_TYPE;\n(function (HOOK_TYPE) {\n    HOOK_TYPE[HOOK_TYPE[\"SINGLE\"] = 0] = \"SINGLE\";\n    HOOK_TYPE[HOOK_TYPE[\"MULTI\"] = 1] = \"MULTI\";\n    HOOK_TYPE[HOOK_TYPE[\"WATERFALL\"] = 2] = \"WATERFALL\";\n})(HOOK_TYPE || (HOOK_TYPE = {}));\nconst defaultMiniLifecycle = {\n    app: [\n        'onLaunch',\n        'onShow',\n        'onHide',\n        'onError',\n        'onPageNotFound',\n        'onUnhandledRejection',\n        'onShareAppMessage',\n    ],\n    page: [\n        'onLoad',\n        'onUnload',\n        'onReady',\n        'onShow',\n        'onHide',\n        [\n            'onPullDownRefresh',\n            'onReachBottom',\n            'onResize',\n            'onTabItemTap',\n            'onTitleClick',\n            'onOptionMenuClick',\n            'onPopMenuClick',\n            'onPullIntercept',\n            'onAddToFavorites',\n            'onSaveExitState',\n        ],\n        [\n            'onPageScroll',\n            'onShareAppMessage',\n            'onShareTimeline',\n        ],\n        // 阿里小程序某些页面事件必须存放于 events 对象中\n        [\n            'onBack',\n            'onKeyboardHeight',\n            'beforeTabItemTap',\n            'onResize',\n            'onSelectedTabItemTap',\n        ],\n    ],\n};\nexport function IceHook(type, initial) {\n    return {\n        type,\n        initial: initial || null,\n    };\n}\nexport class IceHooks extends Events {\n    constructor(hooks, opts) {\n        super(opts);\n        this.hooks = hooks;\n        for (const hookName in hooks) {\n            const { initial } = hooks[hookName];\n            if (isFunction(initial)) {\n                this.on(hookName, initial);\n            }\n        }\n    }\n    tapOneOrMany(hookName, callback) {\n        const list = isFunction(callback) ? [callback] : callback;\n        list.forEach(cb => this.on(hookName, cb));\n    }\n    tap(hookName, callback) {\n        const { hooks } = this;\n        const { type, initial } = hooks[hookName];\n        if (type === HOOK_TYPE.SINGLE) {\n            this.off(hookName);\n            this.on(hookName, isFunction(callback) ? callback : callback[callback.length - 1]);\n        }\n        else {\n            initial && this.off(hookName, initial);\n            this.tapOneOrMany(hookName, callback);\n        }\n    }\n    call(hookName, ...rest) {\n        var _a;\n        const hook = this.hooks[hookName];\n        if (!hook)\n            return;\n        const { type } = hook;\n        const calls = this.callbacks;\n        if (!calls)\n            return;\n        const list = calls[hookName];\n        if (list) {\n            const { tail } = list;\n            let node = list.next;\n            let args = rest;\n            let res;\n            while (node !== tail) {\n                res = (_a = node.callback) === null || _a === void 0 ? void 0 : _a.apply(node.context || this, args);\n                if (type === HOOK_TYPE.WATERFALL) {\n                    const params = [res];\n                    args = params;\n                }\n                node = node.next;\n            }\n            return res;\n        }\n    }\n    isExist(hookName) {\n        var _a;\n        return Boolean((_a = this.callbacks) === null || _a === void 0 ? void 0 : _a[hookName]);\n    }\n}\nexport const hooks = new IceHooks({\n    getMiniLifecycle: IceHook(HOOK_TYPE.SINGLE, defaultConfig => defaultConfig),\n    getMiniLifecycleImpl: IceHook(HOOK_TYPE.SINGLE, function () {\n        return this.call('getMiniLifecycle', defaultMiniLifecycle);\n    }),\n    getLifecycle: IceHook(HOOK_TYPE.SINGLE, (instance, lifecycle) => instance[lifecycle]),\n    getPathIndex: IceHook(HOOK_TYPE.SINGLE, indexOfNode => `[${indexOfNode}]`),\n    getEventCenter: IceHook(HOOK_TYPE.SINGLE, Events => new Events()),\n    isBubbleEvents: IceHook(HOOK_TYPE.SINGLE, eventName => {\n        /**\n         * 支持冒泡的事件, 除 支付宝小程序外，其余的可冒泡事件都和微信保持一致\n         * 详见 见 https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html\n         */\n        const BUBBLE_EVENTS = new Set([\n            'touchstart',\n            'touchmove',\n            'touchcancel',\n            'touchend',\n            'touchforcechange',\n            'tap',\n            'longpress',\n            'longtap',\n            'transitionend',\n            'animationstart',\n            'animationiteration',\n            'animationend',\n        ]);\n        return BUBBLE_EVENTS.has(eventName);\n    }),\n    getSpecialNodes: IceHook(HOOK_TYPE.SINGLE, () => ['view', 'text', 'image']),\n    onRemoveAttribute: IceHook(HOOK_TYPE.SINGLE),\n    batchedEventUpdates: IceHook(HOOK_TYPE.SINGLE),\n    mergePageInstance: IceHook(HOOK_TYPE.SINGLE),\n    modifyPageObject: IceHook(HOOK_TYPE.SINGLE),\n    createPullDownComponent: IceHook(HOOK_TYPE.SINGLE),\n    getDOMNode: IceHook(HOOK_TYPE.SINGLE),\n    modifyHydrateData: IceHook(HOOK_TYPE.SINGLE),\n    modifySetAttrPayload: IceHook(HOOK_TYPE.SINGLE),\n    modifyRmAttrPayload: IceHook(HOOK_TYPE.SINGLE),\n    onAddEvent: IceHook(HOOK_TYPE.SINGLE),\n    modifyMpEvent: IceHook(HOOK_TYPE.MULTI),\n    modifyMpEventImpl: IceHook(HOOK_TYPE.SINGLE, function (e) {\n        try {\n            // 有些小程序的事件对象的某些属性只读\n            this.call('modifyMpEvent', e);\n        }\n        catch (error) {\n            console.warn('[ICE modifyMpEvent hook Error]: ', error);\n        }\n    }),\n    modifyIceEvent: IceHook(HOOK_TYPE.MULTI),\n    modifyDispatchEvent: IceHook(HOOK_TYPE.MULTI),\n    modifySetDataPayload: IceHook(HOOK_TYPE.SINGLE),\n    initNativeApi: IceHook(HOOK_TYPE.MULTI),\n    patchElement: IceHook(HOOK_TYPE.MULTI),\n    hydrateNativeComponentNode: IceHook(HOOK_TYPE.SINGLE),\n});\n","// 字符串简写\nexport var Shortcuts;\n(function (Shortcuts) {\n    Shortcuts[\"Container\"] = \"container\";\n    Shortcuts[\"Childnodes\"] = \"cn\";\n    Shortcuts[\"Text\"] = \"v\";\n    Shortcuts[\"NodeType\"] = \"nt\";\n    Shortcuts[\"NodeName\"] = \"nn\";\n    // Attrtibutes\n    Shortcuts[\"Style\"] = \"st\";\n    Shortcuts[\"Class\"] = \"cl\";\n    Shortcuts[\"Src\"] = \"src\";\n})(Shortcuts || (Shortcuts = {}));\n","/**\n * 这里我们需要关心的小程序种类有两类：\n * 1. 模板递归：\n *  - 支持：tmpl0 套 tmpl0\n *  - 不支持：这就使得我们必须生成多级的模板，tmpl0 套 tmpl1，tmpl1 套 tmpl2……\n *           直到超过阈值 N (N = config.miniapp.baseLevel) tmplN 会套组件 comp，组件 comp 重新再套 tmpl0。\n * 2. 小程序脚本语言（wxs, sjs, etc...）：\n *  - 支持：可以在模板使用函数缩减模板大小或提高性能（存疑），例如判断一个值是不是假值（falsy value）。\n *         将来或许会把数据序列化^1 的操作也放到小程序脚本语言里。\n *  - 不支持：使用纯 *xml 语法\n *\n * ^1: packages/miniapp-runtime/src/hydrate.ts\n*/\nimport { isBooleanStringLiteral, isFunction, isNumber, isString } from '../is.js';\nimport { capitalize, hasOwn, indent, toCamelCase, toDashed, toKebabCase } from '../utils.js';\nimport { focusComponents, internalComponents, nestElements, singleQuote, voidElements, } from './components.js';\nimport { Shortcuts } from './shortcuts.js';\nimport { getComponentsAlias } from './utils.js';\nexport const styles = {\n    style: `i.${Shortcuts.Style}`,\n    class: `i.${Shortcuts.Class}`,\n};\nexport const events = {\n    bindtap: 'eh',\n};\nconst weixinAdapter = {\n    if: 'wx:if',\n    else: 'wx:else',\n    elseif: 'wx:elif',\n    for: 'wx:for',\n    forItem: 'wx:for-item',\n    forIndex: 'wx:for-index',\n    key: 'wx:key',\n    xs: 'wxs',\n    type: 'weapp',\n};\nexport class BaseTemplate {\n    constructor() {\n        this.exportExpr = 'module.exports =';\n        this.thirdPartyPatcher = {};\n        this.supportXS = false;\n        this.adapter = weixinAdapter;\n        /** 组件列表 */\n        this.internalComponents = internalComponents;\n        /** 可以 focus 聚焦的组件 */\n        this.focusComponents = focusComponents;\n        /** 不需要渲染子节点的元素 */\n        this.voidElements = voidElements;\n        /** 可以递归调用自身的组件 */\n        this.nestElements = nestElements;\n        this.buildPageTemplate = (baseTempPath) => {\n            const template = `<import src=\"${baseTempPath}\"/>\n<template is=\"ice_tmpl\" data=\"{{${this.dataKeymap('root:root')}}}\" />`;\n            return template;\n        };\n        this.buildBaseComponentTemplate = (ext) => {\n            const data = !this.isSupportRecursive && this.supportXS\n                ? this.dataKeymap('i:i,l:l')\n                : this.dataKeymap('i:i');\n            return `<import src=\"./base${ext}\" />\n<template is=\"tmpl_0_${Shortcuts.Container}\" data=\"{{${data}}}\" />`;\n        };\n        this.buildCustomComponentTemplate = (ext) => {\n            const { adapter } = this;\n            const data = !this.isSupportRecursive && this.supportXS\n                ? `${this.dataKeymap('i:item,l:\\'\\'')}`\n                : this.dataKeymap('i:item');\n            return `<import src=\"./base${ext}\" />\n  <block ${adapter.for}=\"{{i.${Shortcuts.Childnodes}}}\" ${adapter.key}=\"sid\">\n    <template is=\"tmpl_0_container\" data=\"{{${data}}}\" />\n  </block>`;\n        };\n        this.buildXScript = () => {\n            return `${this.exportExpr} {\n  a: ${this.buildXSTmplName()},\n  b: function (a, b) {\n    return a === undefined ? b : a\n  },\n  c: ${this.buildXSTepFocus(Shortcuts.NodeName)},\n  d: function (i, v) {\n    return i === undefined ? v : i\n  },\n  e: function (n) {\n    return 'tmpl_' + n + '_${Shortcuts.Container}'\n  },\n  ${this.buildXSTmpExtra()}\n}`;\n        };\n    }\n    buildAttribute(attrs, nodeName) {\n        return Object.keys(attrs)\n            .map(k => `${k}=\"${k.startsWith('bind') || k.startsWith('on') || k.startsWith('catch') ? attrs[k] : `{${this.getAttrValue(attrs[k], k, nodeName)}}`}\" `)\n            .join('');\n    }\n    /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\n    replacePropName(name, value, _componentName, _componentAlias) {\n        if (value === 'eh')\n            return name.toLowerCase();\n        return name;\n    }\n    createMiniComponents(components) {\n        const result = Object.create(null);\n        for (const key in components) {\n            if (hasOwn(components, key)) {\n                let component = components[key];\n                const compName = toDashed(key);\n                const newComp = Object.create(null);\n                const componentAlias = this.componentsAlias[compName];\n                if (isFunction(this.modifyCompProps)) {\n                    component = this.modifyCompProps(compName, component);\n                }\n                for (let prop in component) {\n                    if (hasOwn(component, prop)) {\n                        let propValue = component[prop];\n                        if (prop.startsWith('bind') || propValue === 'eh') {\n                            propValue = 'eh';\n                        }\n                        else if (propValue === '') {\n                            const propInCamelCase = toCamelCase(prop);\n                            const propAlias = componentAlias[propInCamelCase] || propInCamelCase;\n                            propValue = `i.${propAlias}`;\n                        }\n                        else if (isBooleanStringLiteral(propValue) || isNumber(+propValue)) {\n                            const propInCamelCase = toCamelCase(prop);\n                            const propAlias = componentAlias[propInCamelCase] || propInCamelCase;\n                            propValue = this.supportXS\n                                ? `xs.b(i.${propAlias},${propValue})`\n                                : `i.${propAlias}===undefined?${propValue}:i.${propAlias}`;\n                        }\n                        else {\n                            const propInCamelCase = toCamelCase(prop);\n                            const propAlias = componentAlias[propInCamelCase] || propInCamelCase;\n                            propValue = `i.${propAlias}||${propValue || singleQuote('')}`;\n                        }\n                        prop = this.replacePropName(prop, propValue, compName, componentAlias);\n                        newComp[prop] = propValue;\n                    }\n                }\n                if (compName !== 'block') {\n                    Object.assign(newComp, styles, this.getEvents());\n                }\n                if (compName === 'swiper-item') {\n                    delete newComp.style;\n                }\n                if (compName === 'view') {\n                    const reg = /^(bind|on)(touchmove|TouchMove)$/;\n                    const comp = { ...newComp };\n                    Object.keys(comp).forEach(originKey => {\n                        if (!reg.test(originKey))\n                            return;\n                        const key = originKey.replace(reg, 'catch$2');\n                        comp[key] = comp[originKey];\n                        delete comp[originKey];\n                    });\n                    result['catch-view'] = comp;\n                }\n                if (compName === 'view' || compName === 'text' || compName === 'image') {\n                    const comp = {};\n                    Object.keys(newComp).forEach(key => {\n                        const value = newComp[key];\n                        if (value !== 'eh')\n                            comp[key] = value;\n                    });\n                    result[`static-${compName}`] = comp;\n                    if (compName === 'view') {\n                        result['pure-view'] = {\n                            style: comp.style,\n                            class: comp.class,\n                        };\n                    }\n                }\n                if (compName === 'slot' || compName === 'slot-view') {\n                    result[compName] = {\n                        slot: newComp === null || newComp === void 0 ? void 0 : newComp.name,\n                        ...styles,\n                    };\n                }\n                else {\n                    result[compName] = newComp;\n                }\n            }\n        }\n        return result;\n    }\n    buildBaseTemplate() {\n        const { adapter } = this;\n        const data = !this.isSupportRecursive && this.supportXS\n            ? `${this.dataKeymap('i:item,l:\\'\\'')}`\n            : this.dataKeymap('i:item');\n        return `${this.buildXsTemplate()}\n<template name=\"ice_tmpl\">\n  <block ${adapter.for}=\"{{root.cn}}\" ${adapter.key}=\"sid\">\n    <template is=\"tmpl_0_${Shortcuts.Container}\" data=\"{{${data}}}\" />\n  </block>\n</template>\n`;\n    }\n    buildThirdPartyAttr(attrs, patcher = {}) {\n        return Array.from(attrs).reduce((str, attr) => {\n            if (attr.startsWith('@')) {\n                // vue2\n                let value = attr.slice(1);\n                if (value.indexOf('-') > -1) {\n                    value = `:${value}`;\n                }\n                return `${str}bind${value}=\"eh\" `;\n            }\n            else if (attr.startsWith('bind')) {\n                return `${str}${attr}=\"eh\" `;\n            }\n            else if (attr.startsWith('on')) {\n                // react, vue3\n                let value = toKebabCase(attr.slice(2));\n                if (value.indexOf('-') > -1) {\n                    // 兼容如 vant 某些组件的 bind:a-b 这类属性\n                    value = `:${value}`;\n                }\n                return `${str}bind${value}=\"eh\" `;\n            }\n            else if (attr === 'class') {\n                return `${str}class=\"{{i.${Shortcuts.Class}}}\" `;\n            }\n            else if (attr === 'style') {\n                return `${str}style=\"{{i.${Shortcuts.Style}}}\" `;\n            }\n            const patchValue = patcher[attr];\n            if (isBooleanStringLiteral(patchValue) || isNumber(patchValue) || isString(patchValue)) {\n                const propValue = this.supportXS\n                    ? `xs.b(i.${toCamelCase(attr)},${patchValue})`\n                    : `i.${toCamelCase(attr)}===undefined?${patchValue}:i.${toCamelCase(attr)}`;\n                return `${str}${attr}=\"{{${propValue}}}\" `;\n            }\n            return `${str}${attr}=\"{{i.${toCamelCase(attr)}}}\" `;\n        }, '');\n    }\n    buildComponentTemplate(comp, level) {\n        return this.focusComponents.has(comp.nodeName)\n            ? this.buildFocusComponentTemplte(comp, level)\n            : this.buildStandardComponentTemplate(comp, level);\n    }\n    getChildren(comp, level) {\n        const { isSupportRecursive, adapter, supportXS } = this;\n        const nextLevel = isSupportRecursive ? 0 : level + 1;\n        const data = !this.isSupportRecursive && supportXS\n            ? `${this.dataKeymap('i:item,l:l')}`\n            : this.dataKeymap('i:item');\n        let child = supportXS\n            ? `<template is=\"{{xs.e(${isSupportRecursive ? 0 : 'cid+1'})}}\" data=\"{{${data}}}\" />`\n            : `<template is=\"tmpl_${nextLevel}_${Shortcuts.Container}\" data=\"{{${data}}}\" />`;\n        if (isFunction(this.modifyLoopBody)) {\n            child = this.modifyLoopBody(child, comp.nodeName);\n        }\n        let children = this.voidElements.has(comp.nodeName)\n            ? ''\n            : `\n    <block ${adapter.for}=\"{{i.${Shortcuts.Childnodes}}}\" ${adapter.key}=\"sid\">\n      ${indent(child, 6)}\n    </block>\n  `;\n        if (isFunction(this.modifyLoopContainer)) {\n            children = this.modifyLoopContainer(children, comp.nodeName);\n        }\n        return children;\n    }\n    buildFocusComponentTemplte(comp, level) {\n        const children = this.getChildren(comp, level);\n        const { nodeName } = comp;\n        const { nodeAlias } = comp;\n        const attrs = { ...comp.attributes };\n        const templateName = this.supportXS\n            ? `xs.c(i, 'tmpl_${level}_')`\n            : `i.focus ? 'tmpl_${level}_${nodeAlias}_focus' : 'tmpl_${level}_${nodeAlias}_blur'`;\n        delete attrs.focus;\n        let res = `\n<template name=\"tmpl_${level}_${nodeAlias}\">\n  <template is=\"{{${templateName}}}\" data=\"{{${this.dataKeymap('i:i')}${children ? ',cid:cid' : ''}}}\" />\n</template>\n\n<template name=\"tmpl_${level}_${nodeAlias}_focus\">\n  <${nodeName} ${this.buildAttribute(comp.attributes, nodeName)} id=\"{{i.uid||i.sid}}\" data-sid=\"{{i.sid}}\">${children}</${nodeName}>\n</template>\n\n<template name=\"tmpl_${level}_${nodeAlias}_blur\">\n  <${nodeName} ${this.buildAttribute(attrs, nodeName)} id=\"{{i.uid||i.sid}}\" data-sid=\"{{i.sid}}\">${children}</${nodeName}>\n</template>\n`;\n        if (isFunction(this.modifyTemplateResult)) {\n            res = this.modifyTemplateResult(res, nodeName, level, children);\n        }\n        return res;\n    }\n    buildStandardComponentTemplate(comp, level) {\n        const children = this.getChildren(comp, level);\n        const { nodeAlias } = comp;\n        let nodeName = '';\n        switch (comp.nodeName) {\n            case 'slot':\n            case 'slot-view':\n            case 'catch-view':\n            case 'static-view':\n            case 'pure-view':\n                nodeName = 'view';\n                break;\n            case 'static-text':\n                nodeName = 'text';\n                break;\n            case 'static-image':\n                nodeName = 'image';\n                break;\n            default:\n                nodeName = comp.nodeName;\n                break;\n        }\n        let res = `\n<template name=\"tmpl_${level}_${nodeAlias}\">\n  <${nodeName} ${this.buildAttribute(comp.attributes, comp.nodeName)} id=\"{{i.uid||i.sid}}\" data-sid=\"{{i.sid}}\">${children}</${nodeName}>\n</template>\n`;\n        if (isFunction(this.modifyTemplateResult)) {\n            res = this.modifyTemplateResult(res, comp.nodeName, level, children);\n        }\n        return res;\n    }\n    buildPlainTextTemplate(level) {\n        return `\n<template name=\"tmpl_${level}_${this.componentsAlias['#text']._num}\">\n  <block>{{i.${Shortcuts.Text}}}</block>\n</template>\n`;\n    }\n    buildThirdPartyTemplate(level, componentConfig) {\n        const { adapter, isSupportRecursive, supportXS, nestElements } = this;\n        const nextLevel = isSupportRecursive ? 0 : level + 1;\n        let template = '';\n        const data = !isSupportRecursive && supportXS\n            ? `${this.dataKeymap('i:item,l:l')}`\n            : this.dataKeymap('i:item');\n        componentConfig.thirdPartyComponents.forEach((attrs, compName) => {\n            if (compName === 'custom-wrapper') {\n                template += `\n<template name=\"tmpl_${level}_${compName}\">\n  <${compName} i=\"{{i}}\" l=\"{{l}}\" id=\"{{i.uid||i.sid}}\" data-sid=\"{{i.sid}}\">\n  </${compName}>\n</template>\n  `;\n            }\n            else {\n                if (!isSupportRecursive &&\n                    supportXS &&\n                    nestElements.has(compName) &&\n                    level + 1 > nestElements.get(compName)) {\n                    return;\n                }\n                let child = supportXS\n                    ? `<template is=\"{{xs.e(${isSupportRecursive ? 0 : 'cid+1'})}}\" data=\"{{${data}}}\" />`\n                    : `<template is=\"tmpl_${nextLevel}_${Shortcuts.Container}\" data=\"{{${data}}}\" />`;\n                if (isFunction(this.modifyThirdPartyLoopBody)) {\n                    child = this.modifyThirdPartyLoopBody(child, compName);\n                }\n                template += `\n<template name=\"tmpl_${level}_${compName}\">\n  <${compName} ${this.buildThirdPartyAttr(attrs, this.thirdPartyPatcher[compName] || {})} id=\"{{i.uid||i.sid}}\" data-sid=\"{{i.sid}}\">\n    <block ${adapter.for}=\"{{i.${Shortcuts.Childnodes}}}\" ${adapter.key}=\"sid\">\n      ${child}\n    </block>\n  </${compName}>\n</template>\n  `;\n            }\n        });\n        return template;\n    }\n    buildContainerTemplate(level, restart = false) {\n        let tmpl = '';\n        if (restart) {\n            tmpl = `<block ${this.adapter.if}=\"{{i.nn === '#text'}}\">\n    <template is=\"tmpl_0_#text\" data=\"{{i:i}}\" />\n  </block>\n  <block ${this.adapter.else}>\n    ${!this.isSupportRecursive && this.supportXS ? '<comp i=\"{{i}}\" l=\"{{l}}\" />' : '<comp i=\"{{i}}\" />'}\n  </block>`;\n        }\n        else {\n            const xs = this.isSupportRecursive\n                ? `xs.a(${level}, i.${Shortcuts.NodeName})`\n                : `xs.a(${level}, i.${Shortcuts.NodeName}, l)`;\n            const data = this.isSupportRecursive\n                ? `${this.dataKeymap('i:i')}`\n                : `${this.dataKeymap(`i:i,cid:${level},l:xs.f(l,i.${Shortcuts.NodeName})`)}`;\n            tmpl = this.supportXS\n                ? `<template is=\"{{${xs}}}\" data=\"{{${data}}}\" />`\n                : `<template is=\"{{'tmpl_${level}_' + i.${Shortcuts.NodeName}}}\" data=\"{{${this.dataKeymap('i:i')}}}\" />`;\n        }\n        return `\n<template name=\"tmpl_${level}_${Shortcuts.Container}\">\n  ${tmpl}\n</template>\n`;\n    }\n    dataKeymap(keymap) {\n        return keymap;\n    }\n    getEvents() {\n        return events;\n    }\n    /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\n    getAttrValue(value, _key, _nodeName) {\n        return `{${value}}`;\n    }\n    buildXsTemplate() {\n        return '';\n    }\n    mergeComponents(ctx, patch) {\n        ctx.helper.recursiveMerge(this.internalComponents, patch);\n    }\n    mergeThirdPartyComponents(patch) {\n        this.thirdPartyPatcher = patch;\n    }\n    buildXSTmplName() {\n        return `function (l, n) {\n    return 'tmpl_' + l + '_' + n\n  }`;\n    }\n    buildXSTepFocus(nn) {\n        return `function(i, prefix) {\n    var s = i.focus !== undefined ? 'focus' : 'blur'\n    return prefix + i.${nn} + '_' + s\n  }`;\n    }\n    buildXSTmpExtra() {\n        return '';\n    }\n}\nexport class RecursiveTemplate extends BaseTemplate {\n    constructor() {\n        super(...arguments);\n        this.isSupportRecursive = true;\n        this.buildTemplate = (componentConfig) => {\n            let template = this.buildBaseTemplate();\n            if (!this.miniComponents) {\n                this.componentsAlias = getComponentsAlias(this.internalComponents);\n                this.miniComponents = this.createMiniComponents(this.internalComponents);\n            }\n            const ZERO_FLOOR = 0;\n            const components = Object.keys(this.miniComponents)\n                .filter(c => (componentConfig.includes.size &&\n                !componentConfig.includeAll ? componentConfig.includes.has(c) : true));\n            template = components.reduce((current, nodeName) => {\n                const attributes = this.miniComponents[nodeName];\n                const nodeAlias = this.componentsAlias[nodeName]._num;\n                return current + this.buildComponentTemplate({ nodeName, nodeAlias, attributes }, ZERO_FLOOR);\n            }, template);\n            template += this.buildPlainTextTemplate(ZERO_FLOOR);\n            template += this.buildThirdPartyTemplate(ZERO_FLOOR, componentConfig);\n            template += this.buildContainerTemplate(ZERO_FLOOR);\n            return template;\n        };\n    }\n}\nexport class UnRecursiveTemplate extends BaseTemplate {\n    constructor() {\n        super(...arguments);\n        this.isSupportRecursive = false;\n        this._baseLevel = 16;\n        this.buildTemplate = (componentConfig) => {\n            this.componentConfig = componentConfig;\n            if (!this.miniComponents) {\n                this.componentsAlias = getComponentsAlias(this.internalComponents);\n                this.miniComponents = this.createMiniComponents(this.internalComponents);\n            }\n            const components = Object.keys(this.miniComponents)\n                .filter(c => (componentConfig.includes.size &&\n                !componentConfig.includeAll ? componentConfig.includes.has(c) : true));\n            let template = this.buildBaseTemplate();\n            for (let i = 0; i < this.baseLevel; i++) {\n                template += this.supportXS\n                    ? this.buildOptimizeFloor(i, components, this.baseLevel === i + 1)\n                    : this.buildFloor(i, components, this.baseLevel === i + 1);\n            }\n            return template;\n        };\n    }\n    set baseLevel(lv) {\n        this._baseLevel = lv;\n    }\n    get baseLevel() {\n        return this._baseLevel;\n    }\n    buildFloor(level, components, restart = false) {\n        if (restart)\n            return this.buildContainerTemplate(level, restart);\n        let template = components.reduce((current, nodeName) => {\n            const attributes = this.miniComponents[nodeName];\n            const nodeAlias = this.componentsAlias[nodeName]._num;\n            return current + this.buildComponentTemplate({ nodeName, nodeAlias, attributes }, level);\n        }, '');\n        template += this.buildPlainTextTemplate(level);\n        template += this.buildThirdPartyTemplate(level, this.componentConfig);\n        template += this.buildContainerTemplate(level, restart);\n        return template;\n    }\n    buildOptimizeFloor(level, components, restart = false) {\n        if (restart)\n            return this.buildContainerTemplate(level, restart);\n        let template = components.reduce((current, nodeName) => {\n            if (level !== 0) {\n                if (!this.nestElements.has(nodeName)) {\n                    // 不可嵌套自身的组件只需输出一层模板\n                    return current;\n                }\n                else {\n                    // 部分可嵌套自身的组件实际上不会嵌套过深，这里按阈值限制层数\n                    const max = this.nestElements.get(nodeName);\n                    if (max > 0 && level >= max) {\n                        return current;\n                    }\n                }\n            }\n            const attributes = this.miniComponents[nodeName];\n            const nodeAlias = this.componentsAlias[nodeName]._num;\n            return current + this.buildComponentTemplate({ nodeName, nodeAlias, attributes }, level);\n        }, '');\n        if (level === 0)\n            template += this.buildPlainTextTemplate(level);\n        template += this.buildThirdPartyTemplate(level, this.componentConfig);\n        template += this.buildContainerTemplate(level);\n        return template;\n    }\n    buildXSTmplName() {\n        const isLoopComps = [\n            ...Array.from(this.nestElements.keys()),\n            ...Array.from(this.componentConfig.thirdPartyComponents.keys()),\n        ];\n        const isLoopCompsSet = new Set(isLoopComps);\n        const hasMaxComps = [];\n        this.nestElements.forEach((max, comp) => {\n            if (max > 1) {\n                hasMaxComps.push(comp);\n            }\n            else if (max === 1 && isLoopCompsSet.has(comp)) {\n                isLoopCompsSet.delete(comp);\n            }\n        });\n        const { componentsAlias } = this;\n        const listA = Array.from(isLoopCompsSet).map(item => { var _a; return ((_a = componentsAlias[item]) === null || _a === void 0 ? void 0 : _a._num) || item; });\n        const listB = hasMaxComps.map(item => { var _a; return ((_a = componentsAlias[item]) === null || _a === void 0 ? void 0 : _a._num) || item; });\n        const containerLevel = this.baseLevel - 1;\n        return `function (l, n, s) {\n    var a = ${JSON.stringify(listA)}\n    var b = ${JSON.stringify(listB)}\n    if (a.indexOf(n) === -1) {\n      l = 0\n    }\n    if (b.indexOf(n) > -1) {\n      var u = s.split(',')\n      var depth = 0\n      for (var i = 0; i < u.length; i++) {\n        if (u[i] === n) depth++\n      }\n      l = depth\n    }\n    if (l >= ${containerLevel}) {\n      return 'tmpl_${containerLevel}_${Shortcuts.Container}'\n    }\n    return 'tmpl_' + l + '_' + n\n  }`;\n    }\n    buildXSTmpExtra() {\n        const hasMaxComps = [];\n        this.nestElements.forEach((max, comp) => {\n            if (max > 1)\n                hasMaxComps.push(comp);\n        });\n        const { componentsAlias } = this;\n        const listA = hasMaxComps.map(item => { var _a; return ((_a = componentsAlias[item]) === null || _a === void 0 ? void 0 : _a._num) || item; });\n        return `f: function (l, n) {\n    var b = ${JSON.stringify(listA)}\n    if (b.indexOf(n) > -1) {\n      if (l) l += ','\n      l += n\n    }\n    return l\n  }`;\n    }\n}\nexport { capitalize, internalComponents, Shortcuts, toCamelCase, };\n","import { toCamelCase, toDashed } from '../utils.js';\nimport { internalComponents } from './components.js';\nexport function mergeInternalComponents(components) {\n    Object.keys(components).forEach(name => {\n        if (name in internalComponents) {\n            Object.assign(internalComponents[name], components[name]);\n        }\n        else {\n            internalComponents[name] = components[name];\n        }\n    });\n    return internalComponents;\n}\nexport function getComponentsAlias(origin) {\n    const mapping = {};\n    const viewAttrs = origin.View;\n    const extraList = {\n        '#text': {},\n        StaticView: viewAttrs,\n        StaticImage: origin.Image,\n        StaticText: origin.Text,\n        PureView: viewAttrs,\n        CatchView: viewAttrs,\n    };\n    origin = { ...origin, ...extraList };\n    Object.keys(origin)\n        .sort((a, b) => {\n        const reg = /^(Static|Pure|Catch)*(View|Image|Text)$/;\n        const isACommonly = reg.test(a);\n        const isBCommonly = reg.test(b);\n        if (isACommonly && isBCommonly) {\n            return a > b ? 1 : -1;\n        }\n        else if (isACommonly) {\n            return -1;\n        }\n        else if (isBCommonly) {\n            return 1;\n        }\n        else {\n            return a >= b ? 1 : -1;\n        }\n    })\n        .forEach((key, num) => {\n        const obj = {\n            _num: String(num),\n        };\n        Object.keys(origin[key])\n            .filter(attr => !(/^bind/.test(attr)) && !['focus', 'blur'].includes(attr))\n            .sort()\n            .forEach((attr, index) => {\n            obj[toCamelCase(attr)] = `p${index}`;\n        });\n        mapping[toDashed(key)] = obj;\n    });\n    return mapping;\n}\n","export const EMPTY_OBJ = {};\nexport const EMPTY_ARR = [];\nexport const noop = () => { };\nexport function toCamelCase(s) {\n    let camel = '';\n    let nextCap = false;\n    for (let i = 0; i < s.length; i++) {\n        if (s[i] === '-') {\n            nextCap = true;\n        }\n        else {\n            camel += nextCap ? s[i].toUpperCase() : s[i];\n            nextCap = false;\n        }\n    }\n    return camel;\n}\nexport function toDashed(s) {\n    return s.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();\n}\nexport const toKebabCase = function (string) {\n    return string.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n};\nexport function capitalize(s) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n}\nexport function indent(str, size) {\n    return str.split('\\n')\n        .map((line, index) => {\n        const indent = index === 0 ? '' : Array(size).fill(' ').join('');\n        return indent + line;\n    })\n        .join('\\n');\n}\n/**\n * ensure takes a condition and throw a error if the condition fails,\n * like failure::ensure: https://docs.rs/failure/0.1.1/failure/macro.ensure.html\n * @param condition condition.\n * @param msg error message.\n */\nexport function ensure(condition, msg) {\n    if (!condition) {\n        if (process.env.NODE_ENV === 'production') {\n            throw new Error(msg);\n        }\n        else {\n            const reportIssue = '\\n如有疑问，请提交 issue 至：https://github.com/alibaba/ice/issues';\n            throw new Error(msg + reportIssue);\n        }\n    }\n}\nexport function warn(condition, msg) {\n    if (process.env.NODE_ENV !== 'production') {\n        if (condition) {\n            console.warn(`[ice miniapp warn] ${msg}`);\n        }\n    }\n}\nconst { hasOwnProperty } = Object.prototype;\nexport const hasOwn = (val, key) => hasOwnProperty.call(val, key);\n"],"names":[],"sourceRoot":""}