{
  "version": 3,
  "sources": ["../../.ice/env.server.ts", "../../.ice/entry.server.ts", "../../.ice/runtime-modules.ts", "../../src/app.ts", "../../.ice/index.ts", "../../src/document.tsx", "asset-manifest:virtual:assets-manifest.json", "../../.ice/routes.tsx"],
  "sourcesContent": ["// Define process.env in top make it possible to use ICE_CORE_* in @ice/runtime, esbuild define options doesn't have the ability\n// The runtime value such as __process.env.ICE_CORE_*__ will be replaced by esbuild define, so the value is real-time\n\nprocess.env.ICE_CORE_MODE = __process.env.ICE_CORE_MODE__;\nprocess.env.ICE_CORE_ROUTER = __process.env.ICE_CORE_ROUTER__;\nprocess.env.ICE_CORE_ERROR_BOUNDARY = __process.env.ICE_CORE_ERROR_BOUNDARY__;\nprocess.env.ICE_CORE_INITIAL_DATA = __process.env.ICE_CORE_INITIAL_DATA__;\nprocess.env.ICE_CORE_DEV_PORT = __process.env.ICE_CORE_DEV_PORT__;\nprocess.env.ICE_CORE_REMOVE_ROUTES_CONFIG = __process.env.ICE_CORE_REMOVE_ROUTES_CONFIG__;\nprocess.env.ICE_CORE_REMOVE_DATA_LOADER = __process.env.ICE_CORE_REMOVE_DATA_LOADER__;", "import './env.server';\nimport { getAppConfig, renderToHTML as renderAppToHTML, renderToResponse as renderAppToResponse } from '@ice/runtime/server';\n\nimport { commons, statics } from './runtime-modules';\nimport * as app from '@/app';\nimport * as Document from '@/document';\nimport type { RenderMode } from '@ice/runtime';\nimport type { RenderToPipeableStreamOptions } from 'react-dom/server';\n// @ts-ignore\nimport assetsManifest from 'virtual:assets-manifest.json';\nimport createRoutes from './routes';\n\nconst runtimeModules = { commons, statics };\n\nconst getRouterBasename = () => {\n  const appConfig = getAppConfig(app);\n  return appConfig?.router?.basename ?? \"/\" ?? '';\n}\n\nconst setRuntimeEnv = (renderMode) => {\n  if (renderMode === 'SSG') {\n    process.env.ICE_CORE_SSG = 'true';\n  } else {\n    process.env.ICE_CORE_SSR = 'true';\n  }\n}\n\ninterface RenderOptions {\n  documentOnly?: boolean;\n  renderMode?: RenderMode;\n  basename?: string;\n  serverOnlyBasename?: string;\n  routePath?: string;\n  disableFallback?: boolean;\n  publicPath?: string;\n  serverData?: any;\n  streamOptions?: RenderToPipeableStreamOptions;\n}\n\nexport async function renderToHTML(requestContext, options: RenderOptions = {}) {\n  const { renderMode = 'SSR' } = options;\n  setRuntimeEnv(renderMode);\n  const mergedOptions = mergeOptions(options);\n  return await renderAppToHTML(requestContext, mergedOptions);\n}\n\nexport async function renderToResponse(requestContext, options: RenderOptions = {}) {\n  const { renderMode = 'SSR' } = options;\n  setRuntimeEnv(renderMode);\n  const mergedOptions = mergeOptions(options);\n  return renderAppToResponse(requestContext, mergedOptions);\n}\n\nfunction mergeOptions(options) {\n  const { renderMode = 'SSR', basename, publicPath } = options;\n\n  if (publicPath) {\n    assetsManifest.publicPath = publicPath;\n  }\n\n  return {\n    ...options,\n    app,\n    assetsManifest,\n    createRoutes,\n    runtimeModules,\n    documentDataLoader: Document.dataLoader,\n    Document: Document.default,\n    basename: basename || getRouterBasename(),\n    renderMode,\n    runtimeOptions: {\n    },\n  };\n}\n", "import module0 from '@ice/plugin-miniapp/runtime';\n                \nexport const statics = [\n];\nexport const commons = [\n  module0,\n];\n", "import { defineAppConfig } from 'ice';\nimport { defineAuthConfig } from '@ice/plugin-auth/types';\n\n// App config, see https://v3.ice.work/docs/guide/basic/app\nexport default defineAppConfig(() => ({\n router: {\n    type: 'memory',\n    // 渲染 home 页面\n    initialEntries: ['/home'],\n  },\n    app: {\n    strict: true,\n  },\n}));\n\n// MiniappManifest, see https://v3.ice.work/docs/guide/miniapp/app-config\nexport const miniappManifest = {\n  routes: [\n    'index',\n    'about',\n    'repo/index',\n    'repo/preview',\n    'about'\n  ],\n};\nexport const authConfig = defineAuthConfig(() => {\n  return {\n    initialAuth: {\n      admin: true,\n    },\n  };\n});", "import { definePageConfig, defineRunApp } from './type-defines';\nimport { Link, NavLink, Outlet, useParams, useSearchParams, useLocation, useData, useConfig, useNavigate, useNavigation, useRevalidator, useAsyncValue } from '@ice/runtime/router';\nimport { defineAppConfig, useAppData, history, useActive, KeepAliveOutlet, useMounted, ClientOnly, withSuspense, useSuspenseData, usePublicAppContext as useAppContext, Await, usePageLifecycle, unstable_useDocumentData, dynamic, Meta, Title, Links, Scripts, FirstChunkCache, Data, Main, usePageAssets } from '@ice/runtime';\nimport { defineDataLoader, defineServerDataLoader, defineStaticDataLoader } from '@ice/runtime/data-loader';\nexport {\n  definePageConfig,\n  defineRunApp,\n  Link,\n  NavLink,\n  Outlet,\n  useParams,\n  useSearchParams,\n  useLocation,\n  useData,\n  useConfig,\n  useNavigate,\n  useNavigation,\n  useRevalidator,\n  useAsyncValue,\n  defineAppConfig,\n  useAppData,\n  history,\n  useActive,\n  KeepAliveOutlet,\n  useMounted,\n  ClientOnly,\n  withSuspense,\n  useSuspenseData,\n  useAppContext,\n  Await,\n  usePageLifecycle,\n  unstable_useDocumentData,\n  dynamic,\n  Meta,\n  Title,\n  Links,\n  Scripts,\n  FirstChunkCache,\n  Data,\n  Main,\n  usePageAssets,\n  defineDataLoader,\n  defineServerDataLoader,\n  defineStaticDataLoader,  \n};\n\nexport * from './types';\n", "import { Meta, Title, Links, Main, Scripts } from 'ice';\n\nexport default function Document() {\n  return (\n    <html>\n      <head>\n        <meta charSet=\"utf-8\" />\n        <meta name=\"description\" content=\"ice.js 3 lite scaffold\" />\n        <link rel=\"icon\" href=\"/favicon.ico\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover\" />\n        <Meta />\n        <Title />\n        <Links />\n      </head>\n      <body>\n        <Main />\n        <Scripts />\n      </body>\n    </html>\n  );\n}\n", "{\"publicPath\":\"/\",\"entries\":{\"main\":[\"js/framework.js\",\"js/vendors-node_modules_pnpm_ice_bundles_0_2_9__swc_helpers_0_5_1_node_modules_ice_bundles_compi-5d6a84.js\",\"js/main.js\"]},\"pages\":{\"index\":[\"js/p_index.js\",\"css/p_index.css\"]},\"assets\":{}}", "import { createRouteLoader, WrapRouteComponent, RouteErrorComponent } from '@ice/runtime';\nimport type { CreateRoutes } from '@ice/runtime';\nconst createRoutes: CreateRoutes = ({\n  requestContext,\n  renderMode,\n}) => ([\n  {\n    path: '',\n    async lazy() {\n      const componentModule = await import(/* webpackChunkName: \"p_index\" */ '@/pages/index');\n      return {\n        ...componentModule,\n        Component: () => WrapRouteComponent({\n          routeId: '/',\n          isLayout: false,\n          routeExports: componentModule,\n        }),\n        loader: createRouteLoader({\n          routeId: '/',\n          requestContext,\n          renderMode,\n          module: componentModule,\n        }),\n      };\n    },\n    errorElement: <RouteErrorComponent />,\n    componentName: 'index',\n    index: true,\n    id: '/',\n    exact: true,\n    exports: [\"default\"],\n  },\n]);\nexport default createRoutes;\n"],
  "mappings": "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",
  "names": ["process", "env", "ICE_CORE_MODE", "__process", "ICE_CORE_ROUTER", "ICE_CORE_ERROR_BOUNDARY", "ICE_CORE_INITIAL_DATA", "ICE_CORE_DEV_PORT", "ICE_CORE_REMOVE_ROUTES_CONFIG", "ICE_CORE_REMOVE_DATA_LOADER", "getAppConfig", "renderToHTML", "renderAppToHTML", "renderToResponse", "renderAppToResponse", "module0", "statics", "commons", "Link", "NavLink", "Outlet", "useParams", "useSearchParams", "useLocation", "useData", "useConfig", "useNavigate", "useNavigation", "useRevalidator", "useAsyncValue", "defineAppConfig", "useAppData", "history", "useActive", "KeepAliveOutlet", "useMounted", "ClientOnly", "withSuspense", "useSuspenseData", "usePublicAppContext", "useAppContext", "Await", "usePageLifecycle", "unstable_useDocumentData", "dynamic", "Meta", "Title", "Links", "Scripts", "FirstChunkCache", "Data", "Main", "usePageAssets", "defineDataLoader", "defineServerDataLoader", "defineStaticDataLoader", "defineAuthConfig", "defineAppConfig", "router", "type", "initialEntries", "app", "strict", "miniappManifest", "routes", "authConfig", "initialAuth", "admin", "Document", "html", "head", "meta", "charSet", "name", "content", "link", "rel", "href", "Meta", "Title", "Links", "body", "Main", "Scripts", "createRouteLoader", "WrapRouteComponent", "RouteErrorComponent", "createRoutes", "requestContext", "renderMode", "path", "lazy", "componentModule", "Component", "routeId", "isLayout", "routeExports", "loader", "module", "errorElement", "_jsxDEV", "componentName", "index", "id", "exact", "exports", "runtimeModules", "commons", "statics", "getRouterBasename", "appConfig", "getAppConfig", "app", "router", "basename", "setRuntimeEnv", "renderMode", "process", "env", "ICE_CORE_SSG", "ICE_CORE_SSR", "renderToHTML", "requestContext", "options", "mergedOptions", "mergeOptions", "renderAppToHTML", "renderToResponse", "renderAppToResponse", "publicPath", "assetsManifest", "createRoutes", "documentDataLoader", "dataLoader", "Document", "runtimeOptions"]
}
